!function(){var Cu=typeof window<"u"?window:global,vr={};if(function(P,Xc,ku){var d;function Gc(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var Eo="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},Wt=function _v(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof P&&P,"object"==typeof self&&self,"object"==typeof Xc&&Xc];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function _e(e,t){if(t)e:{var n=Wt;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&Eo(n,e,{configurable:!0,writable:!0,value:t})}}function Wc(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:Gc(e)}}function q(e){if(!(e instanceof Array)){e=p(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}_e("Symbol",function(e){function n(o,s){this.g=o,Eo(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}}),_e("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=Wt[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&Eo(i.prototype,e,{configurable:!0,writable:!0,value:function(){return Wc(Gc(this))}})}return e});var Du,Ov="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)Du=Object.setPrototypeOf;else{var Ru;e:{var zc={};try{zc.__proto__={a:!0},Ru=zc.a;break e}catch{}Ru=!1}Du=Ru?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Yc=Du;function Qe(e,t){if(e.prototype=Ov(t.prototype),e.prototype.constructor=e,Yc)Yc(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Oi=t.prototype}function Ao(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function Nu(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function Lu(e,t){e.i={Jf:t,Qf:!0},e.g=e.m||e.j}function y(e,t,n){return e.g=n,{value:t}}function F(e){e.g=0}function ee(e,t,n){e.m=t,null!=n&&(e.j=n)}function Wn(e){e.m=0,e.j=2}function ue(e,t,n){e.g=t,e.m=n||0}function te(e,t){return e.m=t||0,t=e.i.Jf,e.i=null,t}function tn(e){e.u=[e.i],e.m=0,e.j=0}function nn(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Qf?e.g=e.m||e.j:null!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function Bv(e){this.g=new Ao,this.h=e}function Pu(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var o=r.value}catch(s){return e.g.l=null,Lu(e.g,s),yr(e)}return e.g.l=null,i.call(e.g,o),yr(e)}function yr(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Lu(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Qf)throw t.Jf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function bv(e){this.next=function(t){return Nu(e.g),e.g.l?t=Pu(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=yr(e)),t},this.throw=function(t){return Nu(e.g),e.g.l?t=Pu(e,e.g.l.throw,t,e.g.s):(Lu(e.g,t),t=yr(e)),t},this.return=function(t){return function Fv(e,t){Nu(e.g);var n=e.g.l;return n?Pu(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),yr(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function C(e){return function Vv(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){!function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}(e.next())})}(new bv(new Bv(e)))}function Ut(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $c(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{Of:r,v:o}}return{Of:-1,v:void 0}}function ju(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function _u(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}Ao.prototype.s=function(e){this.h=e},Ao.prototype.return=function(e){this.i={return:e},this.g=this.j},Ao.prototype.B=function(e){this.g=e},_e("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(null==this.g){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=Wt.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.F),reject:s(this.l)}},t.prototype.F=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.H(s);else{e:switch(typeof s){case"object":var u=null!=s;break e;case"function":u=!0;break e;default:u=!1}u?this.C(s):this.m(s)}},t.prototype.C=function(s){var u=void 0;try{u=s.then}catch(a){return void this.l(a)}"function"==typeof u?this.I(u,s):this.m(s)},t.prototype.l=function(s){this.s(2,s)},t.prototype.m=function(s){this.s(1,s)},t.prototype.s=function(s,u){if(0!=this.h)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var s=this;r(function(){if(s.A()){var u=Wt.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.A=function(){if(this.o)return!1;var s=Wt.CustomEvent,u=Wt.Event,a=Wt.dispatchEvent;return typeof a>"u"||("function"==typeof s?s=new s("unhandledrejection",{cancelable:!0}):"function"==typeof u?s=new u("unhandledrejection",{cancelable:!0}):(s=Wt.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,s),s.promise=this,s.reason=this.i,a(s))},t.prototype.u=function(){if(null!=this.g){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.H=function(s){var u=this.j();s.od(u.resolve,u.reject)},t.prototype.I=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(h,g){return"function"==typeof h?function(m){try{l(h(m))}catch(w){c(w)}}:g}var l,c,f=new t(function(h,g){l=h,c=g});return this.od(a(s,l),a(u,c)),f},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.od=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;null==this.g?o.h(a):this.g.push(a),this.o=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=p(s),c=l.next();!c.done;c=l.next())i(c.value).od(u,a)})},t.all=function(s){var u=p(s),a=u.next();return a.done?i([]):new t(function(l,c){function f(m){return function(w){h[m]=w,0==--g&&l(h)}}var h=[],g=0;do{h.push(void 0),g++,i(a.value).od(f(h.length-1),c),a=u.next()}while(!a.done)})},t}),_e("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=p(a);for(var l;!(l=a.next()).done;)this.set((l=l.value)[0],l[1])}}function n(){}function i(a){var l=typeof a;return"object"===l&&null!==a||"function"===l}function r(a){if(!zt(a,s)){var l=new n;Eo(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return 2==c.get(a)&&3==c.get(l)&&(c.delete(a),c.set(l,4),!c.has(a)&&4==c.get(l))}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!zt(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&zt(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&zt(a,s)&&zt(a[s],this.g)},t.prototype.delete=function(a){return!!(i(a)&&zt(a,s)&&zt(a[s],this.g))&&delete a[s][this.g]},t}),_e("Map",function(e){function t(){var u={};return u.lb=u.next=u.head=u}function n(u,a){var l=u.g;return Wc(function(){if(l){for(;l.head!=u.g;)l=l.lb;for(;l.next!=l.head;)return{done:!1,value:a(l=l.next)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;"object"==l||"function"==l?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u.h[l];if(c&&zt(u.h,l))for(u=0;u<c.length;u++){var f=c[u];if(a!=a&&f.key!=f.key||a===f.key)return{id:l,list:c,index:u,entry:f}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this.h={},this.g=t(),this.size=0,u){u=p(u);for(var a;!(a=u.next()).done;)this.set((a=a.value)[0],a[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var u=Object.seal({x:4}),a=new e(p([[u,"s"]]));if("s"!=a.get(u)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var l=a.entries(),c=l.next();return!c.done&&c.value[0]==u&&"s"==c.value[1]&&!((c=l.next()).done||4!=c.value[0].x||"t"!=c.value[1]||!l.next().done)}catch{return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){var l=i(this,u=0===u?0:u);return l.list||(l.list=this.h[l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this.g,lb:this.g.lb,head:this.g,key:u,value:a},l.list.push(l.entry),this.g.lb.next=l.entry,this.g.lb=l.entry,this.size++),this},r.prototype.delete=function(u){return!(!(u=i(this,u)).entry||!u.list||(u.list.splice(u.index,1),u.list.length||delete this.h[u.id],u.entry.lb.next=u.entry.next,u.entry.next.lb=u.entry.lb,u.entry.head=null,this.size--,0))},r.prototype.clear=function(){this.h={},this.g=this.g.lb=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var c,l=this.entries();!(c=l.next()).done;)u.call(a,(c=c.value)[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r}),_e("Set",function(e){function t(n){if(this.g=new Map,n){n=p(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var n=Object.seal({x:4}),i=new e(p([n]));if(!i.has(n)||1!=i.size||i.add(n)!=i||1!=i.size||i.add({x:4})!=i||2!=i.size)return!1;var r=i.entries(),o=r.next();return!o.done&&o.value[0]==n&&o.value[1]==n&&!(o=r.next()).done&&o.value[0]!=n&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n=0===n?0:n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.keys=t.prototype.values=function(){return this.g.values()},t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)}),_e("Array.prototype.findIndex",function(e){return e||function(t,n){return $c(this,t,n).Of}}),_e("Object.is",function(e){return e||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}}),_e("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(0>(n=n||0)&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}}),_e("String.prototype.includes",function(e){return e||function(t,n){return-1!==ju(this,t,"includes").indexOf(t,n||0)}}),_e("Array.prototype.find",function(e){return e||function(t,n){return $c(this,t,n).v}}),_e("String.prototype.startsWith",function(e){return e||function(t,n){var i=ju(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(0|n,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),_e("Array.prototype.keys",function(e){return e||function(){return _u(this,function(t){return t})}}),_e("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof o){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),_e("Array.prototype.values",function(e){return e||function(){return _u(this,function(t,n){return n})}});var qv="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)zt(i,r)&&(e[r]=i[r])}return e};_e("Object.assign",function(e){return e||qv}),_e("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),_e("Array.prototype.entries",function(e){return e||function(){return _u(this,function(t,n){return[t,n]})}}),_e("String.prototype.repeat",function(e){return e||function(t){var n=ju(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)1&t&&(i+=n),(t>>>=1)&&(n+=n);return i}}),_e("Number.isNaN",function(e){return e||function(t){return"number"==typeof t&&isNaN(t)}}),_e("Number.isFinite",function(e){return e||function(t){return"number"==typeof t&&!isNaN(t)&&t!==1/0&&t!==-1/0}}),_e("Object.values",function(e){return e||function(t){var i,n=[];for(i in t)zt(t,i)&&n.push(t[i]);return n}}),_e("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),_e("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),_e("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||0===t)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),_e("Object.entries",function(e){return e||function(t){var i,n=[];for(i in t)zt(t,i)&&n.push([i,t[i]]);return n}});var Hv=this||self;function U(e,t){e=e.split(".");var i,n=Hv;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(;e.length&&(i=e.shift());)e.length||void 0===t?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=t}function Ti(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function Io(e){return e.h/(1-Math.pow(e.g,e.i))}function wr(){this.h=new Ti(2),this.j=new Ti(5),this.g=0,this.i=128e3,this.l=16e3}function Kv(){}function Ln(){}function ce(){}function zn(e){var t=Ut.apply(1,arguments);Jc.has(e)||(Jc.add(e),ce.apply(Kv,q(t)))}function Xv(){}Ti.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},wr.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},wr.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},wr.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Io(this.h),Io(this.j))};var Jc=new Set;function qe(e){if(Ou.has(e))return Ou.get(e);var t=MediaSource.isTypeSupported(e);return Ou.set(e,t),t}function xi(){return!!P.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}P.console&&(ce=function(){return console.warn.apply(console,q(Ut.apply(0,arguments)))},Ln=function(){console.error.apply(console,q(Ut.apply(0,arguments)))}),U("shaka.config.CodecSwitchingStrategy",{ri:"reload",pg:"smooth"});var Ou=new Map;function Mo(){}function Uu(){}function Tr(){}function Pn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Bu(e)==Bu(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Q(e);t=Q(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Bu(e){return e instanceof ArrayBuffer?e:e.buffer}function Bt(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Q(e,t,n){return Qc(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function ct(e,t,n){return Qc(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Qc(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Bu(e),t,Math.min(t+Math.max(n,0),r)-t)}function Co(){}function Yt(e){this.h=new Uu,(e=Si[e.toLowerCase()])&&(this.h=e()),this.g=new Mo,(e=Ei)&&(this.g=e())}Mo.prototype.extract=function(){},Mo.prototype.decode=function(){return[]},Mo.prototype.clear=function(){},Uu.prototype.init=function(){},Uu.prototype.parse=function(){return[]},U("shaka.util.BufferUtils",Tr),Tr.toDataView=ct,Tr.toUint8=Q,Tr.toArrayBuffer=Bt,Tr.equal=Pn,Co.prototype.init=function(){},Co.prototype.j=function(){},Co.prototype.i=function(){},U("shaka.media.IClosedCaptionParser",Co),Yt.prototype.init=function(e){this.h.init(e)},Yt.prototype.j=function(e){for(var t=(e=p(e=this.h.parse(e))).next();!t.done;t=e.next()){var n=Q((t=t.value).packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},Yt.prototype.i=function(){this.g.clear()},U("shaka.media.ClosedCaptionParser",Yt),Yt.findDecoder=function(){return Ei},Yt.unregisterDecoder=function(){Ei=null},Yt.registerDecoder=function(e){Ei=e},Yt.findParser=function(e){return Si[e]},Yt.unregisterParser=function(e){delete Si[e]},Yt.registerParser=function(e,t){Si[e]=t};var Si={},Ei=null;function Zc(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function $t(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function xr(e,t,n){if(n||(n=Zc),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=p(e)).next();!r.done;i={Yd:i.Yd},r=e.next()){if(i.Yd=r.value,-1==(r=t.findIndex(function(o){return function(s){return n(o.Yd,s)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Fu(e,t,n){if(n||(n=Zc),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Te(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ai,this.position=null,this.positionAlign=ko,this.size=0,this.textAlign=dn,this.direction=Er,this.writingMode=Ar,this.lineInterpretation=Do,this.line=null,this.lineHeight="",this.lineAlign=Yn,this.displayAlign=Sr,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=of,this.fontStyle=Hu,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Cg:32,rows:15}}function ef(e,t){return(e=new Te(e,t,"")).lineBreak=!0,e}function bu(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!Fu(e.nestedCues,t.nestedCues,bu))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Fu(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}Te.prototype.clone=function(){var t,e=new Te(0,0,"");for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e},U("shaka.text.Cue",Te),Te.equal=bu,Te.prototype.clone=Te.prototype.clone;var ko="auto";Te.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:ko};var dn="center",Vu={LEFT:"left",RIGHT:"right",CENTER:dn,START:"start",END:"end"};Te.textAlign=Vu;var Sr="after",tf={BEFORE:"before",CENTER:"center",AFTER:Sr};Te.displayAlign=tf;var Er="ltr";Te.direction={HORIZONTAL_LEFT_TO_RIGHT:Er,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ar="horizontal-tb";Te.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ar,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Do=0;Te.lineInterpretation={LINE_NUMBER:Do,PERCENTAGE:1};var Yn="start",qu={CENTER:"center",START:Yn,END:"end"};Te.lineAlign=qu;var nf={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Te.defaultTextColor=nf;var rf={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Te.defaultTextBackgroundColor=rf;var of=400;Te.fontWeight={NORMAL:of,BOLD:700};var Hu="normal",sf={NORMAL:Hu,ITALIC:"italic",OBLIQUE:"oblique"};function Ai(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=rn,this.scroll=uf}Te.fontStyle=sf,Te.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},U("shaka.text.CueRegion",Ai);var rn=1;Ai.units={PX:0,PERCENTAGE:rn,LINES:2};var uf="";function jn(){}function pn(e,t,n){Ku[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,Rd:t}}function $n(e,t){for(var n=e.toLowerCase().split(";")[0],i=p([af,Gu,Xu,_n]),r=i.next();!r.done;r=i.next())if(r=Ku[n+"-"+r.value]){var o=r.Rd(),s=o.isSupported(e,t);if(o.destroy(),s)return r.Rd}return null}Ai.scrollMode={NONE:uf,UP:"up"},jn.prototype.destroy=function(){},U("shaka.transmuxer.TransmuxerEngine",jn),jn.findTransmuxer=$n,jn.unregisterTransmuxer=function(e,t){delete Ku[e.toLowerCase().split(";")[0]+"-"+t]},jn.registerTransmuxer=pn,jn.prototype.destroy=jn.prototype.destroy;var Ku={},_n=1,Xu=2,Gu=3,af=4;jn.PluginPriority={FALLBACK:_n,PREFERRED_SECONDARY:Xu,PREFERRED:Gu,APPLICATION:af};var Gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Ze(e){var t;e instanceof Ze?(Ro(this,e.Wa),this.Pb=e.Pb,this.Ya=e.Ya,Wu(this,e.fc),this.ya=e.ya,No(this,e.g.clone()),this.zb=e.zb):e&&(t=String(e).match(Gv))?(Ro(this,t[1]||"",!0),this.Pb=Ir(t[2]||""),this.Ya=Ir(t[3]||"",!0),Wu(this,t[4]),this.ya=Ir(t[5]||"",!0),No(this,t[6]||"",!0),this.zb=Ir(t[7]||"")):this.g=new Ii(null)}function Ro(e,t,n){e.Wa=n?Ir(t,!0):t,e.Wa&&(e.Wa=e.Wa.replace(/:$/,""))}function Wu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.fc=t}else e.fc=null}function No(e,t,n){t instanceof Ii?e.g=t:(n||(t=Mr(t,$v)),e.g=new Ii(t))}function Ir(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Wv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(d=Ze.prototype).Wa="",d.Pb="",d.Ya="",d.fc=null,d.ya="",d.zb="",d.toString=function(){var e=[],t=this.Wa;if(t&&e.push(Mr(t,lf,!0),":"),t=this.Ya){e.push("//");var n=this.Pb;n&&e.push(Mr(n,lf,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.fc)&&e.push(":",String(t))}return(t=this.ya)&&(this.Ya&&"/"!=t.charAt(0)&&e.push("/"),e.push(Mr(t,"/"==t.charAt(0)?Yv:zv,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.zb)&&e.push("#",Mr(t,Jv)),e.join("")},d.resolve=function(e){var t=this.clone();"data"===t.Wa&&(t=new Ze);var n=!!e.Wa;n?Ro(t,e.Wa):n=!!e.Pb,n?t.Pb=e.Pb:n=!!e.Ya,n?t.Ya=e.Ya:n=null!=e.fc;var i=e.ya;if(n)Wu(t,e.fc);else if(n=!!e.ya){if("/"!=i.charAt(0))if(this.Ya&&!this.ya)i="/"+i;else{var r=t.ya.lastIndexOf("/");-1!=r&&(i=t.ya.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];"."==u?r&&s==i.length&&o.push(""):".."==u?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.ya=i:n=""!==e.g.toString(),n?No(t,e.g.clone()):n=!!e.zb,n&&(t.zb=e.zb),t},d.clone=function(){return new Ze(this)};var lf=/[#\/\?@]/g,zv=/[#\?:]/g,Yv=/[#\?]/g,$v=/[#\?@]/g,Jv=/#/g;function Ii(e){this.g=e||null}function zu(e){if(!e.sa&&(e.sa={},e.Gc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),r=r||"",e.add(o,decodeURIComponent(r.replace(/\+/g," ")))}}function E(e,t,n){var i=Ut.apply(3,arguments);if(this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code,Qv)try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}(d=Ii.prototype).sa=null,d.Gc=null,d.add=function(e,t){zu(this),this.g=null;var n=this.sa.hasOwnProperty(e)?this.sa[e]:null;return n||(this.sa[e]=n=[]),n.push(t),this.Gc++,this},d.set=function(e,t){return zu(this),this.g=null,this.sa.hasOwnProperty(e)?this.sa[e]=[t]:this.add(e,t),this},d.toString=function(){if(this.g)return this.g;if(!this.sa)return"";var t,e=[];for(t in this.sa)for(var n=encodeURIComponent(t),i=this.sa[t],r=0;r<i.length;r++){var o=n;""!==i[r]&&(o+="="+encodeURIComponent(i[r])),e.push(o)}return this.g=e.join("&")},d.clone=function(){var e=new Ii;if(e.g=this.g,this.sa){var n,t={};for(n in this.sa)t[n]=this.sa[n].concat();e.sa=t,e.Gc=this.Gc}return e},E.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},U("shaka.util.Error",E);var Qv=!0;function Yu(e,t){return e.concat(t)}function cf(){}function On(e){return null!=e}function st(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length)return e=new Ze(e[0]),t=new Ze(t[0]),[e.resolve(t).toString()];var n=t.map(function(i){return new Ze(i)});return e.map(function(i){var r=new Ze(i);return n.map(function(o){return r.resolve(o).toString()})}).reduce(Yu,[])}function Un(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Mi(e,t){if(1==t.length)return t[0];if(null!=(e=Et(e,t)))return e;throw new E(2,4,4025,t)}function Et(e,t){for(var n=p(Zv[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=p(t),o=r.next();!o.done;o=r.next())if(i.test((o=o.value).trim()))return o.trim()}return e==le?"":null}E.Severity={RECOVERABLE:1,CRITICAL:2},E.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},E.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};var le="text",ze={ka:"video",T:"audio",ea:le,zc:"image",Th:"application"},Zv={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function $u(){}function Ft(e,t){var n=e;return t&&!ki.includes(e)&&(n+='; codecs="'+t+'"'),n}function Cr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ci(e,t,n){var i=Ft(e,t);return $n(t=Cr(e,t))?(e=$n(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?i.replace("video","audio"):i,n}function bt(e){var t=sn(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Jn(e){return e.split(";")[0]}function on(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function sn(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}U("shaka.util.MimeUtils",$u),$u.getFullTypeWithAllCodecs=Cr,$u.getFullType=Ft,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var ki=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function gn(e){this.i=null,this.j=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.A="",this.o=new Map}function Lo(e){return!!Ge[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!Ei}function ff(e,t,n){if(e.A=t,t=e.o.get(t))for(var i=p(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(o){return o.endTime<=n}))&&e.j.append(r)}function hf(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=p(t.nestedCues)).next();!i.done;i=t.next())hf(e,i.value,n)}gn.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},gn.prototype.remove=function(e,t){var n=this;return C(function(i){if(1==i.g)return y(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),F(i)})},U("shaka.text.TextEngine",gn),gn.prototype.destroy=gn.prototype.destroy,gn.findParser=function(e){return Ge[e]},gn.unregisterParser=function(e){delete Ge[e]},gn.registerParser=function(e,t){Ge[e]=t};var Ge={};function Vt(){}function Po(e,t){return e=pe(e),t=pe(t),e.split("-")[0]==t.split("-")[0]}function kr(e,t){return e=pe(e),t=pe(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function Ju(e,t){return e=pe(e),t=pe(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function pe(e){var t=e.split("-x-"),n=t[0].split("-");return e=n[0]||"",n=n[1]||"",t=t[1]?"x-"+t[1]:"",e=e.toLowerCase(),e=df.get(e)||e,((n=n.toUpperCase())?e+"-"+n:e)+(t?"-"+t:"")}function Qn(e,t){return e=pe(e),(t=pe(t))==e?4:kr(t,e)?3:Ju(t,e)?2:kr(e,t)?1:0}function Qu(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),df.get(e)||e}function Zu(e){return e.language?pe(e.language):e.audio&&e.audio.language?pe(e.audio.language):e.video&&e.video.language?pe(e.video.language):"und"}function jo(e,t){e=pe(e);var n=new Set,i=p(t);for(t=i.next();!t.done;t=i.next())n.add(pe(t.value));for(t=(i=p(n)).next();!t.done;t=i.next())if((t=t.value)==e)return t;for(t=(i=p(n)).next();!t.done;t=i.next())if(kr(t=t.value,e))return t;for(t=(i=p(n)).next();!t.done;t=i.next())if(Ju(t=t.value,e))return t;for(t=(n=p(n)).next();!t.done;t=n.next())if(kr(e,t=t.value))return t;return null}U("shaka.util.LanguageUtils",Vt),Vt.findClosestLocale=jo,Vt.getLocaleForVariant=Zu,Vt.getLocaleForText=function(e){return pe(e.language||"und")},Vt.getBase=Qu,Vt.relatedness=Qn,Vt.areSiblings=function(e,t){var n=Qu(e),i=Qu(t);return e!=n&&t!=i&&n==i},Vt.normalize=pe,Vt.isSiblingOf=Ju,Vt.isParentOf=kr,Vt.areLanguageCompatible=Po,Vt.areLocaleCompatible=function(e,t){return(e=pe(e))==pe(t)};var df=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function _o(){this.g={}}function Dr(e){this.h=e,this.g=null}function ie(e){this.h=e,this.g=null}function Jt(){return!(!P.MediaSource||!MediaSource.isTypeSupported)}function Di(e){return""!=pf().canPlayType(e)}function ea(){return!!navigator.userAgent.match(/Edge?\//)}function Rr(){return Oe("Xbox One")}function Zn(){return Oe("Tizen")}function Oo(){return Oe("Tizen 3")}function Uo(){return Oe("Tizen 2")}function ta(){return Oe("Web0S")&&Oe("Chrome/38.0.2125.122 Safari/537.36")}function Bo(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Zn()&&!Oe("PC=EOS")&&!Oe("VirginMedia")&&!Oe("SOPOpenBrowser")&&!Ri()&&!Oe("AFT")}function Ri(){return Oe("PlayStation 4")}function na(){if(!Bo())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Oe(e){return(navigator.userAgent||"").includes(e)}function pf(){return Ni||(ia||(ia=new ie(function(){Ni=null})),(Ni=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ni=document.createElement("video")),ia.U(1),Ni)}(d=_o.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},d.get=function(e){return(e=this.g[e])?e.slice():null},d.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),0==this.g[e].length&&delete this.g[e])},d.forEach=function(e){for(var t in this.g)e(t,this.g[t])},d.size=function(){return Object.keys(this.g).length},d.keys=function(){return Object.keys(this.g)},Dr.prototype.U=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){P.clearTimeout(i),n=!1},i=P.setTimeout(function(){n&&t.h()},1e3*e),this},Dr.prototype.stop=function(){this.g&&(this.g(),this.g=null)},ie.prototype.kc=function(){return this.stop(),this.h(),this},ie.prototype.U=function(e){var t=this;return this.stop(),this.g=new Dr(function(){t.h()}).U(e),this},ie.prototype.La=function(e){var t=this;return this.stop(),this.g=new Dr(function(){t.g.U(e),t.h()}).U(e),this},ie.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},U("shaka.util.Timer",ie),ie.prototype.stop=ie.prototype.stop,ie.prototype.tickEvery=ie.prototype.La,ie.prototype.tickAfter=ie.prototype.U,ie.prototype.tickNow=ie.prototype.kc;var ia=null,Ni=null;function gf(){}function mf(e,t,n,i,r){var o=e.variants;if((t.length||n.length)&&(o=function i0(e,t,n){for(var i={},r=(t=p(t)).next();!r.done;i={ce:i.ce},r=t.next())if(i.ce=r.value,r=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.ce)}}(i)),r.length){e=r;break}for(i={},t=(n=p(n)).next();!t.done;i={Xd:i.Xd},t=n.next())if(i.Xd=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Xd)}}(i)),t.length){e=t;break}return e}(o,t,n)),r.length){for(t=new _o,o=(n=p(o)).next();!o.done;o=n.next())o=o.value,t.push(String(o.video.width||0),o);var s=[];t.forEach(function(g,m){g=0;for(var w=[],v={},T=(m=p(m)).next();!T.done;v={yc:v.yc},T=m.next())v.yc=T.value,(T=r.filter(function(x){return function(S){return x.yc.decodingInfos[0][S]}}(v)).length)>g?(g=T,w=[v.yc]):T==g&&w.push(v.yc);s.push.apply(s,q(w))}),o=s}for(i&&(o=If(o,i)),t=new Set,i=new Set,o=(n=p(o)).next();!o.done;o=n.next())(o=o.value).audio&&t.add(o.audio),o.video&&i.add(o.video);t=Array.from(t).sort(function(g,m){return g.bandwidth-m.bandwidth}),o=new Map;for(var u=(t=p(t)).next();!u.done;u=t.next())u=(n=u.value).language+(n.channelsCount||0)+n.roles.join(",")+n.label,o.has(u)?o.get(u).bandwidth>n.bandwidth&&o.set(u,n):o.set(u,n);for(o=[].concat(q(o.values())),n=Array.from(i).sort(function(g,m){return g.bandwidth&&m.bandwidth?g.bandwidth-m.bandwidth:g.width-m.width}),i=xi(),t=[],u=(n=p(n)).next();!u.done;u=n.next())if(u=u.value,t.length){var a=t[t.length-1];if(!i){var l=bt(a.codecs),c=bt(u.codecs);if(l!==c)continue}(u.width>a.width||u.height>a.height||u.width==a.width&&u.height==a.height&&(l=bt(a.codecs))==(c=bt(u.codecs))&&u.bandwidth<a.bandwidth)&&t.push(u)}else t.push(u);var f=o.map(function(g){return g.id}),h=t.map(function(g){return g.id});e.variants=e.variants.filter(function(g){var m=g.audio;return g=g.video,!(m&&!f.includes(m.id)||g&&!h.includes(g.id))})}function Fo(e,t,n){function i(o,s,u){return o>=s&&o<=u}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function vf(e,t){return C(function(n){if(1==n.g)return y(n,Tf(e.variants,t,!1,[]),2);e.variants=e.variants.filter(function(i){var r=i.video;if(r){var o=Vo(r.codecs);if(r.codecs.includes(",")){var s=r.codecs.split(",");o=Vo(o=Mi("video",s)),s=bo(s=Mi("audio",s));var u=Ci(r.mimeType,s,"audio");if(!qe(u))return!1;o=[o,s].join()}if(!qe(s=Ci(r.mimeType,o,"video")))return!1;r.codecs=o}if(o=i.audio){if(s=bo(o.codecs),!qe(u=Ci(o.mimeType,s,"audio")))return!1;o.codecs=s}return Rr()&&r&&(r.width&&1920<r.width||r.height&&1080<r.height)&&(r.codecs.includes("avc1.")||r.codecs.includes("avc3."))?(Cf(i),!1):((r=i.decodingInfos.some(function(a){return a.supported}))||Cf(i),r)}),F(n)})}function yf(e){var t=[];for(n in e)t.push(n);t.sort();for(var n=[],i=(t=p(t)).next();!i.done;i=t.next()){var r=i.value;i=JSON.stringify(r),(r=e[r])instanceof Object?(r=yf(r),n.push(i+":"+r)):(r=JSON.stringify(r),n.push(i+":"+r))}return"{"+n.join(",")+"}"}function wf(e,t){var n,i,r;return C(function(o){switch(o.g){case 1:if(n=yf(t),ee(o,2),(i=l0)[n]){e.decodingInfos.push(i[n]),o.B(4);break}return y(o,navigator.mediaCapabilities.decodingInfo(t),5);case 5:i[n]=r=o.h,e.decodingInfos.push(r);case 4:ue(o,0);break;case 2:te(o),JSON.stringify(t),F(o)}})}function Tf(e,t,n,i){var o,s,u,a,l,c,f,h,g,m,v,T,x,S;return C(function(I){switch(I.g){case 1:if(e.some(function(M){return M.decodingInfos.length}))return I.return();o={},s=p(i),u=s.next();case 2:if(u.done){I.B(4);break}o.Zd=u.value,a=!1,l=p(e),c=l.next();case 5:if(c.done){I.B(7);break}h=xf(f=c.value,t,n).filter((M=o,function(k){return(k.keySystemConfiguration&&k.keySystemConfiguration.keySystem)===M.Zd})),g=p(h),m=g.next();case 8:if(m.done){I.B(10);break}return y(I,wf(f,m.value),9);case 9:m=g.next(),I.B(8);break;case 10:f.decodingInfos.length&&(a=!0),c=l.next(),I.B(5);break;case 7:if(a)return I.return();o={Zd:o.Zd},u=s.next(),I.B(2);break;case 4:v=p(e),c=v.next();case 12:if(c.done){I.B(0);break}x=xf(T=c.value,t,n).filter(function(M){return!(M=M.keySystemConfiguration&&M.keySystemConfiguration.keySystem)||!i.includes(M)}),S=p(x),m=S.next();case 15:if(m.done){c=v.next(),I.B(12);break}return y(I,wf(T,m.value),16);case 16:m=S.next(),I.B(15)}var M})}function xf(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var o=r.codecs;if(r.codecs.includes(",")){var s=r.codecs.split(",");o=Vo(o=Mi("video",s)),s=bo(s=Mi("audio",s)),s=Ci(r.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(o=Vo(o),o=Ci(r.mimeType,o,"video"),n.video={contentType:o,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(o=bo(i.codecs),o=Ci(i.mimeType,o,"audio"),n.audio={contentType:o,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],o=new Map;for(var u=(s=p(s)).next();!u.done;u=s.next()){var a=u.value;o.get(a.keySystem)||o.set(a.keySystem,[]),o.get(a.keySystem).push(a)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var l=(a=p(o.keys())).next();!l.done;l=a.next()){var c=l.value;l=Object.assign({},n);var f=o.get(c);for(c={keySystem:c,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},u=(f=p(f)).next();!u.done;u=f.next()){if((u=u.value).initData&&u.initData.length){for(var h=new Set,g=p(u.initData),m=g.next();!m.done;m=g.next())h.add(m.value.initDataType);c.initDataType=u.initData[0].initDataType}u.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),u.persistentStateRequired&&(c.persistentState="required"),u.sessionType&&(c.sessionTypes=[u.sessionType]),i&&(""!=u.audioRobustness?c.audio?c.audio.robustness=c.audio.robustness||u.audioRobustness:c.audio={robustness:u.audioRobustness}:c.audio||(c.audio={})),r&&(""!=u.videoRobustness?c.video?c.video.robustness=c.video.robustness||u.videoRobustness:c.video={robustness:u.videoRobustness}:c.video||(c.video={}))}l.keySystemConfiguration=c,e.push(l)}return e}function bo(e){return"fLaC"===e?"flac":"Opus"===e?"opus":Zn()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Vo(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Li(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var f=p(t.roles),h=f.next();!h.done;h=f.next())c.add(h.value);if(n)for(h=(f=p(n.roles)).next();!h.done;h=f.next())c.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function qo(e){return{id:e.id,active:!1,type:le,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function ra(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function oa(e){return e.__shaka_id||(e.__shaka_id=c0++),e.__shaka_id}function Sf(e){var t=Ef(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function sa(e){var t=Ef(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Ef(e){var t=e.language;return{id:oa(e),active:!1,type:"",bandwidth:0,language:pe(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Ho(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Af(e){return e.filter(function(t){return Ho(t)})}function If(e,t){for(var n=e.filter(function(u){return u.audio&&u.audio.channelsCount}),i=new Map,r=[],o=(n=p(n)).next();!o.done;o=n.next()){var s=(o=o.value).audio.channelsCount;i.has(s)||i.set(s,[]),i.get(s).push(o),s<=t&&r.push(o)}return r.length?r:0==(t=Array.from(i.keys())).length?e:i.get(Math.min.apply(Math,q(t)))}function Nr(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=jo(pe(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return pe(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if((e=Mf(r,n)).length)return e}else if((e=r.filter(function(a){return 0==a.roles.length})).length)return e;return(e=r.map(function(a){return a.roles}).reduce(Yu,[])).length?Mf(r,e[0]):r}function Mf(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Cf(e){var t=[];return e.audio&&t.push(kf(e.audio)),e.video&&t.push(kf(e.video)),t.join(", ")}function kf(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}U("shaka.util.StreamUtils",gf),gf.meetsRestrictions=Fo;var l0={},c0=0,Ko=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),f0=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ne(){var e=this;this.m=null,this.o=!1,this.i=new wr,this.u=null,navigator.connection&&navigator.connection.addEventListener&&(this.u=function(){if(e.o&&e.g.useNetworkInformation){e.i=new wr,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.u)),this.l=[],this.A=1,this.F=!1,this.h=this.j=this.g=this.s=null,this.C=new ie(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}})}function ua(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function aa(e,t,n,i){return e&&(t=t.filter(function(r){return Fo(r,e,{width:i,height:n})})),t.sort(function(r,o){return r.bandwidth-o.bandwidth})}(d=Ne.prototype).stop=function(){this.m=null,this.o=!1,this.l=[],this.A=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop()},d.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.u),this.u=null),this.C=null},d.init=function(e){this.m=e},d.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:P.devicePixelRatio;e=P.screen.height*n,t=P.screen.width*n}if(this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:P.devicePixelRatio,e=Math.min(e,this.j.clientHeight*n),t=Math.min(t,this.j.clientWidth*n)),n=aa(this.g.restrictions,this.l,1/0,1/0),e!=1/0||t!=1/0){n=function h0(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}(n);for(var i=(n=p(n)).next();!i.done;i=n.next())if((i=i.value).height>=e&&i.width>=t){e=i.height,t=i.width;break}n=aa(this.g.restrictions,this.l,e,t)}for(e=this.i.getBandwidthEstimate(ua(this)),this.l.length&&!n.length&&(n=[(n=aa(null,this.l,1/0,1/0))[0]]),t=n[0]||null,i=0;i<n.length;i++){for(var r=n[i],o=isNaN(this.A)?1:Math.abs(this.A),s=o*r.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=i+1;a<n.length;a++)if(r.bandwidth!=n[a].bandwidth){u=n[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,e>=s&&e<=o&&t.bandwidth!=r.bandwidth&&(t=r)}return this.s=Date.now(),t},d.enable=function(){this.o=!0},d.disable=function(){this.o=!1},d.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.F){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.F=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(ua(this)),e&&this.m(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch)}},d.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(ua(this))},d.setVariants=function(e){this.l=e},d.playbackRateChanged=function(e){this.A=e},d.setMediaElement=function(e){var t=this;this.j=e,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in P&&(this.h=new ResizeObserver(function(){t.C.U(d0)}),this.h.observe(this.j))},d.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},U("shaka.abr.SimpleAbrManager",Ne),Ne.prototype.configure=Ne.prototype.configure,Ne.prototype.setMediaElement=Ne.prototype.setMediaElement,Ne.prototype.playbackRateChanged=Ne.prototype.playbackRateChanged,Ne.prototype.setVariants=Ne.prototype.setVariants,Ne.prototype.getBandwidthEstimate=Ne.prototype.getBandwidthEstimate,Ne.prototype.segmentDownloaded=Ne.prototype.segmentDownloaded,Ne.prototype.disable=Ne.prototype.disable,Ne.prototype.enable=Ne.prototype.enable,Ne.prototype.chooseVariant=Ne.prototype.chooseVariant,Ne.prototype.init=Ne.prototype.init,Ne.prototype.release=Ne.prototype.release,Ne.prototype.stop=Ne.prototype.stop;var d0=1;function la(e,t){this.g=e,this.h=t}function Bn(e,t){var n=new la(5,0),r=Df.g;(0<(n.g-r.g||n.h-r.h)?Df.i:Df.h)(Df.g,n,e,t)}function p0(e,t,n,i){ce([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function g0(e,t,n,i){Ln([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}la.prototype.toString=function(){return"v"+this.g+"."+this.h};var Df=null;function Xo(e,t){for(this.h=e,this.g=new Set([e]),t=(e=p(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function Rf(e,t,n){var i;if(n=void 0===n||n,!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)){var r=t.audio;i=!(!((!(i=e.audio).channelsCount||!r.channelsCount||2<i.channelsCount||2<r.channelsCount)&&i.channelsCount!=r.channelsCount||n&&!Nf(i,r))&&Lf(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=e.video&&t.video)&&(e=e.video,t=t.video,i=!((!n||Nf(e,t))&&Lf(e.roles,t.roles))),!i}function Nf(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return sn(i)[0]}),t=t.codecs.split(",").map(function(i){return sn(i)[0]}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Lf(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=p(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Pf(e){var t=void 0===t?"reload":t;this.h=e,this.g=t,this.i=new Pi(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","",t)}function Pi(e,t,n,i,r,o){this.l=e,this.m=t,this.g=n,this.h=i,this.i=void 0===r?"":r,this.j=void 0===o?"reload":o}function T0(){this.g=Go,this.h=(new Map).set(Go,2).set(ji,1)}function jf(e,t,n){e.h.set(Go,n).set(ji,t)}U("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Xo.prototype.add=function(e,t){return!!Rf(this.h,e,void 0===(t=void 0===t||t)||t)&&(this.g.add(e),!0)},Xo.prototype.values=function(){return this.g.values()},Pf.prototype.create=function(e){var t=this,n="smooth"==this.g&&xi(),i=e.filter(function(r){return Rf(t.h,r,!n)});return i.length?new Xo(i[0],i):this.i.create(e)},Pi.prototype.create=function(e){var t=[];t=function m0(e,t){var n=jo(t=pe(t),e.map(function(i){return Zu(i)}));return n?e.filter(function(i){return n==Zu(i)}):[]}(e,this.l);var n=e.filter(function(r){return r.primary});e=function v0(e,t){return e.filter(function(n){return!!n.audio&&(t?n.audio.roles.includes(t):0==n.audio.roles.length)})}(t=t.length?t:n.length?n:e,this.m),e.length&&(t=e),this.h&&(e=function w0(e,t){return"AUTO"==t&&(t=P.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}(t,this.h),e.length&&(t=e)),this.g&&(e=If(t,this.g)).length&&(t=e),this.i&&(e=function y0(e,t){return e.filter(function(n){return!(!n.audio||!n.audio.label)&&n.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.i),e.length&&(t=e)),e="smooth"==this.j&&xi(),n=new Xo(t[0]);for(var i=(t=p(t)).next();!i.done;i=t.next())n.add(i.value,!e);return n};var ji=0,Go=1;function _f(e,t){var n_baseDelay=1e3,n_backoffFactor=2,n_fuzzFactor=.5;this.l=null==e.maxAttempts?2:e.maxAttempts,this.j=null==e.baseDelay?n_baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n_fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n_backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Of(e){var t,n;return C(function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new E(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),y(i,new Promise(function(r){new ie(r).U(n/1e3)}),2))}e.h*=e.m,F(i)})}function Se(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}function Re(e,t){this.promise=e,this.i=t,this.g=!1}function ei(e){return new Re(Promise.reject(e),function(){return Promise.resolve()})}function ca(){var e=Promise.reject(new E(2,7,7001));return e.catch(function(){}),new Re(e,function(){return Promise.resolve()})}function _i(e){return new Re(Promise.resolve(e),function(){return Promise.resolve()})}function an(e){return new Re(e,function(){return e.catch(function(){})})}function Uf(e){return new Re(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}function K(e,t){if(t)if(t instanceof Map)for(var n=p(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=P.performance&&P.performance.now?P.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Bf(e){var n,t=new K(e.type);for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Se.prototype.resolve=function(){},Se.prototype.reject=function(){},Re.prototype.abort=function(){return this.g=!0,this.i()},Re.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Re.prototype.ga=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=function x0(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new Se,s=new E(2,7,7001);return this.promise.then(n(!0),n(!1)),new Re(o,function(){return i()})},U("shaka.util.AbortableOperation",Re),Re.prototype.chain=Re.prototype.ga,Re.prototype.finally=Re.prototype.finally,Re.all=Uf,Re.prototype.abort=Re.prototype.abort,Re.notAbortable=an,Re.completed=_i,Re.aborted=ca,Re.failed=ei,K.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},K.prototype.stopImmediatePropagation=function(){this.g=!0},K.prototype.stopPropagation=function(){},U("shaka.util.FakeEvent",K);var Wo={Vh:"abrstatuschanged",Wh:"adaptation",Xh:"buffering",Yh:"downloadfailed",Zh:"downloadheadersreceived",$h:"drmsessionupdate",bi:"emsg",pi:"prft",Error:"error",ci:"expirationupdated",di:"gapjumped",fi:"keystatuschanged",hi:"loaded",ii:"loading",ki:"manifestparsed",li:"manifestupdated",mi:"mediaqualitychanged",Metadata:"metadata",ni:"onstatechange",oi:"onstateidle",si:"ratechange",ti:"segmentappended",ui:"sessiondata",vi:"stalldetected",wi:"statechanged",xi:"streaming",yi:"textchanged",zi:"texttrackvisibility",Ai:"timelineregionadded",Bi:"timelineregionenter",Ci:"timelineregionexit",Di:"trackschanged",Fi:"unloading",Hi:"variantchanged"};function he(){this.ca=new _o,this.Ed=this}function Oi(e){var n=new Set;return function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer&&i.buffer.constructor==ArrayBuffer)return i;if(n.has(i))return null;var r=i.constructor==Array;if(i.constructor!=Object&&!r)return null;n.add(i);var s,o=r?[]:{};for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}(e)}function Ff(e){var n,t={};for(n in e)t[n]=e[n];return t}function Lr(){this.g=[]}function Ui(e,t){e.g.push(t.finally(function(){$t(e.g,t)}))}function Ee(e,t,n,i){he.call(this),this.i=!1,this.m=new Lr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.u=i||null,this.o=!1}function mn(e,t,n,i){n=n||qf;var r=Yo[e];(!r||n>=r.priority)&&(Yo[e]={priority:n,Rd:t,yh:void 0!==i&&i})}function Ye(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function bf(e,t,n,i,r,o,s){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var u=new Ze(n.uris[r]),a=u.Wa,l=!1;a||(Ro(u,a=(a=location.protocol).slice(0,-1)),n.uris[r]=u.toString()),a=a.toLowerCase();var c=(a=Yo[a])?a.Rd:null;if(!c)return ei(new E(2,1,1e3,u));var v,f=a.yh,h=null,g=null,m=!1,w=!1;return an(Of(i)).ga(function(){if(e.i)return ca();v=Date.now();var T=c(n.uris[r],n,t,function(A,I,M){h&&h.stop(),g&&g.U(S/1e3),e.l&&t==ln&&(e.l(A,I),l=!0,s.g=M)},function(A){e.j&&e.j(A,n,t),w=!0});if(!f)return T;var x=n.retryParameters.connectionTimeout;x&&(h=new ie(function(){m=!0,T.abort()})).U(x/1e3);var S=n.retryParameters.stallTimeout;return S&&(g=new ie(function(){m=!0,T.abort()})),T}).ga(function(T){h&&h.stop(),g&&g.stop(),null==T.timeMs&&(T.timeMs=Date.now()-v);var x={response:T,ih:l};return!w&&e.j&&e.j(T.headers,n,t),x},function(T){if(h&&h.stop(),g&&g.stop(),e.s){var x=null,S=0;T instanceof E&&(x=T,1001==T.code&&(S=T.data[1])),e.s(n,x,S,m)}if(e.i)return ca();if(m&&(T=new E(1,1,1003,n.uris[r],t)),T instanceof E){if(7001==T.code)throw T;if(1010==T.code)throw o;if(1==T.severity)return x=new K("retry",x=(new Map).set("error",T)),e.dispatchEvent(x),bf(e,t,n,i,r=(r+1)%n.uris.length,T,s)}throw T})}function Vf(){this.g=0}function zo(e,t,n){Re.call(this,e,t),this.h=n}he.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},he.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},he.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),n=(t=p(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Ed,e.currentTarget=this.Ed;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},he.prototype.release=function(){this.ca=null},Lr.prototype.destroy=function(){for(var e=[],t=p(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},Qe(Ee,he),(d=Ee.prototype).kf=function(e){this.o=e},d.zh=function(e){this.g.add(e)},d.Ph=function(e){this.g.delete(e)},d.zg=function(){this.g.clear()},d.Ah=function(e){this.h.add(e)},d.Qh=function(e){this.h.delete(e)},d.Ag=function(){this.h.clear()},d.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),he.prototype.release.call(this),this.m.destroy()},d.request=function(e,t,n){var i=this,r=new Vf;if(this.i){var o=Promise.reject(new E(2,7,7001));return o.catch(function(){}),new zo(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Oi(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Oi(t.uris),o=function S0(e,t,n,i){function r(u){o=o.ga(function(){return n.body&&(n.body=Bt(n.body)),u(t,n,i)})}var o=_i(void 0);e.u&&r(e.u);for(var s=(e=p(e.g)).next();!s.done;s=e.next())r(s.value);return o.ga(void 0,function(u){throw u instanceof E&&7001==u.code?u:new E(2,1,1006,u)})}(this,e,t,n);var s=o.ga(function(){return bf(i,e,t,new _f(t.retryParameters,!1),0,null,r)}),u=s.ga(function(h){return function E0(e,t,n,i){for(var r=_i(void 0),o={},s=(e=p(e.h)).next();!s.done;o={ae:o.ae},s=e.next())o.ae=s.value,r=r.ga(function(u){return function(){var a=n.response;return a.data&&(a.data=Bt(a.data)),u.ae(t,a,i)}}(o));return r.ga(function(){return n},function(u){var a=2;if(u instanceof E){if(7001==u.code)throw u;a=u.severity}throw new E(a,1,1007,u)})}(i,e,h,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var f=u.ga(function(h){var g=Date.now()-c,m=h.response;return m.timeMs+=l,m.timeMs+=g,h.ih||!i.l||m.fromCache||"HEAD"==t.method||e!=ln||i.l(m.timeMs,m.data.byteLength),m},function(h){throw h&&(h.severity=2),h});return o=new zo(f.promise,function(){return f.abort()},r),Ui(this.m,o),o},U("shaka.net.NetworkingEngine",Ee),Ee.prototype.request=Ee.prototype.request,Ee.prototype.destroy=Ee.prototype.destroy,Ee.makeRequest=Ye,Ee.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Ee.prototype.clearAllResponseFilters=Ee.prototype.Ag,Ee.prototype.unregisterResponseFilter=Ee.prototype.Qh,Ee.prototype.registerResponseFilter=Ee.prototype.Ah,Ee.prototype.clearAllRequestFilters=Ee.prototype.zg,Ee.prototype.unregisterRequestFilter=Ee.prototype.Ph,Ee.prototype.registerRequestFilter=Ee.prototype.zh,Ee.unregisterScheme=function(e){delete Yo[e]},Ee.registerScheme=mn,Ee.prototype.setForceHTTPS=Ee.prototype.kf,Ee.NumBytesRemainingClass=Vf,Qe(zo,Re),Ee.PendingRequest=zo;var ln=1;Ee.RequestType={MANIFEST:0,SEGMENT:ln,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7},Ee.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var qf=3;Ee.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:qf};var Yo={};function ti(e){this.g=!1,this.h=new Se,this.i=e}function me(e,t){if(e.g)throw t instanceof E&&7003==t.code?t:new E(2,7,7003,t)}function Ie(){this.g=new _o}function Hf(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function A0(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),function I0(e){var t=Kf;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),e.addEventListener("test",i=function(){},n),e.removeEventListener("test",i,n)}catch{t=!1}Kf=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}ti.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(d=Ie.prototype).release=function(){this.vb(),this.g=null},d.D=function(e,t,n,i){this.g&&(e=new Hf(e,t,n,i),this.g.push(t,e))},d.ma=function(e,t,n,i){var o=this;this.D(e,t,function r(s){o.Ob(e,t,r),n(s)},i)},d.Ob=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=p(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.Ob(),this.g.remove(t,r))},d.vb=function(){if(this.g){var n,e=this.g,t=[];for(n in e.g)t.push.apply(t,q(e.g[n]));for(t=(e=p(t)).next();!t.done;t=e.next())t.value.Ob();this.g.g={}}},U("shaka.util.EventManager",Ie),Ie.prototype.removeAll=Ie.prototype.vb,Ie.prototype.unlisten=Ie.prototype.Ob,Ie.prototype.listenOnce=Ie.prototype.ma,Ie.prototype.listen=Ie.prototype.D,Ie.prototype.release=Ie.prototype.release,Hf.prototype.Ob=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Kf=void 0;function fa(e,t){for(var n=[],i=(e=p(e)).next();!i.done;i=e.next())n.push(t(i.value));return n}function Bi(e){this.h=e,this.g=void 0}function Pr(e){for(var t=new Map,n=p(Object.keys(e)),i=n.next();!i.done;i=n.next())t.set(i=i.value,e[i]);return t}function ha(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function C0(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=p(e)).next();!n.done;n=e.next()){var i=p(n.value);if(n=i.next().value,i=i.next().value,!t.has(n)||(n=t.get(n))!=i||null==n)return!1}return!0}function ni(){}function Le(e){if(!e)return"";if(239==(e=Q(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),P.TextDecoder&&!Ri())return(e=(new TextDecoder).decode(e)).includes("\ufffd")&&Ln('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(128&e[n]?e.length>=n+2&&192==(224&e[n])&&128==(192&e[n+1])?(i=(31&e[n])<<6|63&e[n+1],n+=1):e.length>=n+3&&224==(240&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])?(i=(15&e[n])<<12|(63&e[n+1])<<6|63&e[n+2],n+=2):e.length>=n+4&&240==(241&e[n])&&128==(192&e[n+1])&&128==(192&e[n+2])&&128==(192&e[n+3])&&(i=(7&e[n])<<18|(63&e[n+1])<<12|(63&e[n+2])<<6|63&e[n+3],n+=3):i=e[n],65535>=i)t+=String.fromCharCode(i);else{var r=1023&(i-=65536);t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function vn(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new E(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=ct(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return pa.value()(i)}function Fn(e){function t(i){return n.byteLength<=i||32<=n[i]&&126>=n[i]}if(!e)return"";var n=Q(e);if(239==n[0]&&187==n[1]&&191==n[2])return Le(n);if(254==n[0]&&255==n[1])return vn(n.subarray(2),!1);if(255==n[0]&&254==n[1])return vn(n.subarray(2),!0);if(0==n[0]&&0==n[2])return vn(e,!1);if(0==n[1]&&0==n[3])return vn(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Le(e);throw new E(2,2,2003)}function yn(e){if(P.TextEncoder&&!Ri()){var t=new TextEncoder;return Bt(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Bt(t)}function da(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}Bi.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},U("shaka.util.StringUtils",ni),ni.resetFromCharCode=function(){pa.g=void 0},ni.toUTF16=da,ni.toUTF8=yn,ni.fromBytesAutoDetect=Fn,ni.fromUTF16=vn,ni.fromUTF8=Le;var pa=new Bi(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch{return!1}}for(var t={qb:65536};0<t.qb;(t={qb:t.qb}).qb/=2)if(e(t.qb))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.qb)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.qb));return r}}(t);return null});function ve(e,t){this.h=ct(e),this.i=t==Xf,this.g=0}function wn(){return new E(2,3,3e3)}(d=ve.prototype).oa=function(){return this.g<this.h.byteLength},d.la=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.ua=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw wn()}},d.Ua=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw wn()}},d.L=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw wn()}},d.Yf=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw wn()}},d.hc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw wn()}if(2097151<t)throw new E(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},d.mb=function(e){if(this.g+e>this.h.byteLength)throw wn();var t=Q(this.h,this.g,e);return this.g+=e,t},d.skip=function(e){if(this.g+e>this.h.byteLength)throw wn();this.g+=e},d.Gh=function(e){if(this.g<e)throw wn();this.g-=e},d.seek=function(e){if(0>e||e>this.h.byteLength)throw wn();this.g=e},d.Yc=function(){for(var e=this.g;this.oa()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Q(this.h,e,this.g-e),this.g+=1,Le(e)},U("shaka.util.DataViewReader",ve),ve.prototype.readTerminatedString=ve.prototype.Yc,ve.prototype.seek=ve.prototype.seek,ve.prototype.rewind=ve.prototype.Gh,ve.prototype.skip=ve.prototype.skip,ve.prototype.readBytes=ve.prototype.mb,ve.prototype.readUint64=ve.prototype.hc,ve.prototype.readInt32=ve.prototype.Yf,ve.prototype.readUint32=ve.prototype.L,ve.prototype.readUint16=ve.prototype.Ua,ve.prototype.readUint8=ve.prototype.ua,ve.prototype.getLength=ve.prototype.getLength,ve.prototype.getPosition=ve.prototype.la,ve.prototype.hasMoreData=ve.prototype.oa;var Xf=1;function xe(){this.i=[],this.h=[],this.g=!1}function de(e){for(var t=jr(e);e.reader.oa()&&!e.parser.g;)e.parser.Wc(e.start+t,e.reader,e.partialOkay)}function Fi(e){for(var t=jr(e),n=e.reader.L(),i=0;i<n&&(e.parser.Wc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function $o(e){var t=jr(e);for(e.reader.skip(78);e.reader.oa()&&!e.parser.g;)e.parser.Wc(e.start+t,e.reader,e.partialOkay)}function bi(e){return function(t){e(t.reader.mb(t.reader.getLength()-t.reader.la()))}}function Gf(e){for(var t=0,n=(e=p(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Jo(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function jr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ve.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Xf},(d=xe.prototype).box=function(e,t){return e=Gf(e),this.i[e]=k0,this.h[e]=t,this},d.O=function(e,t){return e=Gf(e),this.i[e]=Wf,this.h[e]=t,this},d.stop=function(){this.g=!0},d.parse=function(e,t,n){for(e=new ve(e,0),this.g=!1;e.oa()&&!this.g;)this.Wc(0,e,t,n)},d.Wc=function(e,t,n,i){var r=t.la();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.L(),s=t.L(),u=Jo(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.la()+8>t.getLength())return void(this.g=!0);o=t.hc(),a=!0}var l=this.h[s];if(l){var c=null,f=null;if(this.i[s]==Wf){if(i&&t.la()+4>t.getLength())return void(this.g=!0);c=(f=t.L())>>>24,f&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(i=s-t.la(),l({name:u,parser:this,partialOkay:n||!1,version:c,flags:f,reader:t=new ve(t=0<i?t.mb(i):new Uint8Array(0),0),size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.la(),t.getLength()-t.la()))}},U("shaka.util.Mp4Parser",xe),xe.headerSize=jr,xe.typeToString=Jo,xe.allData=bi,xe.visualSampleEntry=$o,xe.sampleDescription=Fi,xe.children=de,xe.prototype.parseNext=xe.prototype.Wc,xe.prototype.parse=xe.prototype.parse,xe.prototype.stop=xe.prototype.stop,xe.prototype.fullBox=xe.prototype.O,xe.prototype.box=xe.prototype.box;var k0=0,Wf=1;function ii(){}function zf(e){return e=Q(e),e=pa.value()(e),btoa(e)}function ri(e,t){return t=t??!0,e=zf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function qt(e){e=P.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function oi(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=P.parseInt(e.substr(2*i,2),16);return n}function Vi(e){var t=Q(e);e="";for(var n=(t=p(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Ve(){for(var e=Ut.apply(0,arguments),t=0,n=p(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=p(e)).next();!i.done;i=e.next())t.set(Q(i=i.value),n),n+=i.byteLength;return t}function Yf(e){var t=this;this.g=[],this.h=[],this.data=[],(new xe).box("moov",de).box("moof",de).O("pssh",function(n){if(!(1<n.version)){var i=Q(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(Vi(n.reader.mb(16))),0<n.version){i=n.reader.L();for(var r=0;r<i;r++){var o=Vi(n.reader.mb(16));t.h.push(o)}}}}).parse(e)}function Qo(e,t,n,i){var r=e.length,o=t.length+16+r;0<i&&(o+=4+16*n.size);var s=new Uint8Array(o),u=ct(s),a=0;if(u.setUint32(a,o),u.setUint32(a+=4,1886614376),u.setUint32(a+=4,1>i?0:16777216),s.set(t,a+=4),a+=t.length,0<i)for(u.setUint32(a,n.size),a+=4,n=(t=p(n)).next();!n.done;n=t.next())n=oi(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function Tn(e,t){return 1!=(e=Me(e,t)).length?null:e[0]}function xn(e,t,n){return 1!=(e=$f(e,t,n)).length?null:e[0]}function Me(e,t){for(var n=[],i=(e=p(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.tagName==t&&n.push(i);return n}function $f(e,t,n){for(var i=[],r=(e=p(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function si(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Sn(e,t,n){for(var i=(t=p(t)).next();!i.done;i=t.next())if(e.hasAttributeNS(i=i.value,n))return e.getAttributeNS(i,n);return null}function Zo(e){return Array.from(e.childNodes).every(ga)?e.textContent.trim():null}function ga(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function oe(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),r??i}function Jf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function En(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function es(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t&&(e=Number(t[1]),isFinite(e))?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null}function Qf(e){return(e=Number(e))%1==0?e:null}function An(e){return(e=Number(e))%1==0&&0<e?e:null}function ut(e){return(e=Number(e))%1==0&&0<=e?e:null}function _r(e){return e=Number(e),isNaN(e)?null:e}function Zf(e){return!!e&&"true"===e.toLowerCase()}function R0(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function qi(e,t){var n=new DOMParser,i=N0.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function ma(e,t){try{return qi(Fn(e),t)}catch{return null}}U("shaka.util.Uint8ArrayUtils",ii),ii.concat=Ve,ii.toHex=Vi,ii.fromHex=oi,ii.fromBase64=qt,ii.toBase64=ri,ii.toStandardBase64=zf;var N0=new Bi(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function ts(e,t){var n=this;t=void 0===t?1:t,this.C=e,this.G=new Set,this.m=this.s=null,this.ja=this.ba=!1,this.H=0,this.g=null,this.A=new Ie,this.i=new Map,this.u=new Map,this.l=new Se,this.h=null,this.o=function(i){2==i.severity&&n.l.reject(i),e.onError(i)},this.V=new Map,this.ca=new Map,this.W=new ie(function(){return function V0(e){var t=e.V,n=e.ca;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),(t=Array.from(n.values())).length&&t.every(function(i){return"expired"==i})&&e.o(new E(2,6,6014)),e.C.Pd(ha(n))}(n)}),this.M=!1,this.K=[],this.N=!1,this.da=new ie(function(){!function K0(e){e.i.forEach(function(t,n){var i=t.Xe,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Xe=r)})}(n)}).La(t),this.l.catch(function(){}),this.j=new ti(function(){return function L0(e){return C(function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.l.reject(),e.da.stop(),e.da=null,e.W.stop(),e.W=null,y(t,ch(e),2);case 2:if(!e.m){t.B(3);break}return ee(t,4),y(t,e.m.setMediaKeys(null),6);case 6:ue(t,5);break;case 4:te(t);case 5:e.m=null;case 3:e.g=null,e.G.clear(),e.s=null,e.u=new Map,e.h=null,e.o=function(){},e.C=null,e.Z=!1,e.F=null,F(t)}})}(n)}),this.Z=!1,this.I=this.F=null}function eh(e,t,n){e.u=new Map;for(var i=(n=p(n)).next();!i.done;i=n.next())e.u.set(i.value,{initData:null,initDataType:null});for(i=(n=p(e.h.persistentSessionsMetadata)).next();!i.done;i=n.next())e.u.set((i=i.value).sessionId,{initData:i.initData,initDataType:i.initDataType});return e.M=0<e.u.size,th(e,t)}function th(e,t){var n,i,r,o,s,u,a,l,f,h,g,w,x;return C(function(S){if(1==S.g){if(n=function F0(e){if(0==(e=Pr(e.h.clearKeys)).size)return null;var t=[],n=[];e.forEach(function(r,o){var s=o;22!=s.length&&(s=ri(oi(o),!1)),22!=(o=r).length&&(o=ri(oi(r),!1)),t.push(r={kty:"oct",kid:s,k:o}),n.push(r.kid)}),e=JSON.stringify({keys:t});var i=JSON.stringify({kids:n});return i=[{initData:Q(yn(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+P.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(n)}}(e))for(i=p(t),r=i.next();!r.done;r=i.next())(o=r.value).video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for((s=t.some(function(A){return!!(A.video&&A.video.drmInfos.length||A.audio&&A.audio.drmInfos.length)}))||(u=Pr(e.h.servers),function G0(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),t=(e=p(e)).next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,u)),a=new Set,l=p(t),r=l.next();!r.done;r=l.next())for(f=hh(r.value),h=p(f),g=h.next();!g.done;g=h.next())a.add(g.value);for(w=p(a),g=w.next();!g.done;g=w.next())W0(g.value,Pr(e.h.servers),Pr(e.h.advanced||{}),e.h.keySystemsMapping);return y(S,Tf(t,e.M,e.Z,e.h.preferredKeySystems),2)}return s||Object.keys(e.h.servers).length?(x=sh(e,void 0,t),S.return(s?x:x.catch(function(){}))):(e.ba=!0,S.return(Promise.resolve()))})}function nh(e){var t;return C(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.F){n.B(2);break}return y(n,e.F,3);case 3:return me(e.j),n.return();case 2:return ee(n,4),e.F=e.m.setMediaKeys(e.s),y(n,e.F,6);case 6:ue(n,5);break;case 4:t=te(n),e.o(new E(2,6,6003,t.message));case 5:me(e.j),F(n)}})}function va(e){var t;return C(function(s){switch(s.g){case 1:if(!e.s||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.B(2);break}return t=Ye([e.g.serverCertificateUri],e.h.retryParameters),ee(s,3),y(s,e.C.Kb.request(5,t).promise,5);case 5:e.g.serverCertificate=Q(s.h.data),ue(s,4);break;case 3:throw new E(2,6,6017,te(s));case 4:if(e.j.g)return s.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(ee(s,6),y(s,e.s.setServerCertificate(e.g.serverCertificate),8)):s.return();case 8:ue(s,0);break;case 6:throw new E(2,6,6004,te(s).message)}})}function ih(e){var n,i,r,o;return C(function(s){if(1==s.g)return e.u.size?(e.u.forEach(function(u,a){ah(e,a,u)}),y(s,e.l,3)):s.B(2);if(2!=s.g){if(0<(e.g&&e.g.keyIds||new Set([])).size&&function X0(e){for(var t=p(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.V.get(n.value))return!1;return!0}(e))return s.return(e.l);e.l=new Se,e.l.catch(function(){})}for(i=p(n=(e.g?e.g.initData:[])||[]),r=i.next();!r.done;r=i.next())Or(e,(o=r.value).initDataType,o.initData);return n.length||e.l.resolve(),s.return(e.l)})}function Or(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=p(i)).next();!r.done;r=i.next())if(Pn(n,r.value.initData)&&!Uo())return;0<e.i.size&&xa(e)&&(e.l.resolve(),e.l=new Se,e.l.catch(function(){})),function b0(e,t,n,i){try{var r=e.s.createSession(i)}catch(o){return void e.o(new E(2,6,6005,o.message))}e.A.D(r,"message",function(o){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.K.push(o):wa(e,o)}),e.A.D(r,"keystatuseschange",function(o){return lh(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Xe:1/0,bb:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(o){return t=o,o instanceof E||(t=new E(2,6,6016,o)),void e.o(t)}e.h.logLicenseExchange&&ri(n),r.generateRequest(t,n).catch(function(o){if(!e.j.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.o(new E(2,6,6006,o.message,o,u))}})}(e,t,n,e.g.sessionType)}}function rh(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function oh(e){return e=fa(e=e.i.keys(),function(t){return t.sessionId}),Array.from(e)}function sh(e,t,n){var i,r,o,s,a,l,c,h,m,v,T;return C(function(x){switch(x.g){case 1:if(i=new Map,n.length){r=function U0(e,t,n){for(var i=p(t),r=i.next();!r.done;r=i.next()){var o=p(hh(r.value));for(r=o.next();!r.done;r=o.next())n.has((r=r.value).keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new E(2,6,6e3);for(i={},r=(e=p(e.h.preferredKeySystems)).next();!r.done;i={$d:i.$d},r=e.next())for(i.$d=r.value,r=(o=p(t)).next();!r.done;r=o.next())if(r=r.value.decodingInfos.find(function(l){return function(c){return c.supported&&null!=c.keySystemAccess&&c.keySystemAccess.keySystem==l.$d}}(i)))return r.keySystemAccess;for(r=(e=p([!0,!1])).next();!r.done;r=e.next())for(i=r.value,r=(o=p(t)).next();!r.done;r=o.next()){var s=p(r.value.decodingInfos);for(r=s.next();!r.done;r=s.next()){var u=r.value;if(u.supported&&u.keySystemAccess){var a=p(r=n.get(u.keySystemAccess.keySystem));for(r=a.next();!r.done;r=a.next())if(!!r.value.licenseServerUri==i)return u.keySystemAccess}}}return null}(e,n,i),x.B(2);break}return y(x,function B0(e,t){var n,i,r,o,s,u,a,l,c,f,h,g,m,w,v;return C(function(T){switch(T.g){case 1:if(1==t.size&&t.has(""))throw new E(2,6,6e3);for(i=p(t.values()),r=i.next();!r.done;r=i.next())0==(o=r.value).audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;s=p(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){T.B(4);break}if(!t.has(a=u.value)){T.B(3);break}return l=t.get(a),ee(T,6),y(T,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return T.return(n=T.h);case 6:te(T);case 7:me(e.j);case 3:u=s.next(),T.B(2);break;case 4:c=p([!0,!1]),f=c.next();case 9:if(f.done){T.B(11);break}h=f.value,g=p(t.keys()),u=g.next();case 12:if(u.done){f=c.next(),T.B(9);break}if(w=t.get(m=u.value),v=w.drmInfos.some(function(x){return!!x.licenseServerUri}),v!=h){T.B(13);break}return ee(T,15),y(T,navigator.requestMediaKeySystemAccess(m,[w]),17);case 17:return T.return(n=T.h);case 15:te(T);case 16:me(e.j);case 13:u=g.next(),T.B(12);break;case 11:return T.return(n)}})}(e,t),3);case 3:r=x.h;case 2:if(!(o=r))throw new E(2,6,6001);for(me(e.j),ee(x,4),e.G.clear(),s=o.getConfiguration(),a=s.videoCapabilities||[],l=p(s.audioCapabilities||[]),c=l.next();!c.done;c=l.next())e.G.add(c.value.contentType.toLowerCase());for(h=p(a),c=h.next();!c.done;c=h.next())e.G.add(c.value.contentType.toLowerCase());if(n.length){var S=o.keySystem,A=i.get(o.keySystem),I=[],M=[],k=[],R=[],D=new Set;for(dh(A,I,k,M,R,D),S={keySystem:S,licenseServerUri:I[0],distinctiveIdentifierRequired:A[0].distinctiveIdentifierRequired,persistentStateRequired:A[0].persistentStateRequired,sessionType:A[0].sessionType||(e.M?"persistent-license":"temporary"),audioRobustness:A[0].audioRobustness||"",videoRobustness:A[0].videoRobustness||"",serverCertificate:k[0],serverCertificateUri:M[0],initData:R,keyIds:D},I=(A=p(A)).next();!I.done;I=A.next())(I=I.value).distinctiveIdentifierRequired&&(S.distinctiveIdentifierRequired=I.distinctiveIdentifierRequired),I.persistentStateRequired&&(S.persistentStateRequired=I.persistentStateRequired);A=S}else A=o.keySystem,dh((S=t.get(o.keySystem)).drmInfos,I=[],k=[],M=[],R=[],D=new Set),A={keySystem:A,licenseServerUri:I[0],distinctiveIdentifierRequired:"required"==S.distinctiveIdentifier,persistentStateRequired:"required"==S.persistentState,sessionType:S.sessionTypes[0]||"temporary",audioRobustness:(S.audioCapabilities?S.audioCapabilities[0].robustness:"")||"",videoRobustness:(S.videoCapabilities?S.videoCapabilities[0].robustness:"")||"",serverCertificate:k[0],serverCertificateUri:M[0],initData:R,keyIds:D};if(e.g=A,!e.g.licenseServerUri)throw new E(2,6,6012,e.g.keySystem);return y(x,o.createMediaKeys(),6);case 6:if(m=x.h,me(e.j),e.s=m,""==e.h.minHdcpVersion||!("getStatusForPolicy"in e.s)){x.B(7);break}return ee(x,8),y(x,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=x.h)throw new E(2,6,6018);me(e.j),ue(x,7,4);break;case 8:throw(v=te(x,4))instanceof E?v:new E(2,6,6019,v.message);case 7:return e.ba=!0,y(x,va(e),11);case 11:me(e.j),ue(x,0);break;case 4:throw T=te(x),me(e.j,T),e.g=null,e.G.clear(),T instanceof E?T:new E(2,6,6002,T.message)}})}function ya(e){xa(e)&&e.l.resolve()}function uh(e,t){new ie(function(){t.loaded=!0,ya(e)}).U(Y0)}function ah(e,t,n){var i,r,o,s,a;return C(function(c){switch(c.g){case 1:try{i=e.s.createSession("persistent-license")}catch(f){return r=new E(2,6,6005,f.message),e.o(r),c.return(Promise.reject(r))}return e.A.D(i,"message",function(f){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.K.push(f):wa(e,f)}),e.A.D(i,"keystatuseschange",function(f){return lh(e,f)}),e.i.set(i,o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Xe:1/0,bb:null,type:"persistent-license"}),ee(c,2),y(c,i.load(t),4);case 4:return s=c.h,me(e.j),s||(e.i.delete(i),e.o(new E(e.h.persistentSessionOnlinePlayback?1:2,6,6013)),o.loaded=!0),uh(e,o),ya(e),c.return(i);case 2:a=te(c),me(e.j,a),e.i.delete(i),e.o(new E(e.h.persistentSessionOnlinePlayback?1:2,6,6005,a.message)),o.loaded=!0,ya(e);case 3:return c.return(Promise.resolve())}})}function wa(e,t){var n,i,r,o,s,u,a,c,f,h,g,m;C(function(w){switch(w.g){case 1:if(n=t.target,e.h.logLicenseExchange&&ri(t.message),i=e.i.get(n),r=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&o&&o.individualizationServer&&(r=o.individualizationServer),(s=Ye([r],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),rh(e.g.keySystem)){var v=vn(s.body,!0,!0);if(v.includes("PlayReadyKeyMessage")){for(var T=p((v=qi(v,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),x=T.next();!x.done;x=T.next())s.headers[(x=x.value).getElementsByTagName("name")[0].textContent]=x.getElementsByTagName("value")[0].textContent;s.body=qt(v.getElementsByTagName("Challenge")[0].textContent)}else s.headers["Content-Type"]="text/xml; charset=utf-8"}return u=Date.now(),ee(w,2),y(w,e.C.Kb.request(2,s).promise,4);case 4:a=w.h,ue(w,3);break;case 2:return c=te(w),f=new E(2,6,6007,c),e.o(f),i&&i.bb&&i.bb.reject(f),w.return();case 3:return e.j.g?w.return():(e.H+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&ri(a.data),ee(w,5),y(w,n.update(a.data),7));case 7:ue(w,6);break;case 5:return h=te(w),g=new E(2,6,6008,h.message),e.o(g),i&&i.bb&&i.bb.reject(g),w.return();case 6:if(e.j.g)return w.return();m=new K("drmsessionupdate"),e.C.onEvent(m),i&&(i.bb&&i.bb.resolve(),uh(e,i)),F(w)}})}function lh(e,t){var n=e.i.get(t=t.target),i=!1;t.keyStatuses.forEach(function(o,s){if("string"==typeof s){var u=s;s=o,o=u}if(rh(e.g.keySystem)&&16==s.byteLength&&(ea()||Ri())){var a=(u=ct(s)).getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}"status-pending"!=o&&(n.loaded=!0),"expired"==o&&(i=!0),s=Vi(s).slice(0,32),e.V.set(s,o)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.bb&&(e.i.delete(t),t.close().catch(function(){})),xa(e)&&(e.l.resolve(),e.W.U($0))}function ch(e){var t;return C(function(n){return t=Array.from(e.i.entries()),e.i.clear(),y(n,Promise.all(t.map(function(i){var r=(i=p(i)).next().value,o=i.next().value;return C(function(s){return 1==s.g?(ee(s,2),e.ja||e.u.has(r.sessionId)||"persistent-license"!==o.type||e.h.persistentSessionOnlinePlayback?y(s,function H0(e){var t;return C(function(n){return 1==n.g?(t=new Promise(function(i,r){new ie(r).U(z0)}),ee(n,2),y(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?ue(n,0):(te(n),void F(n))})}(r),5):y(s,r.remove(),5)):2!=s.g?ue(s,0):(te(s),void F(s))})})),0)})}function fh(e,t){return!e.length||!t.length||e===t||0<Ta(e,t).length}function Ta(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=(e=p(e)).next();!i.done;i=e.next()){i=i.value;for(var r={},o=p(t),s=o.next();!s.done;r={Va:r.Va},s=o.next())if(i.keySystem==(s=s.value).keySystem){r.Va=[],r.Va=r.Va.concat(i.initData||[]),r.Va=r.Va.concat(s.initData||[]),r.Va=r.Va.filter(function(u){return function(a,l){return void 0===a.keyId||l===u.Va.findIndex(function(c){return c.keyId===a.keyId})}}(r)),o=i.keyIds&&s.keyIds?new Set([].concat(q(i.keyIds),q(s.keyIds))):i.keyIds||s.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||s.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||s.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||s.persistentStateRequired,videoRobustness:i.videoRobustness||s.videoRobustness,audioRobustness:i.audioRobustness||s.audioRobustness,serverCertificate:i.serverCertificate||s.serverCertificate,serverCertificateUri:i.serverCertificateUri||s.serverCertificateUri,initData:r.Va,keyIds:o});break}}return n}function hh(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function xa(e){return function M0(e,t){for(var n=(e=p(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(t){return t.loaded})}function dh(e,t,n,i,r,o){for(var s={},u=(e=p(e)).next();!u.done;s={va:s.va},u=e.next()){if(s.va=u.value,t.includes(s.va.licenseServerUri)||t.push(s.va.licenseServerUri),i.includes(s.va.serverCertificateUri)||i.push(s.va.serverCertificateUri),s.va.serverCertificate&&(n.some(function(c){return function(f){return Pn(f,c.va.serverCertificate)}}(s))||n.push(s.va.serverCertificate)),s.va.initData){u={};for(var a=p(s.va.initData),l=a.next();!l.done;u={gd:u.gd},l=a.next())u.gd=l.value,r.some(function(c){return function(f){var h=c.gd;return!(!f.keyId||f.keyId!=h.keyId)||f.initDataType==h.initDataType&&Pn(f.initData,h.initData)}}(u))||r.push(u.gd)}if(s.va.keyIds)for(a=(u=p(s.va.keyIds)).next();!a.done;a=u.next())o.add(a.value)}}function W0(e,t,n,i){var r=e.keySystem;r&&("org.w3.clearkey"!=r||!e.licenseServerUri)&&(t.size&&(t=t.get(r)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),P.cast&&P.cast.__platform__&&"com.microsoft.playready"==r&&(e.keySystem="com.chromecast.playready"))}(d=ts.prototype).destroy=function(){return this.j.destroy()},d.configure=function(e){this.h=e},d.Bc=function(e){var t=this;return C(function(n){if(1==n.g)return t.s?(t.m=e,t.A.ma(t.m,"play",function(){for(var i=p(t.K),r=i.next();!r.done;r=i.next())wa(t,r.value);t.N=!0,t.K=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return ch(t)}),t.I=t.g&&t.g.initData.find(function(i){return 0<i.initData.length})||null,t.I||"com.apple.fps"!==t.g.keySystem||t.u.size?y(n,nh(t),2):n.B(2)):(t.A.ma(e,"encrypted",function(){t.o(new E(2,6,6010))}),n.return());ih(t).catch(function(){}),t.I||t.u.size||t.h.parseInbandPsshEnabled||t.A.D(t.m,"encrypted",function(i){return function _0(e,t){return C(function(n){if(1==n.g)return y(n,nh(e),2);Or(e,t.initDataType,Q(t.initData)),F(n)})}(t,i)}),F(n)})},d.Be=function(){var e=this,t=this.i.keys();return t=fa(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},d.Mc=function(){for(var e=1/0,t=this.i.keys(),n=(t=p(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},d.ud=function(){return ha(this.ca)};var z0=1,Y0=5,$0=.5,ns=new Bi(function(){return Bt(new Uint8Array([0]))});function Ur(){}function ph(e,t,n,i){var r,o,s,u;return C(function(a){if(1==a.g)return i&&(r=At[i.toLowerCase()])?a.return(r):(o=Hi(e))&&(s=bn[o])?a.return(s):i?a.B(2):y(a,gh(e,t,n),3);if(2!=a.g&&(i=a.h)&&(u=At[i]))return a.return(u);throw new E(2,4,4e3,e)})}function gh(e,t,n){var i,o;return C(function(s){return 1==s.g?((i=Ye([e],n)).method="HEAD",y(s,t.request(0,i).promise,2)):s.return((o=s.h.headers["content-type"])?o.toLowerCase().split(";").shift():"")})}function Hi(e){return 1==(e=new Ze(e).ya.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}U("shaka.media.ManifestParser",Ur),Ur.unregisterParserByMime=function(e){delete At[e]},Ur.registerParserByMime=function(e,t){At[e]=t},Ur.registerParserByExtension=function(e,t){bn[e]=t},Ur.AccessibilityPurpose={Gi:"visually impaired",ei:"hard of hearing"};var At={},bn={};function Q0(e,t,n,i,r){var o=Z0.value(),s=e.subarray(n.start,n.start+n.size),u=ct(s),a=new Uint8Array(n.size+o.byteLength);for(a.set(s,0),(s=ct(a)).setUint32(4,r),a.set(o,n.size),r=u.getUint32(4),s.setUint32(n.size+16,r),mh(a,0,a.byteLength),r=new Uint8Array(e.byteLength+a.byteLength),n=Rr()?n.start:n.start+n.size,o=e.subarray(n),r.set(e.subarray(0,n)),r.set(a,n),r.set(o,n+a.byteLength),i=(e=p(i)).next();!i.done;i=e.next())mh(r,(i=i.value).start,i.size+a.byteLength);return a=ct(r,t.start),t=jr(t),e=a.getUint32(t),a.setUint32(t,e+1),r}function mh(e,t,n){0!=(t=(e=ct(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Z0=new Bi(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function It(e,t,n,i,r,o,s){this.Ca=e,this.Ka=t,this.pa=n,this.Qe=void 0===i?null:i,this.timescale=void 0===r?null:r,this.g=void 0===o?null:o,this.aes128Key=void 0===s?null:s}function J(e,t,n,i,r,o,s,u,a,l,c,f,h,g,m){l=void 0===l?[]:l,g=void 0===g?ui:g,this.startTime=e,this.j=this.endTime=t,this.C=n,this.Ka=i,this.pa=r,this.h=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.i=l,this.tilesLayout=void 0===c?"":c,this.A=void 0===f?null:f,this.g=void 0===h?null:h,this.status=g,this.m=!1,this.s=!0,this.o=!1,this.aes128Key=void 0===m?null:m,this.u=null,this.l=0}It.prototype.Oc=function(){return this.Ka},It.prototype.Lc=function(){return this.pa},U("shaka.media.InitSegmentReference",It),It.prototype.getEndByte=It.prototype.Lc,It.prototype.getStartByte=It.prototype.Oc,(d=J.prototype).Ca=function(){return this.C()},d.getStartTime=function(){return this.startTime},d.Mg=function(){return this.endTime},d.Oc=function(){return this.Ka},d.Lc=function(){return this.pa},d.dh=function(){return this.tilesLayout},d.bh=function(){return this.A},d.Fb=function(){return this.status},d.qh=function(){this.status=vh},d.Pe=function(){this.m=!0},d.nh=function(){return this.m},d.Tf=function(){this.s=!1},d.mh=function(){return this.s},d.Sf=function(){this.o=!0},d.jh=function(){return this.o},d.hg=function(e){this.u=e},d.$g=function(){return this.u},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=p(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},d.nf=function(e){null==this.g?Ln("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},U("shaka.media.SegmentReference",J),J.prototype.syncAgainst=J.prototype.nf,J.prototype.offset=J.prototype.offset,J.prototype.getThumbnailSprite=J.prototype.$g,J.prototype.setThumbnailSprite=J.prototype.hg,J.prototype.hasByterangeOptimization=J.prototype.jh,J.prototype.markAsByterangeOptimization=J.prototype.Sf,J.prototype.isIndependent=J.prototype.mh,J.prototype.markAsNonIndependent=J.prototype.Tf,J.prototype.isPreload=J.prototype.nh,J.prototype.markAsPreload=J.prototype.Pe,J.prototype.markAsUnavailable=J.prototype.qh,J.prototype.getStatus=J.prototype.Fb,J.prototype.getTileDuration=J.prototype.bh,J.prototype.getTilesLayout=J.prototype.dh,J.prototype.getEndByte=J.prototype.Lc,J.prototype.getStartByte=J.prototype.Oc,J.prototype.getEndTime=J.prototype.Mg,J.prototype.getStartTime=J.prototype.getStartTime,J.prototype.getUris=J.prototype.Ca;var ui=0,vh=1;function Sa(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ea(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function yh(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=(e=p(Vn(e))).next();!i.done;i=e.next()){var r=i.value;i=r.start,(r=r.end)>t&&(n+=r-Math.max(i,t))}return n}function Vn(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Aa(){}function wh(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Th(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Ia(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function ny(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=Le(Q(e.data,1,n));return e=Le(Q(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(i=Le(Q(e.data,1,n)),e=Le(Q(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(i=e.data.indexOf(0))?null:(i=Le(Q(e.data,0,i)),t.description=i,"com.apple.streaming.transportStreamTimestamp"==i?(i=e.data.subarray(i.length+1),e=1&i[3],i=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7],i/=45,e&&(i+=47721858.84),t.data=i):(e=Bt(e.data.subarray(i.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=Le(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Le(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Bt(e.data),t):null}function ai(e){for(var t=0,n=[];wh(e,t);){var i=Ia(e,t+6);for(e[t+5]>>6&1&&(t+=10),i=(t+=10)+i;t+10<i;){var r=e.subarray(t),o=Ia(r,4);(o=ny(r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)}))&&n.push(o),t+=r.size+10}Th(e,t)&&(t+=10)}return n}function Br(e,t){for(var n=t=void 0===t?0:t,i=0;wh(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Ia(e,t+6),Th(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}function xh(e,t){var n=null,i=null,r=null,o=e.L();return 1&t&&(r=e.hc()),2&t&&e.skip(4),8&t&&(n=e.L()),16&t&&(i=e.L()),{trackId:o,Hf:n,Fg:i,Ii:r}}function Ma(e,t){return 1==t?(t=e.L(),e=e.L(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.L()}}function is(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.L(),e.skip(4),e=e.Ua(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function Sh(e,t,n){var i=e.L(),r=[],o=null;1&n&&(o=e.L()),4&n&&e.skip(4);for(var s=0;s<i;s++){var u={gf:null,sampleSize:null,Sd:null};256&n&&(u.gf=e.L()),512&n&&(u.sampleSize=e.L()),1024&n&&e.skip(4),2048&n&&(u.Sd=0==t?e.L():e.Yf()),r.push(u)}return{Ni:i,$f:r,Eg:o}}function Eh(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.L();return e.skip(1==t?8:4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),{trackId:n,width:t=e.Ua()+e.Ua()/16,height:e=e.Ua()+e.Ua()/16}}function Ah(e,t){return e.skip(87),{aa:t+"."+this.g(e.ua())+this.g(e.ua())+this.g(e.ua())}}function Ih(e){return{aa:Jo(e=e.L())}}function In(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&3==e[i]&&0==e[i-1]&&0==e[i-2]||(t[n]=e[i],n++);this.j=Q(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Ca(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);0!==i&&(n.set(e.j.subarray(t,t+i)),e.h=new ve(n,0).L(),e.g=8*i,e.i-=i)}function ft(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Ca(e)}e.h<<=t,e.g-=t}function Z(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Ca(e),0<(n=t-n)?i<<n|Z(e,n):i}function ka(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Ca(e),t+ka(e)}function at(e){ft(e,1+ka(e))}function O(e){return Z(e,ka(e)+1)-1}function Ki(e){return 1&(e=O(e))?1+e>>>1:-1*(e>>>1)}function b(e){return 1===Z(e,1)}function ae(e){return Z(e,8)}function rs(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+(i=Ki(e))+256)%256),n=0===i?n:i}function ry(e){return ae(e),O(e),O(e)}function we(){this.s=null,this.u=!1,this.j=this.A=null,this.i=[],this.l=this.m=null,this.g=[],this.o=null,this.h=[]}function Da(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),Xf:e[4]<<8|e[5],pts:null,dts:null};if(t.Xf&&t.Xf>e.byteLength-6)return null;var n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),e.byteLength<=(n=e[8]+9)?null:(t.data=e.subarray(n),t)}function Ra(e){return!(0>Na(e))}function Na(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}J.Status={Uh:ui,Ei:vh,ji:2},U("shaka.util.Id3Utils",Aa),Aa.getID3Data=Br,Aa.getID3Frames=ai,U("shaka.util.ExpGolomb",In),(d=we.prototype).clearData=function(){this.i=[],this.g=[],this.h=[]},d.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Na(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71==e[r]){var o=!!(64&e[r+1]),s=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.s=(31&e[u+10])<<8|e[u+11];break;case 17:case 8191:break;case this.s:o&&(u+=e[u]+1),s={audio:-1,video:-1,Dd:-1,audioCodec:"",videoCodec:""};var a=u+3+((15&(o=e)[u+1])<<8|o[u+2])-4;for(u+=12+((15&o[u+10])<<8|o[u+11]);u<a;){var l=(31&o[u+1])<<8|o[u+2],c=(15&o[u+3])<<8|o[u+4];switch(o[u]){case 6:if(-1==s.audio&&0<c)for(var f=u+5,h=c;2<h;){switch(o[f]){case 106:s.audio=l,s.audioCodec="ac3";break;case 122:s.audio=l,s.audioCodec="ec3"}var g=o[f+1]+2;f+=g,h-=g}break;case 15:-1==s.audio&&(s.audio=l,s.audioCodec="aac");break;case 21:-1==s.Dd&&(s.Dd=l);break;case 27:-1==s.video&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:-1==s.audio&&(s.audio=l,s.audioCodec="mp3");break;case 36:-1==s.video&&(s.video=l,s.videoCodec="hvc");break;case 129:-1==s.audio&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:-1==s.audio&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}-1!=(o=s).video&&(this.A=o.video,this.j=o.videoCodec),-1!=o.audio&&(this.m=o.audio,this.l=o.audioCodec),-1!=o.Dd&&(this.o=o.Dd),i&&!this.u&&(i=!1,r=t-188),this.u=!0;break;case this.A:u=e.subarray(u,r+188),o?this.i.push(u):this.i.length&&(o=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Ve(o,u));break;case this.m:u=e.subarray(u,r+188),o?this.g.push(u):this.g.length&&(o=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Ve(o,u));break;case this.o:u=e.subarray(u,r+188),o?this.h.push(u):this.h.length&&(o=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Ve(o,u));break;default:i=!0}}return this},d.xh=function(e,t){return Bn("TsParser","Please use parseNalus function instead."),this.ec(e,t)},d.ec=function(e,t,n){var i=e.pts?e.pts/9e4:null,r=(e=e.data).byteLength,o=1;"hvc"==this.j&&(o=2);for(var c,s=0,u=[],a=-1,l=0,f=0;f<r;++f){var h=e[f];if(h){if(2<=s&&1==h&&n)return 0==(t=f-(3<s?3:s))||(n.data=Ve(n.data,e.subarray(0,t)),n.ha=Ve(n.ha,e.subarray(0,t))),[];if(2<=s&&1==h){if(0<=a?u.push({data:e.subarray(a+o,1+(s=f-((3<s?3:s)+1))),ha:e.subarray(a,s+1),type:l,time:i}):n&&0<(a=f-s)&&(n.data=Ve(n.data,e.subarray(0,a))),f>=r-o)return u;a=++f,l="hvc"==this.j?e[f]>>1&63:31&e[f]}s=0}else s++;f>=r-1&&0<=a&&0<=s&&(c={data:e.subarray(a+o,r),ha:e.subarray(a,r),type:l,time:i},t&&this.ec(t,null,c))}return c&&u.push(c),!u.length&&n&&(n.data=Ve(n.data,e),n.ha=Ve(n.ha,e)),u},d.getMetadata=function(){for(var e=[],t=p(this.h),n=t.next();!n.done;n=t.next())(n=Da(n.value))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:ai(n.data),dts:n.dts,pts:n.pts});return e},d.Ab=function(){for(var e=[],t=p(this.g),n=t.next();!n.done;n=t.next())(n=Da(n.value))&&e.push(n);return e},d.bc=function(){for(var e=[],t=p(this.i),n=t.next();!n.done;n=t.next()){var i=Da(n=n.value);i&&null!=i.pts&&null!=i.dts?e.push(i):e.length&&(n=i?i.data:n)&&((i=e.pop()).data=Ve(i.data,n),e.push(i))}return e},d.getStartTime=function(){for(var e=null,t=p(this.Ab()),n=t.next();!n.done;n=t.next()){var i=n.value;i&&null!=i.pts&&(i=Math.min(i.dts,i.pts)/9e4,null==e||e>i)&&(e=i)}for(t=null,n=(i=p(this.bc())).next();!n.done;n=i.next())(n=n.value)&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==t||t>n)&&(t=n);return{audio:e,video:t}},d.Kc=function(){return{audio:this.l,video:this.j}},d.yd=function(){for(var e=[],t=this.bc(),n=0;n<t.length;n++){var r=void 0;n+1<t.length&&(r=t[n+1]),e.push.apply(e,q(this.ec(t[n],r)))}return e},d.gh=function(){Bn("TsParser","Please use getVideoInfo function instead.");var e=this.Fe();return{height:e.height,width:e.width}},d.Fe=function(){return"hvc"==this.j?function sy(e){var t={height:null,width:null,aa:null};if(!(e=e.yd()).length||!(e=e.find(function(A){return 33==A.type})))return t;var n=new In(e.ha,!0);ae(n),ae(n),Z(n,4);var i=Z(n,3);b(n);var r=Z(n,2),o=Z(n,1),s=Z(n,5),u=Z(n,32);e=ae(n);for(var a=ae(n),l=ae(n),c=ae(n),f=ae(n),h=ae(n),g=ae(n),m=[],w=[],v=0;v<i;v++)m.push(b(n)),w.push(b(n));if(0<i)for(v=i;8>v;v++)Z(n,2);for(v=0;v<i;v++)m[v]&&Z(n,88),w[v]&&ae(n);O(n),3==(i=O(n))&&Z(n,1),m=O(n),w=O(n);var T=v=0,x=0,S=0;return b(n)&&(v+=O(n),T+=O(n),x+=O(n),S+=O(n)),t.width=String(m-(v+T)*(1===i||2===i?2:1)),t.height=String(w-(x+S)*(1===i?2:1)),n=function(A){for(var I=0,M=0;32>M;M++)I|=(A>>M&1)<<31-M;return I>>>0}(u),o=1==o?"H":"L",r="hvc1."+["","A","B","C"][r]+s,r+="."+n.toString(16).toUpperCase(),r+="."+o+g,h&&(r+="."+h.toString(16).toUpperCase()),f&&(r+="."+f.toString(16).toUpperCase()),c&&(r+="."+c.toString(16).toUpperCase()),l&&(r+="."+l.toString(16).toUpperCase()),a&&(r+="."+a.toString(16).toUpperCase()),e&&(r+="."+e.toString(16).toUpperCase()),t.aa=r,t}(this):function oy(e){var t={height:null,width:null,aa:null};if(!(e=e.yd()).length||!(e=e.find(function(h){return 7==h.type})))return t;var n=ae(e=new In(e.data)),i=ae(e),r=ae(e);if(at(e),uy.includes(n)){var o=O(e);if(3===o&&ft(e,1),at(e),at(e),ft(e,1),b(e)){o=3!==o?8:12;for(var s=0;s<o;s++)b(e)&&rs(e,6>s?16:64)}}if(at(e),0===(o=O(e)))O(e);else if(1===o)for(ft(e,1),at(e),at(e),o=O(e),s=0;s<o;s++)at(e);at(e),ft(e,1),o=O(e),s=O(e);var u=Z(e,1);0===u&&ft(e,1),ft(e,1);var a=0,l=0,c=0,f=0;return b(e)&&(a=O(e),l=O(e),c=O(e),f=O(e)),t.height=String((2-u)*(s+1)*16-2*c-2*f),t.width=String(16*(o+1)-2*a-2*l),t.aa="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2),t}(this)},U("shaka.util.TsParser",we),we.syncOffset=Na,we.probe=Ra,we.prototype.getVideoInfo=we.prototype.Fe,we.prototype.getVideoResolution=we.prototype.gh,we.prototype.getVideoNalus=we.prototype.yd,we.prototype.getCodecs=we.prototype.Kc,we.prototype.getStartTime=we.prototype.getStartTime,we.prototype.getVideoData=we.prototype.bc,we.prototype.getAudioData=we.prototype.Ab,we.prototype.getMetadata=we.prototype.getMetadata,we.prototype.parseNalus=we.prototype.ec,we.prototype.parseAvcNalus=we.prototype.xh,we.prototype.parse=we.prototype.parse,we.prototype.clearData=we.prototype.clearData,we.Timescale=9e4;var uy=[100,110,122,244,44,83,86,118,128,138,139,134];function Fr(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&ce("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else{if(!(typeof LcevcDil<"u")){ce("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,Bn("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}typeof this.h.SupportObject>"u"?(ce("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||ce(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Mh(e){e.g&&e.i.classList.add("shaka-hidden")}function Ch(e,t,n){var i=ay,r=dy;switch(t.mimeType){case"video/webm":i=ly;break;case"video/mp4":i=cy}switch(n){case"DASH":r=hy;break;case"HLS":r=fy}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(i),e.j||e.g.setStreamingFormat(r))}Fr.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},U("shaka.lcevc.Dec",Fr),Fr.prototype.release=Fr.prototype.release;var ay=0,ly=1,cy=2,fy=0,hy=1,dy=-1;function kh(e,t,n,i){var r=this;this.i=e,this.A=null,this.F=t,this.g={},this.G={},this.ba={},this.h=null,this.V=!1,this.da=n||function(){},this.M=i||null,this.j={},this.C=new Ie,this.o={},this.H=null,this.K=new Se,this.W="",this.ja=!1,this.l=Dh(this,this.K),this.u=!1,this.I=new ti(function(){return function py(e){var t,n,i,r,o,s,a;return C(function(l){if(1==l.g){for(n in t=[],e.j)for(r=(i=e.j[n])[0],e.j[n]=i.slice(0,1),r&&t.push(r.p.catch(cf)),o=p(i.slice(1)),s=o.next();!s.done;s=o.next())s.value.p.reject(new E(2,7,7003,void 0));for(a in e.h&&t.push(e.h.destroy()),e.F&&t.push(e.F.destroy()),e.o)t.push(e.o[a].destroy());return y(l,Promise.all(t),2)}e.C&&(e.C.release(),e.C=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.h=null,e.F=null,e.g={},e.o={},e.H=null,e.j={},e.M=null,F(l)})}(r)}),this.s=!1,this.N="UNKNOWN",this.Z=this.ca=!1,this.wa=new Se,this.m=!1}function Dh(e,t){var n=new MediaSource;return e.C.ma(n,"sourceopen",function(){URL.revokeObjectURL(e.W),t.resolve()}),e.C.ma(e.i,"playing",function(){e.ja=!0}),e.W=ja(n),e.i.src=e.W,n}function os(e,t,n,i){var r=Ft(n.mimeType,i);if(t==le)ss(e,r,e.s,n.external);else{var o=e.A.forceTransmux;(!qe(r)||!e.s&&ki.includes(r))&&(o=!0);var s=Cr(n.mimeType,i);if(o){if(o=Et("audio",(i||"").split(",")),i=Et("video",(i||"").split(",")),o&&i)return e.m=!0,os(e,"audio",n,o),void os(e,"video",n,i);(i=$n(s))&&(r=i(),e.o[t]=r,r=r.convertCodecs(t,s))}s=r+e.A.sourceBufferExtraFeatures,me(e.I);try{var u=e.l.addSourceBuffer(s)}catch(a){throw new E(2,3,3015,a,"The mediaSource_ status was"+e.l.readyState+"expected 'open'")}e.s&&(u.mode=Cy),e.C.D(u,"error",function(){e.j[t][0].p.reject(new E(2,3,3014,e.i.error?e.i.error.code:0))}),e.C.D(u,"updateend",function(){return Mn(e,t)}),e.g[t]=u,e.G[t]=r,e.ba[t]=!!n.drmInfos.length}}function ss(e,t,n,i){e.h||(e.h=new gn(e.F));var r=e.h;i=i||e.V,e=e.N,"application/cea-608"==t||"application/cea-708"==t?r.i=null:(r.i=(0,Ge[t])(),r.i.setSequenceMode?r.i.setSequenceMode(n):ce('Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):ce('Text parsers should have a "setManifestType" method!'),r.u=i)}function Rh(e){return!(e.u||e.l&&"ended"!=e.l.readyState)}function Nh(e,t){return e=e.u||!Object.keys(e.g).length?null:t==le?e.h.g:!(e=Xi(e,t))||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function us(e,t){return e.u?null:t==le?e.h.h:Sa(Xi(e,t))}function Xi(e,t){try{return e.g[t].buffered}catch{return null}}function as(e,t,n,i,r,o,s,u,a,l){var c,h,g,m,w,T,x,S,A;return s=void 0!==s&&s,u=void 0!==u&&u,a=void 0!==a&&a,l=void 0!==l&&l,C(function(I){switch(I.g){case 1:if(t!=(c=ze).ea){I.B(2);break}if(!e.s){I.B(3);break}return y(I,e.wa,4);case 4:e.h.s=I.h;case 3:return y(I,function e0(e,t,n,i){var o,s,u;return C(function(a){return 1==a.g?y(a,Promise.resolve(),2):e.i&&e.j?null==n||null==i?(e.i.parseInit(Q(t)),a.return()):(o={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:e.u?n:e.s},s=e.i.parseMedia(Q(t),o),u=s.filter(function(l){return l.startTime>=e.l&&l.startTime<e.m}),e.j.append(u),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),void F(a)):a.return()})}(e.h,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return I.return();case 2:if(l||!e.m){I.B(6);break}return y(I,as(e,c.T,n,i,r,o,s,u,a,!0),7);case 7:return y(I,as(e,c.ka,n,i,r,o,s,u,a,!0),8);case 8:return I.return();case 6:if(!e.g[t])return I.return();if(h=e.g[t].timestampOffset,g=e.G[t],e.o[t]&&(g=e.o[t].getOrginalMimeType()),i&&(m=function my(e,t,n,i,r,o){var s=null,u=Q(n);if(ki.includes(r))(o=ai(u)).length&&i&&((t=o.find(function(f){return"com.apple.streaming.transportStreamTimestamp"===f.description}))&&t.data&&(s=Math.round(t.data)/1e3),e.da([{cueTime:i.startTime,data:u,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(r.includes("/mp4")&&i&&0==i.timestampOffset&&i.h&&i.h.timescale){var a=i.h.timescale;if(!isNaN(a)){var l=0,c=!1;(new xe).box("moof",de).box("traf",de).O("tfdt",function(f){l=Ma(f.reader,f.version).baseMediaDecodeTime/a,c=!0,f.parser.stop()}).parse(n,!0),c&&(s=l)}}else r.includes("/mp4")||r.includes("/webm")||!Ra(u)||(null!=(t=(u=(new we).parse(u)).getStartTime()[t])&&(s=t),(u=u.getMetadata()).length&&e.da(u,o,i?i.endTime:null));return s}(e,t,n,i,g,h),null!=m)&&(w=i.startTime-m,(.1<=Math.abs(h-w)||s||u)&&(h=w,e.Z&&(He(e,t,function(){return Gi(e,t)}),He(e,t,function(){return Wi(e,t,h)}))),T=t==c.ka||!(c.ka in e.g),e.s&&T&&e.wa.resolve(h)),o&&t==c.ka&&(e.h||ss(e,"application/cea-608",e.s,!1),e.H||(x=g.split(";",1)[0],e.H=new Yt(x)),i?(S=e.H.j(n)).length&&function n0(e,t,n,i,r){for(var o=n+" "+i,s=new Map,u=(t=p(t)).next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),hf(e,a,r),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.A&&e.j.append([a]))}for(o=(r=p(s.keys())).next();!o.done;o=r.next())for(e.o.has(o=o.value)||e.o.set(o,new Map),u=(t=p(s.get(o).keys())).next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}(e.h,S,i.startTime,i.endTime,h):e.H.init(n)),!e.o[t]){I.B(9);break}return y(I,e.o[t].transmux(n,r,i,e.l.duration,t),10);case 10:n=I.h;case 9:return n=function xy(e,t,n,i){return e.A.insertFakeEncryptionInInit&&null==n&&e.ba[i]&&(Zn()||Rr())&&"mp4"==e.G[i].split(";")[0].split("/")[1]&&(t=function J0(e){function t(){i=!0}function n(l){o.push(l),de(l)}e=Q(e);var r,i=!1,o=[],s=[];if((new xe).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(l){r=l,o.push(l),Fi(l)}).O("encv",t).O("enca",t).O("hev1",function(l){s.push({box:l,Lb:1701733238})}).O("hvc1",function(l){s.push({box:l,Lb:1701733238})}).O("avc1",function(l){s.push({box:l,Lb:1701733238})}).O("avc3",function(l){s.push({box:l,Lb:1701733238})}).O("ac-3",function(l){s.push({box:l,Lb:1701733217})}).O("ec-3",function(l){s.push({box:l,Lb:1701733217})}).O("mp4a",function(l){s.push({box:l,Lb:1701733217})}).parse(e),i)return e;if(0==s.length||!r)throw Vi(e),new E(2,3,3019);s.reverse();for(var u=p(s),a=u.next();!a.done;a=u.next())e=Q0(e,r,(a=a.value).box,o,a.Lb);return e}(t)),t}(e,n,i?i.startTime:null,t),i&&e.s&&t!=c.ea&&(s||u)&&(A=i.startTime,He(e,t,function(){return Gi(e,t)}),He(e,t,function(){return Wi(e,t,A)})),y(I,He(e,t,function(){var M=n;if("video"==t&&e.M){var k=e.M;k.g&&k.g.appendBuffer(M,"video",k.o,-h)}e.g[t].appendBuffer(M)}),11);case 11:F(I)}})}function Lh(e,t){var n;return C(function(i){return 1==i.g?t==(n=ze).ea?e.h?y(i,e.h.remove(0,1/0),0):i.return():y(i,He(e,t,function(){return ls(e,t,0,e.l.duration)}),4):e.m?y(i,He(e,n.T,function(){return ls(e,n.T,0,e.l.duration)}),0):i.B(0)})}function ls(e,t,n,i){i<=n?Mn(e,t):e.g[t].remove(n,i)}function Gi(e,t){var n=e.g[t].appendWindowStart,i=e.g[t].appendWindowEnd;e.g[t].abort(),e.g[t].appendWindowStart=n,e.g[t].appendWindowEnd=i,Mn(e,t)}function Wi(e,t,n){0>n&&(n+=.001),e.g[t].timestampOffset=n,Mn(e,t)}function Mn(e,t){if(!e.u){var n=e.j[t][0];n&&(n.p.resolve(),Pa(e,t))}}function He(e,t,n){return me(e.I),n={start:n,p:new Se},e.j[t].push(n),1==e.j[t].length&&Ph(e,t),n.p}function La(e,t){var n,i,r,o,u;return C(function(l){switch(l.g){case 1:for(r in me(e.I),n=[],i={},e.g)i.tc=new Se,o={start:function(c){return function(){return c.tc.resolve()}}(i),p:i.tc},e.j[r].push(o),n.push(i.tc),1==e.j[r].length&&o.start(),i={tc:i.tc};return ee(l,2),y(l,Promise.all(n),4);case 4:ue(l,3);break;case 2:throw te(l);case 3:return ee(l,5,6),y(l,t(),6);case 6:for(u in tn(l),e.g)Pa(e,u);nn(l,0);break;case 5:throw new E(2,3,3015,te(l),e.i.error||"No error in the media element")}})}function Pa(e,t){e.j[t].shift(),Ph(e,t)}function Ph(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){n.p.reject("QuotaExceededError"==i.name?new E(2,3,3017,t):new E(2,3,3015,i,e.i.error||"No error in the media element")),Pa(e,t)}}(d=kh.prototype).destroy=function(){return this.I.destroy()},d.init=function(e,t,n,i){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,i=void 0!==i&&i;var o,s,u,a,l,r=this;return C(function(c){if(1==c.g)return o=ze,y(c,r.K,2);for(r.s=t,r.N=n,r.ca=i,r.Z=!r.s&&"HLS"==r.N&&!r.ca,s=p(e.keys()),u=s.next();!u.done;u=s.next())l=e.get(a=u.value),os(r,a,l,l.codecs),r.m?(r.j[o.T]=[],r.j[o.ka]=[]):r.j[a]=[];F(c)})},d.configure=function(e){this.A=e},d.hb=function(){var e={total:this.u?[]:Vn(this.i.buffered),audio:this.u?[]:Vn(Xi(this,"audio")),video:this.u?[]:Vn(Xi(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},d.remove=function(e,t,n){var r,i=this;return C(function(o){return 1==o.g?e==(r=ze).ea?y(o,i.h.remove(t,n),0):y(o,He(i,e,function(){return ls(i,e,t,n)}),4):i.m?y(o,He(i,r.T,function(){return ls(i,r.T,t,n)}),0):o.B(0)})},d.flush=function(e){var n,t=this;return C(function(i){return 1==i.g?e==(n=ze).ea?i.return():y(i,He(t,e,function(){t.i.currentTime-=.001,Mn(t,e)}),2):t.m?y(i,He(t,n.T,function(){var r=n.T;t.i.currentTime-=.001,Mn(t,r)}),0):i.B(0)})},d.endOfStream=function(e){var t=this;return C(function(n){return y(n,La(t,function(){Rh(t)||"closed"===t.l.readyState||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},d.Ja=function(e){var t=this;return C(function(n){return y(n,La(t,function(){if(e<t.l.duration)for(var i in t.g){var r={start:function(){},p:new Se};t.j[i].unshift(r)}t.l.duration=e}),0)})},d.getDuration=function(){return this.l.duration};var ja=P.URL.createObjectURL,Cy="sequence";function Y(e,t,n){this.i=e,this.m=t,this.s=this.j=1/0,this.g=1,this.h=this.l=null,this.o=0,this.C=!0,this.F=0,this.u=void 0===n||n,this.G=0,this.A=!1}function jh(e,t,n){this.l=n,this.j=e,this.s=_h(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function Dy(e){this.g=e}function _h(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=p(Vn(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function _a(e,t,n,i,r){var o=this;this.u=r,this.g=e,this.A=t,this.s=n,this.l=new Ie,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=i,this.o=!1,this.l.D(e,"waiting",function(){return Oa(o)}),this.m=new ie(function(){Oa(o)}).La(this.s.gapJumpTimerTime)}function Oa(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,i=_h(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.s!=i)&&(t.m=o,t.g=r,t.s=i,t.h=!1),(i=(r=o-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new K("stalldetected"))),t=!i}t&&(i=function ty(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=Vn(e).findIndex(function(i,r,o){return i.start>t&&(0==r||o[r-1].end-t<=n)}))?e:null}(n=e.g.buffered,t=e.g.currentTime,e.s.gapDetectionThreshold),null==i||0==i&&!e.o||(r=n.start(i))>=e.A.ib()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,t==e.i&&(e.i=r),e.C++,e.u(new K("gapjumped"))))}}}function zi(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Ry.value().get(t),n.ma(e,t,i))}(d=Y.prototype).getDuration=function(){return this.j},d.Sg=function(){return this.g},d.gg=function(e){this.i=e},d.Ja=function(e){this.j=e},d.Xg=function(){return this.i},d.eg=function(e){this.o=e},d.ic=function(e){this.C=e},d.Td=function(e){this.s=e},d.fg=function(e){this.m=e},d.Lg=function(){return this.m},d.Wf=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.Md(e[0].start+t),this.g=e.reduce(function(i,r){return Math.max(i,r.end-r.start)},this.g),this.h=Math.max(this.h,n),null!=this.i&&this.u&&!this.A&&(this.i=(Date.now()+this.o)/1e3-this.h-this.g)}},d.Vc=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.o)/1e3,r=(e=p(e)).next();!r.done;r=e.next())i<(r=r.value).startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime));this.Md(t),this.h=Math.max(this.h,n),null!=this.i&&this.u&&!this.A&&(this.i=i-this.h-this.g)}},d.Id=function(){this.A=!0},d.Md=function(e){this.l=null==this.l?e:Math.min(this.l,e)},d.Ue=function(e){this.g=Math.max(this.g,e)},d.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},d.R=function(){return this.j==1/0&&!this.C},d.Ib=function(){return this.j!=1/0&&!this.C},d.jb=function(){return Math.max(this.F,this.Eb()-this.s)},d.ig=function(e){this.F=e},d.Eb=function(){return this.R()||this.Ib()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j},d.Nc=function(e){var t=Math.max(this.l,this.F);return this.s==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Eb()-this.s+e,this.ib()))},d.$b=function(){return this.Nc(0)},d.ib=function(){return Math.max(0,this.Eb()-(this.R()||this.Ib()?this.m:0))},d.ng=function(){return!(null==this.i||null!=this.h&&this.u)},d.dg=function(e){this.G=e},U("shaka.media.PresentationTimeline",Y),Y.prototype.setAvailabilityTimeOffset=Y.prototype.dg,Y.prototype.usingPresentationStartTime=Y.prototype.ng,Y.prototype.getSeekRangeEnd=Y.prototype.ib,Y.prototype.getSeekRangeStart=Y.prototype.$b,Y.prototype.getSafeSeekRangeStart=Y.prototype.Nc,Y.prototype.getSegmentAvailabilityEnd=Y.prototype.Eb,Y.prototype.setUserSeekStart=Y.prototype.ig,Y.prototype.getSegmentAvailabilityStart=Y.prototype.jb,Y.prototype.isInProgress=Y.prototype.Ib,Y.prototype.isLive=Y.prototype.R,Y.prototype.offset=Y.prototype.offset,Y.prototype.notifyMaxSegmentDuration=Y.prototype.Ue,Y.prototype.notifyMinSegmentStartTime=Y.prototype.Md,Y.prototype.lockStartTime=Y.prototype.Id,Y.prototype.notifySegments=Y.prototype.Vc,Y.prototype.notifyTimeRange=Y.prototype.Wf,Y.prototype.getDelay=Y.prototype.Lg,Y.prototype.setDelay=Y.prototype.fg,Y.prototype.setSegmentAvailabilityDuration=Y.prototype.Td,Y.prototype.setStatic=Y.prototype.ic,Y.prototype.setClockOffset=Y.prototype.eg,Y.prototype.getPresentationStartTime=Y.prototype.Xg,Y.prototype.setDuration=Y.prototype.Ja,Y.prototype.setPresentationStartTime=Y.prototype.gg,Y.prototype.getMaxSegmentDuration=Y.prototype.Sg,Y.prototype.getDuration=Y.prototype.getDuration,jh.prototype.release=function(){this.l=this.j=null,this.i=function(){}},_a.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.A=this.u=null},_a.prototype.Ye=function(){this.o=!0,Oa(this)};var Ry=new Bi(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Oh(e,t,n,i){var r=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==r.l&&(r.l=i()),r.l},this.o=!1,this.h=new Ie,this.i=new bh(e),zi(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Bh(r,r.j())})}function Ua(e){return e.o?e.g.currentTime:e.j()}function Uh(e,t){0<e.g.readyState?Vh(e.i,t):zi(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Bh(e,e.j())})}function Bh(e,t){.001>Math.abs(e.g.currentTime-t)?Fh(e):(e.h.ma(e.g,"seeking",function(){Fh(e)}),Vh(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Fh(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function bh(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new ie(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}function Vh(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.La(.1)}function qh(e){this.g=e,this.j=!1,this.h=null,this.i=new Ie}function Hh(e,t,n,i,r,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.A=t.minBufferTime||0,this.l=n,this.u=r,this.s=null,this.o=function Ny(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return function ky(e,t){e.i=t}(t=new jh(new Dy(e),t.stallThreshold,n),function(){i?e.currentTime+=i:(e.pause(),e.play())}),t}(e,n,o),this.j=new _a(e,t.presentationTimeline,n,this.o,o),this.h=new Oh(e,function(){var u=s.j;u.j=!0,u.o=!1;var a=Ua(s.h);return u=Xh(s,a),.001<Math.abs(u-a)&&(a=Date.now()/1e3,!s.s||s.s<a-1)?(s.s=a,Uh(s.h,u),u=void 0):(s.u(),u=void 0),u},function(u){var a=s.j;a.g.seeking&&!a.j&&(a.j=!0,a.i=u)},function(){var u=i;return null==u?u=1/0>s.g.getDuration()?s.g.$b():s.g.ib():0>u&&(u=s.g.ib()+u),Kh(s,Gh(s,u))}),this.m=new ie(function(){if(0!=s.i.readyState&&!s.i.paused){var u=Ua(s.h),a=s.g.$b(),l=s.g.ib();3>l-a&&(a=l-3),u<a&&(u=Xh(s,u),s.i.currentTime=u)}})}function Kh(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Xh(e,t){var n=Math.max(e.A,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.$b(),o=e.g.ib(),s=e.g.getDuration();3>o-r&&(r=o-3);var u=e.g.Nc(n),a=e.g.Nc(i);return n=e.g.Nc(n+i),t>=s?Kh(e,t):t>o?o:t<r?Ea(e.i.buffered,a)?a:n:t>=u||Ea(e.i.buffered,t)?t:n}function Gh(e,t){var n=e.g.$b();return t<n?n:t>(e=e.g.ib())?e:t}function fe(e){this.g=e,this.l=null,this.i=0,this.m=!1}function Ly(e,t){for(var n=(e=p(e.g)).next();!n.done;n=e.next())t(n.value)}function Ba(e,t,n){return new fe([new J(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Qt(e,t,n){this.i=e,this.g=t,this.h=n}function Be(){fe.call(this,[]),this.h=[]}function br(e){var t=this;this.g=e,this.j=!1,this.i=this.g.xd(),this.h=new ie(function(){t.g.Uf(.25*t.i)})}function Wh(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.xd()!=t&&e.g.mf(t))}catch{}e.h.La(.25),0!=e.g.xd()&&e.g.mf(0)}function zh(e){var t=this;this.h=e,this.g=new Set,this.i=new ie(function(){Yh(t,!1)}).La(.25)}function Yh(e,t){for(var n=p(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function cs(e){he.call(this),this.g=new Map,this.h=e}function Fa(e){he.call(this);var t=this;this.g=new Set,this.i=e,this.h=new ie(function(){for(var n=t.i(),i=p(t.g),r=i.next();!r.done;r=i.next())(r=r.value).endTime<n.start&&(t.g.delete(r),r=new K("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).La(2)}function fs(e,t){he.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Rb:null,Qb:Yi,Hb:function(i,r){return li(n,"enter",i,r)}},{Rb:Vr,Qb:Yi,Hb:function(i,r){return li(n,"enter",i,r)}},{Rb:qr,Qb:Yi,Hb:function(i,r){return li(n,"enter",i,r)}},{Rb:Yi,Qb:Vr,Hb:function(i,r){return li(n,"exit",i,r)}},{Rb:Yi,Qb:qr,Hb:function(i,r){return li(n,"exit",i,r)}},{Rb:Vr,Qb:qr,Hb:function(i,r){return li(n,"skip",i,r)}},{Rb:qr,Qb:Vr,Hb:function(i,r){return li(n,"skip",i,r)}}],this.h=new Ie,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}function li(e,t,n,i){t=new K(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}Oh.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},bh.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(d=qh.prototype).de=function(){var t=this;zi(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){!function e(){null==t.h||0==t.h?t.j=!0:(t.i.ma(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}()})},d.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},d.ee=function(e){this.h=this.j?this.h:e},d.md=function(){return(this.j?this.g.currentTime:this.h)||0},d.yf=function(){return 0},d.xf=function(){return 0},d.Vf=function(){},(d=Hh.prototype).de=function(){this.m.La(.25)},d.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},d.ee=function(e){Uh(this.h,e)},d.md=function(){var e=Ua(this.h);return 0<this.i.readyState&&!this.i.paused?Gh(this,e):e},d.yf=function(){return this.o?this.o.o:0},d.xf=function(){return this.j.C},d.Vf=function(){this.j.Ye()},(d=fe.prototype).Db=function(){return this.g.length},d.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)},d.rh=function(){this.m=!0},d.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n];if(e>=i.startTime&&e<(n<t?this.g[n+1].startTime:i.endTime))return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},d.offset=function(e){if(!this.m)for(var t=p(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},d.Kd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,q(e))}},d.Uc=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(0==n.g.length||i.endTime>n.g[0].startTime)}),this.Kd(e),this.Za(t)},d.Za=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},d.Xb=function(e,t,n){if(n=void 0!==n&&n,!this.m){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(this.g[this.g.length-1]=new J((e=this.g[this.g.length-1]).startTime,t,e.C,e.Ka,e.pa,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.A,e.g,e.status,e.aes128Key),this.g[this.g.length-1].l=e.l)}},d.Vd=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new ie(function(){var i=t();i?n.g.push.apply(n.g,q(i)):(n.l.stop(),n.l=null)}),this.l.La(e))},fe.prototype[Symbol.iterator]=function(){return this.Bb(0)},fe.prototype.Bb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var o=n.i[r];if(e>=o.startTime&&e<o.endTime){for(;r&&!o.s;)r--,o=n.i[r];if(!o.s)return Ln("No independent partial segment found!"),null;t++,i=r-1;break}}return new Qt(this,t,i)},U("shaka.media.SegmentIndex",fe),fe.forSingleSegment=Ba,fe.prototype.getIteratorForTime=fe.prototype.Bb,fe.prototype.updateEvery=fe.prototype.Vd,fe.prototype.fit=fe.prototype.Xb,fe.prototype.evict=fe.prototype.Za,fe.prototype.mergeAndEvict=fe.prototype.Uc,fe.prototype.offset=fe.prototype.offset,fe.prototype.get=fe.prototype.get,fe.prototype.find=fe.prototype.find,fe.prototype.markImmutable=fe.prototype.rh,fe.prototype.release=fe.prototype.release,Qt.prototype.Dg=function(){return this.g},Qt.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.Ca().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},Qt.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.Ca().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},U("shaka.media.SegmentIterator",Qt),Qt.prototype.next=Qt.prototype.next,Qt.prototype.current=Qt.prototype.current,Qt.prototype.currentPosition=Qt.prototype.Dg,Qe(Be,fe),(d=Be.prototype).clone=function(){var e=new Be;return e.h=this.h.slice(),e},d.release=function(){for(var e=p(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},d.find=function(e){for(var t=0,n=p(this.h),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.i+i.Db()}return null},d.get=function(e){for(var t=0,n=p(this.h),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.i+i.Db()}return null},d.offset=function(){},d.Kd=function(){},d.Za=function(){},d.Uc=function(){},d.Xb=function(){},d.Vd=function(){},U("shaka.media.MetaSegmentIndex",Be),Be.prototype.updateEvery=Be.prototype.Vd,Be.prototype.fit=Be.prototype.Xb,Be.prototype.mergeAndEvict=Be.prototype.Uc,Be.prototype.evict=Be.prototype.Za,Be.prototype.merge=Be.prototype.Kd,Be.prototype.offset=Be.prototype.offset,Be.prototype.get=Be.prototype.get,Be.prototype.find=Be.prototype.find,Be.prototype.release=Be.prototype.release,br.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},br.prototype.set=function(e){this.i=e,Wh(this)},br.prototype.td=function(){return this.g.td()},zh.prototype.release=function(){this.i.stop();for(var e=p(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Qe(cs,he),cs.prototype.release=function(){this.g.clear(),he.prototype.release.call(this)},cs.prototype.j=function(e){for(var t=p(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).Xc,r=i.length-1;0<=r;r--){var o=i[r];if(o.position<=e){i=o.Qe;break e}}i=null}(r=i)&&(r=!((r=n.Ff)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r&&(r=e,o=i.contentType,r=!!((o=this.h()[o])&&0<o.length&&r>=o[0].start&&r<o[o.length-1].end)),r&&(n.Ff=i,JSON.stringify(i),n=new K("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},Qe(Fa,he),Fa.prototype.release=function(){this.g.clear(),this.h.stop(),he.prototype.release.call(this)},Qe(fs,he),fs.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,he.prototype.release.call(this)},fs.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=p(this.i.g),i=n.next();!i.done;i=n.next()){var r=this.g.get(i=i.value),o=e<i.startTime?Vr:e>i.endTime?qr:Yi;this.g.set(i,o);for(var s=p(this.m),u=s.next();!u.done;u=s.next())(u=u.value).Rb==r&&u.Qb==o&&u.Hb(i,t)}}};var Vr=1,Yi=2,qr=3;function Oy(e,t,n){this.j=e,this.h=t,this.i=0,this.l=n,this.g=new Map}function $h(e){if(0!==e.g.size){for(var t=p(e.g.keys()),n=t.next();!n.done;n=t.next())(n=n.value)&&Jh(e,n);e.i=0}}function Jh(e,t){var n=e.g.get(t);e.g.delete(t),n&&n.abort()}function Qh(e){this.i=e,this.g=this.h=null}function Fy(e,t,n){e.g=e.i(t,n,function(i){return C(function(r){return e.h?y(r,e.h(i),0):r.B(0)})})}function ba(e,t,n,i,r){return e=Ye(e,i,r),(0!=t||null!=n)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Zh(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.u=1,this.o=this.j=null,this.F=0,this.C=!1,this.h=new Map,this.A=!1,this.G=null,this.s=!1,this.l=new ti(function(){return function by(e){var t,n,i,r;return C(function(o){if(1==o.g){for(t=[],n=p(e.h.values()),i=n.next();!i.done;i=n.next())Hr(r=i.value),t.push(Ga(r));return y(o,Promise.all(t),2)}e.h.clear(),e.g=null,e.m=null,e.i=null,F(o)})}(n)})}function ed(e,t){var n=e.h.get("video");if(n){var i=n.stream;i&&(t?(t=i.trickModeVideo)&&!n.Nb&&($i(e,t,!1,0,!1),n.Nb=i):(i=n.Nb)&&(n.Nb=null,$i(e,i,!0,0,!1)))}}function td(e,t,n,i,r,o){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,o=void 0!==o&&o,e.j=t,e.A&&(t.video&&$i(e,t.video,n,i,r,o),t.audio&&$i(e,t.audio,n,i,r,o))}function hs(e,t){C(function(n){if(1==n.g)return e.o=t,e.A?t.segmentIndex?n.B(2):y(n,t.createSegmentIndex(),2):n.return();$i(e,t,!0,0,!1),F(n)})}function $i(e,t,n,i,r,o){var s=e.h.get(t.type);s||t.type!=le?s&&(s.Nb&&(t.trickModeVideo?(s.Nb=t,t=t.trickModeVideo):s.Nb=null),s.stream!=t||r)&&(s.Ia&&function By(e,t){t&&t!==e.h&&($h(e),e.h=t)}(s.Ia,t),t.type==le&&(r=Ft(t.mimeType,t.codecs),ss(e.g.S,r,e.m.sequenceMode,t.external)),s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.Y=null,s.zf=!!o,n&&(s.Ec?s.Wd=!0:s.ta?(s.ob=!0,s.rd=i,s.Wd=!0):(Hr(s),Xa(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)}))),function Hy(e,t){var n,i;return C(function(r){if(1==r.g)return t.Ga?(i=t.Ga,(n=t.stream).segmentIndex?r.B(2):y(r,n.createSegmentIndex(),2)):r.return();if(t.Ga!=i||t.stream!=n)return r.return();var o=e.g.wd(),s=us(e.g.S,t.type),u=t.stream.segmentIndex.find(t.xa?t.xa.endTime:o),a=null==u?null:t.stream.segmentIndex.get(u);u=a&&a.pa?a.pa-a.Ka:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.h)&&(u+=(a.pa?a.pa-a.Ka:null)||0),o=8*u/(a=e.g.getBandwidthEstimate())<(s||0)-o-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.Ga.h.g>u):o=!1,o&&t.Ga.abort(),F(r)})}(e,s).catch(function(u){e.g&&e.g.onError(u)})):function Vy(e,t){var n,i,r,o,a;C(function(l){switch(l.g){case 1:return n=ze,e.F++,i=e.F,ee(l,2),y(l,Lh(e.g.S,n.ea),4);case 4:ue(l,3);break;case 2:r=te(l),e.g&&e.g.onError(r);case 3:o=Ft(t.mimeType,t.codecs),ss(e.g.S,o,e.m.sequenceMode,t.external),(e.g.S.F.isTextVisible()||e.i.alwaysStreamText)&&e.F==i&&(a=nd(e,t),e.h.set(n.ea,a),Ht(e,a,0)),F(l)}})}(e,t)}function Va(e,t){t.Ec||t.ob||(t.ta?(t.ob=!0,t.rd=0):null==Nh(e.g.S,t.type)?null==t.cb&&Ht(e,t,0):(Hr(t),Xa(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function nd(e,t){return{stream:t,type:t.type,Y:null,Ia:id(e,t),xa:null,Tc:null,Me:null,Ke:null,Je:null,Nb:null,endOfStream:!1,ta:!1,cb:null,ob:!1,rd:0,Wd:!1,Ec:!1,ad:!0,Te:!1,df:!1,Qc:!1,Ga:null}}function id(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.i.segmentPrefetchLimit?new Oy(e.i.segmentPrefetchLimit,t,function(n,i,r){return rd(e,n,i,r)}):null}function Xy(e,t){var n,i,r,o,s;return C(function(u){switch(u.g){case 1:if(me(e.l),t.ta||null==t.cb||t.Ec)return u.return();if(t.cb=null,!t.ob){u.B(2);break}return y(u,Xa(e,t,t.Wd,t.rd),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.B(4);break}return n=t.stream,y(u,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.ta||t.cb||Ht(e,t,0),u.return();case 4:ee(u,6),i=function Gy(e,t){if(Ha(t))return function vy(e,t){var n=us(e,"video")||0;ff(e.h,t,n)}(e.g.S,t.stream.originalId||""),null;t.type==le&&function yy(e){e.h&&ff(e.h,"",0)}(e.g.S);var n=e.g.wd(),i=t.xa?t.xa.endTime:n,r=function gy(e,t,n){return e.u?0:t==le?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):yh(e=Xi(e,t),n)}(e.g.S,t.type,n),o=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.u,s=e.m.presentationTimeline.getDuration()-i,u=us(e.g.S,t.type);if(1e-6>s&&u)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(le))&&Ha(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,r>=o)return e.i.updateIntervalSeconds/2;if(r=function Wy(e,t,n,i){if(t.Y)return t.Y.current();if(t.xa||i)return n=t.xa?t.xa.endTime:i,t.Te=!0,t.Y=t.stream.segmentIndex.Bb(n),t.Y&&t.Y.next().value;e=e.i.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.Y=t.stream.segmentIndex.Bb(i),r=t.Y&&t.Y.next().value),r||(t.Y=t.stream.segmentIndex.Bb(n),r=t.Y&&t.Y.next().value),r}(e,t,n,u),!r)return e.i.updateIntervalSeconds;for(o=1/0,u=(s=p(s=Array.from(e.h.values()))).next();!u.done;u=s.next())Ha(u=u.value)||u.Y&&!u.Y.current()||(o=Math.min(o,u.xa?u.xa.endTime:n));return i>=o+e.m.presentationTimeline.g?e.i.updateIntervalSeconds:(t.Ia&&t.Y&&function Uy(e,t){if(e.h.segmentIndex){var n=e.h.segmentIndex.Bb(Math.max(t.startTime,e.i));if(n)for(;e.g.size<e.j&&null!=t;){var i=!0;t.m&&null!=t.pa&&(i=!1),2==t.Fb()&&(i=!1),i&&!e.g.has(t)&&(Fy(i=new Qh(e.l),t,e.h),e.g.set(t,i)),e.i=t.startTime,t=n.next().value}}}(t.Ia,r),function zy(e,t,n,i){var r,o,s,u,a,c,f,h,g,m,w,v,x;return C(function(S){switch(S.g){case 1:if(r=ze,o=t.stream,s=t.Y,t.ta=!0,ee(S,2),2==i.Fb())throw new E(1,1,1011);return y(S,function Qy(e,t,n){var i,r,o,s,u,a,l,c,f,h,g,m;return C(function(v){return 1==v.g?(i=ze,r=[],o=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,u=sn(t.stream.codecs)[0],a=Jn(t.stream.mimeType),(l=n.timestampOffset)==t.Me&&o==t.Ke&&s==t.Je&&u==t.Le&&a==t.Rf?v.B(2):((c=t.Le&&t.Rf&&function My(e,t,n){var i=sn(on(e.G[t]))[0],r=Jn(e.G[t]),o=Ft(n.mimeType,n.codecs),s=e.A.forceTransmux;return(!qe(o)||!e.s&&ki.includes(o))&&(s=!0),n=Cr(n.mimeType,n.codecs),s&&(s=$n(n))&&(o=(s=s()).convertCodecs(t,n),s.destroy()),t=sn(on(o))[0],o=Jn(o),(i!==t||r!==o)&&("smooth"!==e.A.codecSwitchingStrategy||!xi()||e.m)}(e.g.S,t.type,t.stream))&&(f=null,t.type===i.ka?f=e.h.get(i.T):t.type===i.T&&(f=e.h.get(i.ka)),f&&(f.Tc=null,Va(e,f),Ga(f).catch(function(){}))),h=function(){var T,S,A;return C(function(I){if(1==I.g)return T=new Map,e.j.audio&&T.set(i.T,e.j.audio),e.j.video&&T.set(i.ka,e.j.video),ee(I,2),t.Ke=o,t.Je=s,t.Le=u,t.Rf=a,t.Me=l,y(I,function wy(e,t,n,i,r,o,s,u){var a,l;return C(function(f){return 1==f.g?t==(a=ze).ea?(o||(e.h.s=n),function t0(e,t,n){e.l=t,e.m=n}(e.h,i,r),f.return()):(l=[],y(f,function Iy(e,t,n,i){var r,o,s,u,a,l,c,f,h;return C(function(g){return 1==g.g?(r=sn(on(e.G[t]))[0],o=Jn(e.G[t]),u=Ft(n.mimeType,n.codecs),a=e.A.forceTransmux,(!qe(u)||!e.s&&ki.includes(u))&&(a=!0),l=Cr(n.mimeType,n.codecs),a&&(c=$n(l))&&(s=c(),u=s.convertCodecs(t,l)),f=sn(on(u))[0],h=Jn(u),r===f&&o===h?g.return(!1):"smooth"===e.A.codecSwitchingStrategy&&xi()&&!e.m?y(g,function Sy(e,t,n,i){return He(e,t,function(){t!==le&&(xi()&&(e.o[t]&&e.o[t].destroy(),i&&(e.o[t]=i),e.g[t].changeType(n+e.A.sourceBufferExtraFeatures),e.G[t]=n),Mn(e,t))})}(e,t,u,s),3):(s&&s.destroy(),y(g,function Ay(e,t){return La(e,function(){return function Ey(e,t){var n,i,r,o,s,u,a,l,c,f,h,m,w,v,T,S,A,I,M,k,R;return C(function(D){switch(D.g){case 1:for(u in n=ze,e.u=!0,e.m=!1,i=e.i.currentTime,r=e.i.autoplay,o=e.i.paused,e.ja&&(e.i.autoplay=!1),Wn(D),e.C.vb(),s=[],e.o)s.push(e.o[u].destroy());for(a in e.j)for(c=(l=e.j[a])[0],e.j[a]=l.slice(0,1),c&&s.push(c.p.catch(cf)),f=p(l.slice(1)),h=f.next();!h.done;h=f.next())h.value.p.reject(new E(2,7,7003,void 0));for(m in e.g){w=e.g[m];try{e.l.removeSourceBuffer(w)}catch{}}return y(D,Promise.all(s),4);case 4:return e.o={},e.g={},v=e.l.duration,e.K=new Se,e.l=Dh(e,e.K),y(D,e.K,5);case 5:for(e.l.duration=v,T=new Se,S=t.size,A=0,e.C.D(e.l.sourceBuffers,"addsourcebuffer",function(){++A===S&&T.resolve()}),I=p(t.keys()),M=I.next();!M.done;M=I.next())R=t.get(k=M.value),os(e,k,R,R.codecs),e.m?(e.j[n.T]=[],e.j[n.ka]=[]):e.j[k]=[];return e.i.currentTime=i,y(D,T,2);case 2:tn(D),e.u=!1,me(e.I),e.C.ma(e.i,"canplay",function(){me(e.I),e.i.autoplay=r,o||e.i.play()}),nn(D,0)}})}(e,t)})}(e,i),3))):g.return(!0)})}(e,t,s,u),2)):(f.h||(l.push(He(e,t,function(){return Gi(e,t)})),e.m&&l.push(He(e,a.T,function(){return Gi(e,a.T)}))),o||(l.push(He(e,t,function(){return Wi(e,t,n)})),e.m&&l.push(He(e,a.T,function(){return Wi(e,a.T,n)}))),l.push(He(e,t,function(){e.g[t].appendWindowStart=0,e.g[t].appendWindowEnd=r,e.g[t].appendWindowStart=i,Mn(e,t)})),e.m&&l.push(He(e,a.T,function(){var h=a.T;e.g[h].appendWindowStart=0,e.g[h].appendWindowEnd=r,e.g[h].appendWindowStart=i,Mn(e,h)})),y(f,Promise.all(l),0))})}(e.g.S,t.type,l,o,s,e.m.sequenceMode||"HLS"==e.m.type,t.stream,T),4);if(2!=I.g)return c&&(S=null,t.type===i.ka?S=e.h.get(i.T):t.type===i.T&&(S=e.h.get(i.ka)),S&&(S.ob=!1,S.ta=!1,Va(e,S))),ue(I,0);throw A=te(I),t.Ke=null,t.Je=null,t.Le=null,t.Me=null,A})},y(v,h(),2))):(!function ey(e,t){return e&&t?e.Oc()==t.Oc()&&e.Lc()==t.Lc()&&Fu(e.Ca(),t.Ca())&&Pn(e.g,t.g):e==t}(n.h,t.Tc)&&(t.Tc=n.h)&&(g=Ka(e,t,n.h,void 0,!0),m=function(){var T,x,S,I,M;return C(function(k){switch(k.g){case 1:return ee(k,2),y(k,g,4);case 4:return T=k.h,me(e.l),x=null,S=new Map,(new xe).box("moov",de).box("trak",de).box("mdia",de).O("mdhd",function(R){x=is(R.reader,R.version).timescale}).box("hdlr",function(R){(R=R.reader).skip(8),R=R.mb(4);var D=String.fromCharCode(R[0]);switch(D+=String.fromCharCode(R[1]),D+=String.fromCharCode(R[2]),D+=String.fromCharCode(R[3])){case"soun":S.set(i.T,x);break;case"vide":S.set(i.ka,x)}x=null}).parse(T),S.has(t.type)?n.h.timescale=S.get(t.type):null!=x&&(n.h.timescale=x),I=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,y(k,e.g.Af(t.type,T),5);case 5:return y(k,as(e.g.S,t.type,T,null,t.stream,I),6);case 6:ue(k,0);break;case 2:throw M=te(k),t.Tc=null,M}})},e.g.uh(n.startTime,n.h),r.push(m())),e.m.sequenceMode&&(n.l!=(t.xa?t.xa.l:null)||t.Te)&&(t.Te=!1,r.push(function Ty(e,t,n){var i;return C(function(r){return 1==r.g?t==(i=ze).ea?r.return():(He(e,t,function(){return Gi(e,t)}),e.m&&He(e,i.T,function(){return Gi(e,i.T)}),y(r,He(e,t,function(){return Wi(e,t,n)}),2)):e.m?y(r,He(e,i.T,function(){return Wi(e,i.T,n)}),0):r.B(0)})}(e.g.S,t.type,n.startTime))),y(v,Promise.all(r),0))})}(e,t,i),4);case 4:return me(e.l),e.s?S.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,a=P.ReadableStream,e.i.lowLatencyMode&&a&&u&&("HLS"!=e.m.type||i.o)?(f=new Uint8Array(0),g=h=!1,m=function(A){var I,M,k;return C(function(R){return h||(g=!0,me(e.l),e.s)?R.return():(f=function $y(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(f,A),I=!1,M=0,(new xe).box("mdat",function(D){M=D.size+D.start,I=!0}).parse(f,!1,!0),I?(k=f.subarray(0,M),f=f.subarray(M),y(R,qa(e,t,n,o,i,k,!0),0)):R.B(0))})},y(S,Ka(e,t,i,m),9)):y(S,Ka(e,t,i),7));case 7:return c=S.h,me(e.l),e.s?S.return():(me(e.l),t.ob?(t.ta=!1,Ht(e,t,0),S.return()):y(S,qa(e,t,n,o,i,c),6));case 9:if(w=S.h,g){S.B(6);break}return h=!0,me(e.l),e.s?S.return():t.ob?(t.ta=!1,Ht(e,t,0),S.return()):y(S,qa(e,t,n,o,i,w),6);case 6:if(me(e.l),e.s)return S.return();t.xa=i,s.next(),t.ta=!1,t.df=!1,v=e.g.S.hb(),JSON.stringify(v[t.type]),t.ob||e.g.Ye(i.startTime,i.endTime,t.type),Ht(e,t,0),ue(S,0);break;case 2:if(x=te(S),me(e.l,x),e.s)return S.return();if(t.ta=!1,7001==x.code)t.ta=!1,Hr(t),Ht(e,t,0),S.B(0);else if(t.type==r.ea&&e.i.ignoreTextStreamFailures)e.h.delete(r.ea),S.B(0);else{if(3017!=x.code)return t.Qc=!0,x.severity=2,y(S,od(e,t,x),0);(function Jy(e,t,n){if(!Array.from(e.h.values()).some(function(r){return r!=t&&r.df})){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.Qc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.df=!0}Ht(e,t,4)})(e,t,x),S.B(0)}}})}(e,t,n,r).catch(function(){}),null)}(e,t),null!=i&&(Ht(e,t,i),t.Qc=!1),ue(u,7);break;case 6:return r=te(u),y(u,od(e,t,r),8);case 8:return u.return();case 7:if(o=Array.from(e.h.values()),!e.A||!o.every(function(a){return a.endOfStream})){u.B(0);break}return y(u,e.g.S.endOfStream(),10);case 10:me(e.l),0!=(s=e.g.S.getDuration())&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Ja(s),F(u)}})}function qa(e,t,n,i,r,o,s){var u,a,l,c,f,h;return s=void 0!==s&&s,C(function(g){switch(g.g){case 1:return u=i.closedCaptions&&0<i.closedCaptions.size,c=e.i.parsePrftBox&&!e.C,((l=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes)||c)&&(a=new xe),l&&a.O("emsg",function(m){var w=i.emsgSchemeIdUris;if(0===m.version)var v=m.reader.Yc(),T=m.reader.Yc(),x=m.reader.L(),S=m.reader.L(),A=m.reader.L(),I=m.reader.L(),M=r.startTime+S/x;else x=m.reader.L(),S=(M=m.reader.hc()/x+r.timestampOffset)-r.startTime,A=m.reader.L(),I=m.reader.L(),v=m.reader.Yc(),T=m.reader.Yc();m=m.reader.mb(m.reader.getLength()-m.reader.la()),(w&&w.includes(v)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==v?e.g.vh():((w=new K("emsg",w=(new Map).set("detail",{startTime:M,endTime:M+A/x,schemeIdUri:v,value:T,timescale:x,presentationTimeDelta:S,eventDuration:A,id:I,messageData:m}))).cancelable=!0,e.g.onEvent(w),w.defaultPrevented||"https://aomedia.org/emsg/ID3"!=v&&"https://developer.apple.com/streaming/emsg-id3"!=v||(v=ai(m)).length&&r&&e.g.wh([{cueTime:r.startTime,data:m,frames:v,dts:r.startTime,pts:r.startTime}],0,r.endTime)))}),c&&a.O("prft",function(m){if(!e.C&&r.h.timescale){var w=m.reader,v=m.version;w.L(),m=1e3*(m=w.L())+w.L()/Math.pow(2,32)*1e3,0===v?w=w.L():(v=w.L(),w=w.L(),w=v*Math.pow(2,32)+w),m=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+m).getTime(),w=new K("prft",w=(new Map).set("detail",{wallClockTime:m,programStartDate:new Date(m-w/r.h.timescale*1e3)})),e.g.onEvent(w),e.C=!0}}),(l||c)&&a.parse(o),y(g,function Zy(e,t,n){var i,r,s;return C(function(u){if(1==u.g)return i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(r=Nh(e.g.S,t.type))||.01>=(s=n-r-i)?u.return():y(u,e.g.S.remove(t.type,r,r+s),2);me(e.l),F(u)})}(e,t,n),2);case 2:return me(e.l),f=t.ad,t.ad=!1,h=t.zf,t.zf=!1,y(g,e.g.Af(t.type,o),3);case 3:return y(g,as(e.g.S,t.type,o,r,i,u,f,h,s),4);case 4:me(e.l),F(g)}})}function Ha(e){return e&&e.type==le&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Ka(e,t,n,i,r){var o,s,u,a;return C(function(c){switch(c.g){case 1:if(n instanceof It&&(o=n.g))return c.return(o);if(s=null,t.Ia&&n instanceof J){var f=t.Ia;if(f.g.has(n)){var h=f.g.get(n);i&&(h.h=i),f.g.delete(n),s=h.g}else s=null}return s||(s=rd(e,n,t.stream,i,r)),t.Ga=s,y(c,s.promise,2);case 2:if(u=c.h,t.Ga=null,a=u.data,!n.aes128Key){c.B(3);break}return y(c,function Yy(e,t,n){var i,r,o,s;return C(function(u){if(1==u.g)return(i=t).cryptoKey?u.B(2):y(u,i.fetchKey(),3);if(!(r=i.iv))for(r=Q(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n.g,s=r.byteLength-1;0<=s;s--)r[s]=255&o,o>>=8;return u.return(P.crypto.subtle.decrypt({name:"AES-CBC",iv:r},i.cryptoKey,e))})}(a,n.aes128Key,t.Y),4);case 4:a=c.h;case 3:return c.return(a)}})}function rd(e,t,n,i,r){r=r?0:1;var o=t instanceof J?t:void 0;return t=ba(t.Ca(),t.Ka,t.pa,e.i.retryParameters,i),e.g.Kb.request(ln,t,{type:r,stream:n,segment:o})}function Xa(e,t,n,i){var r,o;return C(function(s){return 1==s.g?(t.ob=!1,t.Wd=!1,t.rd=0,t.Ec=!0,t.xa=null,t.Tc=null,t.Y=null,t.Ia&&$h(t.Ia),i?(r=e.g.wd(),o=e.g.S.getDuration(),y(s,e.g.S.remove(t.type,r+i,o),3)):y(s,Lh(e.g.S,t.type),4)):3!=s.g?(me(e.l),n?y(s,e.g.S.flush(t.type),3):s.B(3)):(me(e.l),t.Ec=!1,t.endOfStream=!1,t.ta||t.cb||Ht(e,t,0),void F(s))})}function Ht(e,t,n){var i=t.type;(i!=le||e.h.has(i))&&(t.cb=new Dr(function(){var r;return C(function(o){return 1==o.g?(ee(o,2),y(o,Xy(e,t),4)):2!=o.g?ue(o,0):(r=te(o),e.g&&e.g.onError(r),void F(o))})}).U(n))}function Hr(e){null!=e.cb&&(e.cb.stop(),e.cb=null)}function Ga(e){return C(function(t){return e.Ga?y(t,e.Ga.abort(),0):t.B(0)})}function od(e,t,n){var i;return C(function(r){if(1==r.g)return y(r,Of(e.G),2);me(e.l),i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,1===n.category&&0<i&&(n.handled=e.g.le(t.stream,i),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.i.failureCallback(n),F(r)})}function sd(e,t){var n={mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0},i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return function t1(e){return C(function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.Gb)var n=!1;else{e.g&&(e.g.$a.Mb(),e.g=null);var i=(n=e.m.shift()).create(e.l);i?(n.$a.dc(),e.g={node:i.node,payload:i.payload,Gb:i.Gb,$a:n.$a}):n.$a.Qd(),n=!0}n?n=Promise.resolve():e.g?n=function n1(e){var t,n;return C(function(i){switch(i.g){case 1:return e.i=e.j.Ug(e.i,e.l,e.g.node,e.g.payload),ee(i,2),e.h=e.j.Gg(e.i,e.l,e.g.payload),y(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.$a.Od(),e.g=null),ue(i,0);break;case 2:return 7001==(t=te(i)).code?e.g.$a.Mb():e.g.$a.onError(t),e.g=null,e.h=null,n=e,y(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,F(i)}})}(e):(e.j.th(e.i),e.o=new Se,n=e.o),t=y(t,n,1)}return t})}(i)}),this.s=new ti(function(){return function e1(e){var t,n;return C(function(r){if(1==r.g)return e.h&&e.h.abort(),ud(e),y(r,e.u,2);for(e.g&&e.g.$a.Mb(),t=p(e.m),n=t.next();!n.done;n=t.next())n.value.$a.Mb();e.g=null,e.m=[],e.j=null,F(r)})}(i)})}function Kr(e,t){var n={dc:function(){},Od:function(){},Mb:function(){},onError:function(){},Qd:function(){},Mi:function(){}};return e.m.push({create:t,$a:n}),e.h&&e.h.abort(),ud(e),n}function ud(e){e.o&&(e.o.resolve(),e.o=null)}function ad(e){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(ad).join("");var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push(["b"]),i&&t.push(["i"]),r&&t.push(["u"]),n="",(i=ld(e.color))&&(n+="."+i),(i=ld(e.backgroundColor))&&(n+=".bg_"+i),n&&t.push(["c",n]),t.reduceRight(function(o,s){var u=p(s);return"<"+(s=u.next().value)+(void 0===(u=u.next().value)?"":u)+">"+o+"</"+s+">"},e.payload)}function ld(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Wa(e,t){for(var n=(e=p(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)Wa(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[],i.payload=ad(n),t.push(i)}return t}function Mt(e){this.g=null;for(var t=p(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function i1(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch{}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function cd(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=p(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function fd(){}function ds(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ct(e,t){var n=this;this.j=!1,this.i=[],this.A=e,this.m=t,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new ie(function(){Xr(n)}).La(.25),this.h=new Map,this.s=new Ie,this.s.D(document,"fullscreenchange",function(){Xr(n,!0)}),this.l=null,"ResizeObserver"in P&&(this.l=new ResizeObserver(function(){Xr(n,!0)}),this.l.observe(this.g)),this.o=new Map}function r1(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function hd(e,t,n,i,r){for(var o=!1,s=[],u=[],a=(t=p(t)).next();!a.done;a=t.next()){r.push(a=a.value);var l=e.h.get(a),c=a.startTime<=i&&a.endTime>i,f=l?l.og:null;l&&(s.push(l.ke),l.Zc&&s.push(l.Zc),c||(o=!0,e.h.delete(a),l=null)),c&&(u.push(a),l?r1(e,f)||(o=!0):(o1(e,a,r),f=(l=e.h.get(a)).og,o=!0)),0<a.nestedCues.length&&f&&hd(e,a.nestedCues,f,i,r),r.pop()}if(o){for(r=(i=p(s)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(u.sort(function(h,g){return h.startTime!=g.startTime?h.startTime-g.startTime:h.endTime-g.endTime}),a=(u=p(u)).next();!a.done;a=u.next())(i=e.h.get(a.value)).Zc?(n.appendChild(i.Zc),i.Zc.appendChild(i.ke)):n.appendChild(i.ke)}}function Xr(e,t){if(e.g){var n=e.A.currentTime;if(!e.j||void 0!==t&&t){for(var i=(t=p(e.o.values())).next();!i.done;i=t.next())ds(i.value);ds(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map;for(var r=(i=p(e.h.keys())).next();!r.done;r=i.next())t.set(r=r.value,e.h.get(r));hd(e,e.i,e.g,n,[])}}}function o1(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var o=document.createElement(r);if("br"!=r&&function u1(e,t,n,i,r){var o=t.style,s=0==n.nestedCues.length,u=1<i.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return"\xa0".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=za(n.linePadding,n,e.m),o.paddingRight=za(n.linePadding,n,e.m),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=function a1(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=za(n.fontSize,n,e.m),null!=n.line&&(e=n.lineInterpretation,0==n.line&&e==Do&&(e=1),1==e&&(o.position="absolute",n.writingMode==Ar?(o.width="100%",n.lineAlign==Yn?o.top=n.line+"%":"end"==n.lineAlign&&(o.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(o.height="100%",n.lineAlign==Yn?o.left=n.line+"%":"end"==n.lineAlign&&(o.right=100-n.line+"%")):(o.height="100%",n.lineAlign==Yn?o.right=n.line+"%":"end"==n.lineAlign&&(o.left=100-n.line+"%")))),o.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==Ar?o.paddingLeft=n.position:o.paddingTop=n.position),e=function s1(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==ko?n:"left"===e||"start"===e&&t===Er||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Er?"line-right":"center"}(n),"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ar?o.width=n.size+"%":o.height=n.size+"%")}(e,o,t,n,i),n=null,t.region&&t.region.id)if(e.o.has(r=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==rn?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==rn?"%":"px")))n=e.o.get(r);else{var s=document.createElement("span"),u=n.heightUnits==rn?"%":"px",a=n.widthUnits==rn?"%":"px",l=n.viewportAnchorUnits==rn?"%":"px";s.id="shaka-text-region---"+r,s.classList.add("shaka-text-region"),s.style.height=n.height+u,s.style.width=n.width+a,s.style.position="absolute",s.style.top=n.viewportAnchorY+l,s.style.left=n.viewportAnchorX+l,s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(r,s),n=s}r=o,i&&((r=document.createElement("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.h.set(t,{ke:o,og:r,Zc:n})}function za(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function dd(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function Ya(e){return e.j||(e.j=e.g.sessionId||P.crypto.randomUUID()),{v:1,sf:e.o,sid:e.j,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Ji(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled)if(Object.assign(n,Ya(e)),n.pr=e.h.vd(),e.l&&(n.ot===gs||n.ot===ms)&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),i)e=function p1(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=(t=p(t)).next();!s.done;s=t.next())r[null!=o[s=s.value]?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=ps(r[e]))&&(n["CMCD-"+i[e]]=o);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=ps(n);o&&(t.uris=t.uris.map(function(s){return $a(s,o)}))}}function ps(e){function t(f){return 100*n(f/100)}function n(f){return Math.round(f)}for(var f,r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(f){return encodeURIComponent(f)},rtp:t,tb:n},s=Object.keys(e||{}).sort(),u=(s=p(s)).next();!u.done;u=s.next()){var a=e[u=u.value];if(f=a,!(Number.isNaN(f)||null==f||""===f||!1===f||"v"===u&&1===a||"pr"==u&&1===a)){var c,l=o[u];l&&(a=l(a)),c="string"==(l=typeof a)&&"ot"!==u&&"sf"!==u&&"st"!==u?u+"="+JSON.stringify(a):"boolean"===l?u:"symbol"===l?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function $a(e,t){return!t||e.includes("offline:")?e:((e=new Ze(e)).g.set("CMCD",t),e.toString())}Qh.prototype.abort=function(){this.g&&this.g.abort()},(d=Zh.prototype).destroy=function(){return this.l.destroy()},d.configure=function(e){this.i=e,this.G=new _f({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=p(this.h.keys()),n=t.next();!n.done;n=t.next())if((n=this.h.get(n.value)).Ia){var i=n.Ia,r=e.segmentPrefetchLimit;i.j=r;for(var o=Array.from(i.g.keys());o.length>r;){var s=o.pop();s&&Jh(i,s)}0<e.segmentPrefetchLimit||(n.Ia=null)}else 0<e.segmentPrefetchLimit&&(n.Ia=id(this,n.stream))},d.start=function(){var e=this;return C(function(t){if(1==t.g)return y(t,function Ky(e){var t,n,i,o,s,u,a,l;return C(function(c){if(1==c.g){if(t=ze,!e.j)throw new E(2,5,5006);return n=new Map,i=new Set,e.j.audio&&(n.set(t.T,e.j.audio),i.add(e.j.audio)),e.j.video&&(n.set(t.ka,e.j.video),i.add(e.j.video)),e.o&&(n.set(t.ea,e.o),i.add(e.o)),y(c,e.g.S.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(me(e.l),e.updateDuration(),o=p(n.keys()),s=o.next();!s.done;s=o.next())a=n.get(u=s.value),e.h.has(u)||(l=nd(e,a),e.h.set(u,l),Ht(e,l,0));F(c)})}(e),2);me(e.l),e.A=!0,F(t)})},d.ad=function(){if(this.g)for(var e=this.g.wd(),t=p(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value,r=null;(n=this.h.get(i)).Y&&(r=n.Y.current()),(!r||r.startTime>e||r.endTime<e)&&(n.Y=null),(r=!(r=this.g.S).u&&(i==le?null!=(r=r.h).g&&null!=r.h&&e>=r.g&&e<r.h:Ea(r=Xi(r,i),e)))||((null!=us(this.g.S,i)||n.ta)&&Va(this,n),n.Ga&&(n.Ga.abort(),n.Ga=null),i===le&&(i=this.g.S).H&&i.H.i(),n.ad=!0)}},d.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();this.g.S.Ja(1/0>e?e:Math.pow(2,32))},sd.prototype.destroy=function(){return this.s.destroy()},(d=Mt.prototype).remove=function(e,t){return!!this.g&&(cd(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},d.append=function(e){var t=Wa(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},r=(t=p(t)).next();!r.done;i={Sb:i.Sb},r=t.next())i.Sb=r.value,e.some(function(o){return function(s){return s.startTime==o.Sb.startTime&&s.endTime==o.Sb.endTime&&s.text==o.Sb.payload}}(i))||(r=i1(i.Sb))&&n.push(r);for(i=(e=p(e=n.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?n.indexOf(s)-n.indexOf(o):n.indexOf(o)-n.indexOf(s)}))).next();!i.done;i=e.next())this.g.addCue(i.value)},d.destroy=function(){return this.g&&(cd(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},d.isTextVisible=function(){return"showing"==this.g.mode},d.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},U("shaka.text.SimpleTextDisplayer",Mt),Mt.prototype.setTextVisibility=Mt.prototype.setTextVisibility,Mt.prototype.isTextVisible=Mt.prototype.isTextVisible,Mt.prototype.destroy=Mt.prototype.destroy,Mt.prototype.append=Mt.prototype.append,Mt.prototype.remove=Mt.prototype.remove,U("shaka.util.Dom",fd),fd.removeAllChildren=ds,(d=Ct.prototype).append=function(e){for(var t=[].concat(q(this.i)),n={},i=(e=p(e)).next();!i.done;n={fd:n.fd},i=e.next())n.fd=i.value,t.some(function(r){return function(o){return bu(o,r.fd)}}(n))||this.i.push(n.fd);Xr(this)},d.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},d.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(i){return i.startTime<e||i.endTime>=t}),Xr(this,n>this.i.length),!0},d.isTextVisible=function(){return this.j},d.setTextVisibility=function(e){this.j=e},U("shaka.text.UITextDisplayer",Ct),Ct.prototype.setTextVisibility=Ct.prototype.setTextVisibility,Ct.prototype.isTextVisible=Ct.prototype.isTextVisible,Ct.prototype.remove=Ct.prototype.remove,Ct.prototype.destroy=Ct.prototype.destroy,Ct.prototype.append=Ct.prototype.append,U("shaka.text.WebVttGenerator",function(){}),dd.prototype.configure=function(e){this.g=e};var pd="m",Ja="a",gs="v",ms="av",g1="i",Qa="c",Za="tt";function el(){}function tl(e,t,n,i,r){var u,o=r in i,s=!0;for(u in t){var a=r+"."+u,l=o?i[r]:n[u];o||u in n?void 0===t[u]?void 0===l||o?delete e[u]:e[u]=Oi(l):l.constructor==Object&&t[u]&&t[u].constructor==Object?(e[u]||(e[u]=Oi(l)),a=tl(e[u],t[u],l,i,a),s=s&&a):typeof t[u]!=typeof l||null==t[u]||"function"!=typeof t[u]&&t[u].constructor!=l.constructor?(Ln("Invalid config, wrong type for "+a),s=!1):("function"==typeof n[u]&&n[u].length!=t[u].length&&ce("Unexpected number of arguments for "+a),e[u]=t[u]):(Ln("Invalid config, unrecognized key "+a),s=!1)}return s}function nl(e,t){for(var n={},i=n,r=0,o=0;!(0>(r=e.indexOf(".",r)));)(0==r||"\\"!=e[r-1])&&(i[o=e.substring(o,r).replace(/\\\./g,".")]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function vs(e,t){return e&&t}function kt(){}function gd(e){return new Ze(e=Fn(e)).Ya}function Gr(e,t,n){function i(u){ct(o).setUint32(s,u.byteLength,!0),s+=4,o.set(Q(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new E(2,6,6015);var r;r="string"==typeof t?da(t,!0):t,e=da(e=Fn(e),!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function md(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Gr(e,n=Fn(e).split("skd://").pop(),t))}function il(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function rl(){}function Qi(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(u,a,l){return P.shakaMediaKeysPolyfill&&"skd"==a&&(a=l.serverCertificate,u=Gr(u,l=gd(u),a)),u},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Rr(),minHdcpVersion:""},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(u){return vs([u],u)},sequenceMode:!1,enableAudioGroups:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Oo()||Uo()||ta()||Ri()),ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(u){return vs([u],u)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(u){return vs([u])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};(Oe("Web0S")||Zn()||Oe("CrKey"))&&(i.stallSkip=0);var r={trackSelectionCallback:function(u){return C(function(a){return a.return(u)})},downloadSizeCallback:function(u){var a;return C(function(l){return 1==l.g?navigator.storage&&navigator.storage.estimate?y(l,navigator.storage.estimate(),3):l.return(!0):l.return((a=l.h).usage+u<.95*a.quota)})},progressCallback:function(u,a){return vs([u,a])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0};var o="reload";Uo()||Oo()||Oe("Tizen 4")||ta()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(o="smooth");var s={drm:t,manifest:n,streaming:i,mediaSource:{codecSwitchingStrategy:o,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:r,abrFactory:function(){return new Ne},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return r.trackSelectionCallback=function(u){return C(function(a){return a.return(function m1(e,t){var n=e.filter(function(s){return"variant"==s.type}),i=[],r=jo(t,n.map(function(s){return s.language}));r&&(i=n.filter(function(s){return pe(s.language)==r})),0==i.length&&(i=n.filter(function(s){return s.primary})),0==i.length&&(n.map(function(s){return s.language}),i=n);var o=i.filter(function(s){return s.height&&480>=s.height});for(o.length&&(o.sort(function(s,u){return u.height-s.height}),i=o.filter(function(s){return s.height==o[0].height})),t=[],i.length&&(n=Math.floor(i.length/2),i.sort(function(s,u){return s.bandwidth-u.bandwidth}),t.push(i[n])),i=(e=p(e)).next();!i.done;i=e.next())(i=i.value).type!=le&&"image"!=i.type||t.push(i);return t}(u,s.preferredAudioLanguage))})},s}function Zi(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return tl(e,t,n||Qi(),i,"")}function v1(){this.g=null,this.h=[]}function ol(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=(e=p(e.h)).next();!i.done;i=e.next())n+=(i=i.value).state==t?i.duration:0;return n}function w1(){this.i=this.h=null,this.g=[]}function sl(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function vd(){this.u=this.A=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.M=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new v1,this.h=new w1}function N(e,t){he.call(this);var n=this;this.l=vl,this.sd=this.h=null,this.ba=!1,this.Fd=new Ie,this.Ac=new Ie,this.o=new Ie,this.lc=this.i=this.Hd=this.I=this.j=this.ja=this.K=this.mg=this.V=this.wa=this.M=this.zd=this.H=this.Ub=this.C=this.G=this.m=this.F=null,this.Ic=!1,this.Oe=this.s=null,this.bf=1e9,this.g=er(this),this.af={width:1/0,height:1/0},this.u=null,this.eb=new Pi(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.mediaSource.codecSwitchingStrategy),this.fb=this.g.preferredTextLanguage,this.Hc=this.g.preferredTextRole,this.Dc=this.g.preferForcedSubs,this.Cc=[],this.Jc=null,t&&t(this),this.V=function B1(e){return new dd({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},hb:function(){return e.hb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},vd:function(){return e.vd()},Cb:function(){return e.Cb()},ub:function(){return e.ub()},R:function(){return e.R()}},e.g.cmcd)}(this),this.F=function j1(e){return new Ee(function(t,n){e.s&&e.s.segmentDownloaded(t,n)},function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent(Pe("downloadheadersreceived",t))},function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent(Pe("downloadfailed",t))},function(t,n,i){var r=e.V;if(i=void 0===i?{}:i,r.g.enabled)if("HEAD"===n.method)Ji(r,n);else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}r.o=o}Ji(r,n,{ot:pd,su:!r.i})}}catch(c){zn("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",c)}break;case ln:t=i;try{if(r.g.enabled){var s=t.segment;o=0,s&&(o=s.endTime-s.startTime);var u={d:1e3*o,st:r.h.R()?"l":"v"};u.ot=function f1(e){if(0===e.type)return g1;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?ms:gs;if("audio"==t)return Ja;if("text"==t)return"application/mp4"===e.mimeType?Za:Qa}}(t);var a=u.ot===gs||u.ot===Ja||u.ot===ms||u.ot===Za,l=t.stream;l&&(a&&(u.bl=function h1(e,t){if(!(t=e.h.hb()[t]).length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}(r,l.type)),l.bandwidth&&(u.br=l.bandwidth/1e3)),a&&u.ot!==Za&&(u.tb=function d1(e,t){var n=e.h.ub();if(!n.length)return NaN;e=n[0];for(var i=(n=p(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case gs:return e.videoBandwidth||NaN;case Ja:return e.audioBandwidth||NaN;default:return e.bandwidth}}(r,u.ot)/1e3),Ji(r,n,u)}}catch(c){zn("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",c)}break;case 2:case 5:case 6:Ji(r,n,{ot:"k"});break;case 4:Ji(r,n,{ot:"o"})}})}(this),this.F.kf(this.g.streaming.forceHTTPS),this.A=null,Ss&&(this.A=Ss()),this.Fd.D(P,"online",function(){hl(n),n.ef()}),this.N={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.ff={name:"manifest-parser"},this.Ze={name:"manifest"},this.Tb={name:"media-source"},this.Se={name:"drm-engine"},this.Z={name:"load"},this.pf={name:"src-equals-drm-engine"},this.Vb={name:"src-equals"};var i=new Map;i.set(this.W,function(r,o){return an(function S1(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.Ac.D(t.mediaElement,"error",function(){var i=dl(e);i&&fi(e,i)})),e.h=t.mediaElement,Promise.resolve()}(n,r,o))}),i.set(this.N,function(r,o){return r.mediaElement&&(n.Ac.vb(),r.mediaElement=null),n.A&&!o.Gd&&n.A.release(),n.h=null,an(r=Promise.resolve())}),i.set(this.da,function(r,o){return an(yd(n,r,o))}),i.set(this.Tb,function(r){return r=function E1(e,t){var n,i,r;return C(function(u){if(1==u.g)return i=(n=e.g.textDisplayFactory)(),e.We=n,r=function U1(e,t,n,i){return new kh(e,t,n,i)}(t.mediaElement,i,function(a,l,c){wd(e,a,l,c)},e.K),r.configure(e.g.mediaSource),r.V=e.g.manifest.segmentRelativeVttTiming,y(u,r.K,2);e.G=r,F(u)})}(n,r),an(r)}),i.set(this.ff,function(r,o){return r=function A1(e,t,n){var i,r,o,s;return C(function(u){if(1==u.g)return t.mimeType=n.mimeType,t.uri=n.uri,r=e.F,e.lc=i=t.uri,o=e,y(u,ph(i,r,e.g.manifest.retryParameters,t.mimeType),2);o.Hd=u.h,e.I=e.Hd(),s=Oi(e.g.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(s.disableVideo=!0),e.I.configure(s),F(u)})}(n,r,o),an(r)}),i.set(this.Ze,function(r){return function I1(e,t){var n=t.uri;t=e.F,e.wa=new Fa(function(){return e.wb()}),e.wa.addEventListener("regionadd",function(o){zr(e,"timelineregionadded",o=o.region),e.A&&e.A.onDashTimedMetadata(o)}),e.ja=null,e.g.streaming.observeQualityChanges&&(e.ja=new cs(function(){return e.hb()}),e.ja.addEventListener("qualitychange",function(o){var s=o.quality;o=o.position,s=(new Map).set("mediaQuality",{bandwidth:s.bandwidth,audioSamplingRate:s.audioSamplingRate,codecs:s.codecs,contentType:s.contentType,frameRate:s.frameRate,height:s.height,mimeType:s.mimeType,channelsCount:s.channelsCount,pixelAspectRatio:s.pixelAspectRatio,width:s.width}).set("position",o),e.dispatchEvent(Pe("mediaqualitychanged",s))}));var o,s,u,i={networkingEngine:t,filter:function(o){return kd(e,o)},makeTextStreamsForClosedCaptions:function(o){return function V1(e,t){for(var n=new Set,i=p(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(r=(i=p(t.variants)).next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var o=p(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(!n.has(s=s.value)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new Be,l=r.closedCaptions.get(s);u={id:e.bf++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:le,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},t.textStreams.push(u),n.add(s)}}(e,o)},onTimelineRegionAdded:function(o){var s=e.wa;e:{for(var u=p(s.g),a=u.next();!a.done;a=u.next())if((a=a.value).schemeIdUri==o.schemeIdUri&&a.id==o.id&&a.startTime==o.startTime&&a.endTime==o.endTime){u=a;break e}u=null}null==u&&(s.g.add(o),o=new K("regionadd",new Map([["region",o]])),s.dispatchEvent(o))},onEvent:function(o){return e.dispatchEvent(o)},onError:function(o){return fi(e,o)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(o){var s=e.m?e.m.g:null;s&&e.m.s&&cl(e,s.keySystem,o)},onManifestUpdated:function(){var o=(new Map).set("isLive",e.R());e.dispatchEvent(Pe("manifestupdated",o)),e.A&&e.A.onManifestUpdated(e.R())},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()}},r=Date.now()/1e3;return new Re(C(function(l){if(1==l.g)return o=e,y(l,e.I.start(n,i),2);if(o.i=l.h,s=Pe("manifestparsed"),e.dispatchEvent(s),0==e.i.variants.length)throw new E(2,4,4036);(function P1(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))})(e.i),u=Date.now()/1e3,e.u.F=u-r,F(l)}),function(){return e.I.stop()})}(n,r)}),i.set(this.Se,function(r){return r=function M1(e,t){var n,i;return C(function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=Sd(e,{Kb:e.F,onError:function(o){fi(e,o)},Pd:function(o){Od(e,o)},onExpirationUpdated:function(o,s){Ud(e,o,s)},onEvent:function(o){e.dispatchEvent(o),"drmsessionupdate"==o.type&&i&&(i=!1,e.u.j=Date.now()/1e3-n,e.K&&Mh(e.K))}}),e.m.configure(e.g.drm),y(r,eh(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?y(r,e.m.Bc(t.mediaElement),3):y(r,kd(e,e.i),0)})}(n,r),an(r)}),i.set(this.Z,function(r,o){return an(function C1(e,t,n){var i,o,s,u,a,l,c,f,h,g,m,w,v,S,A;return C(function(M){switch(M.g){case 1:for(t.startTime=n.startTime,null!=e.Jc&&(t.startTime=e.Jc,e.Jc=null),i=t.mediaElement,e.lc=t.uri,e.H=new br({xd:function(){return i.playbackRate},td:function(){return i.defaultPlaybackRate},mf:function(k){i.playbackRate=k},Uf:function(k){i.currentTime+=k}}),s=function(){return Rd(e)},e.o.D(i,"playing",o=function(){return ws(e)}),e.o.D(i,"pause",o),e.o.D(i,"ended",o),e.o.D(i,"ratechange",s),function T1(e,t){if(t.lcevc.enabled){var n=e.ub();n&&n[0]&&n[0].videoMimeType==Es.ts&&(ea()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||ce("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),ys(e),null==e.K&&(e.K=new Fr(e.h,e.mg,t.lcevc),e.G&&(e.G.M=e.K))}else ys(e)}(e,e.g),u=e.g.abrFactory,e.s&&e.Oe==u||(e.Oe=u,e.s=u(),"function"!=typeof e.s.setMediaElement&&(Bn("AbrManager","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),e.s.configure(e.g.abr)),e.eb=new Pi(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel,e.g.mediaSource.codecSwitchingStrategy),e.fb=e.g.preferredTextLanguage,e.Hc=e.g.preferredTextRole,e.Dc=e.g.preferForcedSubs,pl(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(k,R,D){e.j&&k!=e.j.j&&Ts(e,k,!0,void 0!==R&&R,void 0===D?0:D)}),e.s.setMediaElement(i),mf(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes),e.j=function F1(e){return new Zh(e.i,{wd:function(){return e.C?e.C.md():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},S:e.G,Kb:e.F,onError:function(t){return fi(e,t)},onEvent:function(t){return e.dispatchEvent(t)},vh:function(){e.I&&e.I.update&&e.I.update()},Ye:function(t,n,i){e.C&&e.C.Vf(),ul(e),t=(new Map).set("start",t).set("end",n).set("contentType",i),e.dispatchEvent(Pe("segmentappended",t))},uh:function(t,n){(n=n.Qe)&&e.ja&&function jy(e,t,n){var i=function Py(e,t){var n=e.g.get(t);return n||e.g.set(t,n={Xc:[],Ff:null,contentType:t}),n}(e,t.contentType);(function _y(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.Xc;t.Xc=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.Xc=[]})(e,i),e={Qe:t,position:n},0<=(t=(i=i.Xc).findIndex(function(r){return r.position>=n}))?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.ja,n,t)},Af:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&!i.I&&["audio","video"].includes(t)){var r=0,o=p((n=new Yf(Q(n))).data);for(t=o.next();!t.done;t=o.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{for(r=new Uint8Array(r),o=0,t=(n=p(n.data)).next();!t.done;t=n.next())r.set(t=t.value,o),o+=t.length;Or(i,"cenc",r),i=i.l}}else i=Promise.resolve();return i},wh:function(t,n,i){wd(e,t,n,i)},le:function(t,n){return e.le(t,n)}})}(e),e.j.configure(e.g.streaming),e.l=pt,i.textTracks&&e.o.D(i.textTracks,"addtrack",function(k){k.track&&"chapters"===(k=k.track).kind&&xd(e,k)}),e.dispatchEvent(Pe("streaming")),a=null,(l=e.j.j)||(a=ci(e)?e.s.chooseVariant():null),c=[],h=p([(f=l||a).video,f.audio]),g=h.next();!g.done;g=h.next())(m=g.value)&&!m.segmentIndex&&c.push(m.createSegmentIndex());if(!(0<c.length)){M.B(2);break}return y(M,Promise.all(c),2);case 2:if(pl(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C=function _1(e,t){return new Hh(e.h,e.i,e.g.streaming,t,function(){e.Ub&&Yh(e.Ub,!0),e.j&&e.j.ad(),e.M&&ul(e)},function(n){return e.dispatchEvent(n)})}(e,t.startTime),e.Ub=function O1(e,t){(t=new fs(e.wa,e.R()||0<t)).addEventListener("enter",function(i){zr(e,"timelineregionenter",i.region)}),t.addEventListener("exit",function(i){zr(e,"timelineregionexit",i.region)}),t.addEventListener("skip",function(i){var r=i.region;i.seeking||(zr(e,"timelineregionenter",r),zr(e,"timelineregionexit",r))});var n=new zh(e.h);return n.g.add(t),e.ja&&n.g.add(e.ja),n}(e,t.Ud),w=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal),Ed(e,w),l){M.B(4);break}if(Ts(e,a,!0,!1,0),!e.g.streaming.startAtSegmentBoundary){M.B(4);break}return v=e.C.md(),y(M,function H1(e,t){var i,r,o,s;return C(function(u){return 1==u.g?(i=e.video,r=function(a,l){var c,f;return C(function(g){return 1==g.g?a?y(g,a.createSegmentIndex(),2):g.return(null):(f=(c=a.segmentIndex.Bb(l))?c.next().value:null)?g.return(f.startTime):g.return(null)})},y(u,r(e.audio,t),2)):3!=u.g?(o=u.h,y(u,r(i,t),3)):u.return(null!=(s=u.h)&&null!=o?Math.max(s,o):null!=s?s:null!=o?o:t)})}(a,v),6);case 6:e.C.ee(M.h);case 4:return e.C.de(),e.ac().find(function(k){return k.active})||((S=Nr(e.i.textStreams,e.fb,e.Hc,e.Dc)[0]||null)&&sl(e.u.h,S,!0),a&&(S?(a.audio&&function X1(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var i=pe(e.g.preferredTextLanguage);return n=pe(n.language),2==e.g.autoShowText?Po(n,i):3==e.g.autoShowText?(e=pe(t.language),Po(n,i)&&!Po(e,n)):(ce("Invalid autoShowText setting!"),!1)}(e,a.audio,S)&&(e.ba=!0),e.ba&&e.G.F.setTextVisibility(!0),jd(e)):e.ba=!1),S&&(e.g.streaming.alwaysStreamText||e.Ie())&&hs(e.j,S)),y(M,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),_d(e)),Kt(e),ci(e),e.i.variants.some(function(k){return k.primary}),(A=e.R())&&(e.g.streaming.liveSync||e.i.serviceDescription)&&e.o.D(i,"timeupdate",function(){return Nd(e)}),e.A&&e.A.onManifestUpdated(A),e.Ic=!0,e.o.ma(i,"loadedmetadata",function(){e.u.m=Date.now()/1e3-n.Ud}),F(M)}})}(n,r,o))}),i.set(this.pf,function(r,o){return r=function k1(e,t,n){var i,r,o,u,a,l;return C(function(c){return 1==c.g?(i=ze,r=Date.now()/1e3,o=!0,e.m=Sd(e,{Kb:e.F,onError:function(f){fi(e,f)},Pd:function(f){Od(e,f)},onExpirationUpdated:function(f,h){Ud(e,f,h)},onEvent:function(f){e.dispatchEvent(f),"drmsessionupdate"==f.type&&o&&(o=!1,e.u.j=Date.now()/1e3-r)}}),e.m.configure(e.g.drm),u=Hi(n.uri||""),"application/x-mpegurl"==(a=Es[u])&&Bo()&&(a="application/vnd.apple.mpegurl"),a||(a="video/mp4"),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?Jn(n.mimeType):a,codecs:n.mimeType?on(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.ka,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Z=!0,y(c,eh(e.m,[l],[]),2)):y(c,e.m.Bc(t.mediaElement),0)})}(n,r,o),an(r)}),i.set(this.Vb,function(r,o){return function D1(e,t,n){function i(){return ws(e)}t.uri=n.uri,t.startTime=n.startTime,e.lc=t.uri;var r=t.mediaElement;e.C=new qh(r);var o=!1;e.Cc.push(function(){o=!0}),null!=t.startTime&&e.C.ee(t.startTime),e.H=new br({xd:function(){return r.playbackRate},td:function(){return r.defaultPlaybackRate},mf:function(a){r.playbackRate=a},Uf:function(a){r.currentTime+=a}}),Ed(e,e.g.streaming.rebufferingGoal),e.o.D(r,"playing",i),e.o.D(r,"pause",i),e.o.D(r,"ended",i),e.o.D(r,"ratechange",function(){return Rd(e)}),"none"!=r.preload&&e.o.ma(r,"loadedmetadata",function(){e.u.m=Date.now()/1e3-n.Ud}),r.audioTracks&&(e.o.D(r.audioTracks,"addtrack",function(){return Kt(e)}),e.o.D(r.audioTracks,"removetrack",function(){return Kt(e)}),e.o.D(r.audioTracks,"change",function(){return Kt(e)})),r.textTracks&&(e.o.D(r.textTracks,"addtrack",function(a){if(a.track)switch(a=a.track,a.kind){case"metadata":!function L1(e,t){if("metadata"==t.kind){t.mode="hidden",e.o.D(t,"cuechange",function(){if(t.activeCues)for(var i=p(t.activeCues),r=i.next();!r.done;r=i.next())Td(e,(r=r.value).startTime,r.endTime,r.type,r.value),e.A&&e.A.onCueMetadataChange(r.value)});var n=new ie(function(){for(var i=function b1(e){return Array.from(e.h.textTracks).filter(function(t){return"metadata"==t.kind})}(e),r=(i=p(i)).next();!r.done;r=i.next())r.value.mode="hidden"}).kc().U(.5);e.Cc.push(function(){n.stop()})}}(e,a);break;case"chapters":xd(e,a);break;default:Kt(e)}}),e.o.D(r.textTracks,"removetrack",function(){return Kt(e)}),e.o.D(r.textTracks,"change",function(){return Kt(e)}));var s=Hi(t.uri);r.src=function c1(e,t,n){try{if(!e.g.enabled)return t;var i=Ya(e);e:{switch(n.toLowerCase()){case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":var r=ms;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":r=pd;break e}r=void 0}return i.ot=r,i.su=!0,$a(t,ps(i))}catch(s){return zn("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}(e.V,t.uri,Es[s]),(Zn()||Oe("Web0S"))&&r.load(),e.l=Dt,e.dispatchEvent(Pe("streaming"));var u=new Se;return zi(r,HTMLMediaElement.HAVE_METADATA,e.o,function(){e.C.de(),u.resolve()}),zi(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,function(){var a;return C(function(l){return 1==l.g?(function R1(e){var t=e.g.preferredAudioLanguage;""!=t&&e.ag(t,e.g.preferredVariantRole)}(e),(a=Wr(e)).find(function(c){return"disabled"!=c.mode})?(0<a.length&&(e.ba=!0),l.B(2)):y(l,new Promise(function(c){e.o.ma(r.textTracks,"change",c),new ie(c).U(1)}),2)):o?l.return():(function N1(e){var t=e.g.preferredTextLanguage;""!=t&&e.bg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),void F(l))})}),r.error?u.reject(dl(e)):"none"==r.preload&&(ce('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.o.ma(r,"error",function(){u.reject(dl(e))}),new Re(u,function(){return u.reject(new E(2,7,7001)),Promise.resolve()}).ga(function(){if(e.R()&&e.g.streaming.liveSync&&e.o.D(r,"timeupdate",function(){return Nd(e)}),e.A){var a=e.R();if(e.A.onManifestUpdated(a),a){var l=e.wb().end;e.o.D(r,"progress",function(){var c=e.wb().end;l!=c&&(e.A.onManifestUpdated(e.R()),l=c)})}}e.Ic=!0})}(n,r,o)}),this.Xa=new sd(this.N,{Ug:function(r,o,s,u){var a=null;return r==n.N&&(a=s==n.N?n.N:n.W),r==n.W&&(a=s==n.N||o.mediaElement!=u.mediaElement?n.N:s==n.W?n.W:s==n.Tb||s==n.Z?n.Tb:s==n.Vb?n.pf:null),r==n.Tb&&(a=s==n.Z&&o.mediaElement==u.mediaElement?n.ff:n.da),r==n.ff&&(a=gl(n.Z,n.Ze,n.da,s,o,u)),r==n.Ze&&(a=gl(n.Z,n.Se,n.da,s,o,u)),r==n.Se&&(a=gl(n.Z,n.Z,n.da,s,o,u)),r==n.pf&&(a=s==n.Vb&&o.mediaElement==u.mediaElement?n.Vb:n.da),(r==n.Z||r==n.Vb)&&(a=n.da),r==n.da&&(a=u.mediaElement&&o.mediaElement==u.mediaElement?n.W:n.N),a},Gg:function(r,o,s){return n.dispatchEvent(Pe("onstatechange",(new Map).set("state",r.name))),i.get(r)(o,s)},handleError:function(r){return C(function(o){return 1==o.g?y(o,yd(n,r,{mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0}),2):o.return(r.mediaElement?n.W:n.N)})},th:function(r){n.dispatchEvent(Pe("onstateidle",(new Map).set("state",r.name)))}}),this.Cd=new ie(function(){return function K1(e){for(var n=Date.now()/1e3,i=!1,r=p(e.i.variants),o=r.next();!o.done;o=r.next())0<(o=o.value).disabledUntilTime&&o.disabledUntilTime<=n&&(o.disabledUntilTime=0,i=!0,u=void 0,u="",(s=o).video&&(u+="video:"+s.video.id),s.audio&&(u=u+(u?"&":"")+"audio:"+s.audio.id));var s,u;e.i.variants.every(function(s){return 0===s.disabledUntilTime})&&e.Cd.stop(),i&&tr(e,!0,void 0,!1,!1)}(n)}),e&&this.Bc(e,!0)}function ys(e){null!=e.K&&(Mh(e.K),e.K.release(),e.K=null)}function Pe(e,t){return new K(e,t)}function yd(e,t,n){var i,r,o,s,u,a,l,c,f;return C(function(h){switch(h.g){case 1:return e.l!=Xt&&(e.l=vl),i=e.Cc.map(function(g){return g()}),e.Cc=[],y(h,Promise.all(i),2);case 2:if(e.dispatchEvent(Pe("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.wa&&(e.wa.release(),e.wa=null),t.mediaElement&&e.o.vb(),e.Cd.stop(),e.Ub&&(e.Ub.release(),e.Ub=null),e.zd&&(e.zd.stop(),e.zd=null),!e.I){h.B(3);break}return y(h,e.I.stop(),4);case 4:e.I=null,e.Hd=null;case 3:if(!e.s){h.B(5);break}return y(h,e.s.stop(),5);case 5:if(!e.j){h.B(7);break}return y(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.C&&(e.C.release(),e.C=null),!e.G){h.B(9);break}return y(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.A&&!n.Gd&&e.A.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.B(11);break}return y(h,new Promise(function(g){return new ie(g).U(.1)}),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.B(13);break}return y(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.lc=null,e.M=null,e.i){for(r=p(e.i.variants),o=r.next();!o.done;o=r.next())for(u=p([(s=o.value).audio,s.video]),a=u.next();!a.done;a=u.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=p(e.i.textStreams),a=c.next();!a.done;a=c.next())(f=a.value).segmentIndex&&f.segmentIndex.release()}e.i=null,e.u=new vd,e.We=null,fl(e),F(h)}})}function wd(e,t,n,i){for(var r=(t=p(t)).next();!r.done;r=t.next())if((r=r.value).data&&r.cueTime&&r.frames){var o=r.cueTime+n,s=i;s&&o>s&&(s=o);for(var u=p(r.frames),a=u.next();!a.done;a=u.next())Td(e,o,s,"org.id3",a.value);e.A&&e.A.onHlsTimedMetadata(r,o)}}function Td(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(Pe("metadata",t))}function xd(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new ie(function(){t.mode="hidden"}).kc().U(.5);e.Cc.push(function(){n.stop()})}}function Sd(e,t){return new ts(t,e.g.drm.updateExpirationTime)}function Ed(e,t){e.M=new T0,e.M.g=ji,jf(e.M,t,Math.min(.5,t/2)),fl(e),e.zd=new ie(function(){ul(e)}).La(.25)}function ul(e){switch(e.l){case Dt:if(e.h.ended)var t=!0;else{var n=Sa(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case pt:e:if(e.h.ended||Rh(e.G))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Eb();var i=Sa(e.h.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=yh(e.h.buffered,e.h.currentTime);var r=t,o=(n=e.M).h.get(n.g);t=n.g,n.g=i=r||i>=o?Go:ji,t!=i&&fl(e)}function Ad(e){if(e.I){var t=Oi(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.I.configure(t)}if(e.m&&e.m.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{Dd(e,e.i)}catch(o){fi(e,o)}e.s&&ci(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||tr(e)}if(e.F&&e.F.kf(e.g.streaming.forceHTTPS),e.G&&(e.G.configure(e.g.mediaSource),e.G.V=e.g.manifest.segmentRelativeVttTiming,e.We!=(t=e.g.textDisplayFactory))){var n=t(),i=e.G,r=i.F;i.F=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.h&&(i.h.j=n),e.We=t,e.j&&(n=(t=e.j).h.get(le))&&$i(t,n.stream,!0,0,!0)}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),_d(e)),e.M&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),jf(e.M,t,Math.min(.5,t/2))),e.i&&pl(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.V&&e.V.configure(e.g.cmcd)}function Wr(e){return Array.from(e.h.textTracks).filter(function(t){return"metadata"!=t.kind&&"chapters"!=t.kind&&"Shaka Player TextTrack"!=t.label})}function Id(e){return Array.from(e.h.textTracks).filter(function(t){return"chapters"==t.kind})}function al(e,t){var n,i;return C(function(r){switch(r.g){case 1:return n=Hi(t),(i=G1[n])?r.return(i):(ee(r,2),y(r,gh(t,e.F,e.g.streaming.retryParameters),4));case 4:i=r.h,ue(r,3);break;case 2:te(r);case 3:if(i)return r.return(i);throw new E(1,2,2011,n)}})}function Md(e,t,n,i,r,o,s){var a,l,c;return C(function(f){if(1==f.g)return"text/vtt"!=r||s.length?y(f,ll(e,t,e.F,e.g.streaming.retryParameters),3):f.B(2);2!=f.g&&(a=Cd(e,f.h,r,s),l=new Blob([a],{type:"text/vtt"}),t=ja(l),r="text/vtt"),c=document.createElement("track");var h=e.V,g=t;try{if(h.g.enabled){var m=Ya(h);m.ot=Qa,m.su=!0;var v=$a(g,ps(m))}else v=g}catch(T){zn("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",T),v=g}return c.src=v,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),f.return(c)})}function ll(e,t,n,i){var r,o;return C(function(u){if(1==u.g){r=ln,(o=Ye([t],i)).method="GET";var a=e.V;try{a.g.enabled&&Ji(a,o,{ot:Qa,su:!0})}catch(l){zn("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return y(u,n.request(r,o).promise,2)}return u.return(u.h.data)})}function Cd(e,t,n,i){var r=Ge[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Q(t),function l1(e,t){function n(o){for(var s=o,u=p(t),a=u.next();!a.done;a=u.next())(a=a.value).end&&a.start<o&&(s+=a.end-a.start);return(10>(o=Math.floor(s/3600))?"0":"")+o+":"+(10>(u=Math.floor(s/60%60))?"0":"")+u+":"+(10>(a=Math.floor(s%60))?"0":"")+a+"."+(100>(s=Math.floor(1e3*s%1e3))?10>s?"00":"0":"")+s}var i=Wa(e,[]);e="WEBVTT\n\n";for(var r=(i=p(i)).next();!r.done;r=i.next())e+=n((r=r.value).startTime)+" --\x3e "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case dn:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}(t=n.parseMedia(t,e),i);throw new E(2,2,2014,n)}function er(e){var t=Qi();return t.streaming.failureCallback=function(n){if(e.R()){var i=null;1001==n.code||1002==n.code?i=1:1003==n.code&&(i=.1),null!=i&&(n.severity=1,e.ef(i))}},t.textDisplayFactory=function(){return e.sd?new Ct(e.h,e.sd):new Mt(e.h)},t}function kd(e,t){return C(function(n){if(1==n.g)return y(n,function q1(e){return C(function(t){if(1==t.g)return y(t,function o0(e){return C(function(t){return 1==t.g?y(t,vf(e,0<e.offlineSessionIds.length),2):(function s0(e){e.textStreams=e.textStreams.filter(function(t){return Lo(t=Ft(t.mimeType,t.codecs))})}(e),y(t,function u0(e){var t,n,i,r,o,s;return C(function(l){switch(l.g){case 1:t=[],n=p(e.imageStreams),i=n.next();case 2:if(i.done){l.B(4);break}if(Ko.has(o=(r=i.value).mimeType)){l.B(5);break}if(!(s=f0.get(o))){Ko.set(o,!1),l.B(5);break}return y(l,function a0(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(s),7);case 7:Ko.set(o,l.h);case 5:Ko.get(o)&&t.push(r),i=n.next(),l.B(2);break;case 4:e.imageStreams=t,F(l)}})}(e),0))})}(e),2);if(!e.variants.some(Ho))throw new E(2,4,4032);F(t)})}(t),2);Dd(e,t),F(n)})}function Dd(e,t){if(e.l!=Xt){for(var n=e.g.restrictions,i=e.af,r=!1,o=p(t.variants),s=o.next();!s.done;s=o.next()){var u=(s=s.value).allowedByApplication;s.allowedByApplication=Fo(s,n,i),u!=s.allowedByApplication&&(r=!0)}if(r&&e.j&&Kt(e),(n=e.m?e.m.g:null)&&e.m.s)for(r=(i=p(t.variants)).next();!r.done;r=i.next())cl(e,n.keySystem,(r=r.value).video),cl(e,n.keySystem,r.audio);Bd(e,t)}}function cl(e,t,n){if(n)for(var i=(n=p(n.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t)for(var r=(i=p(i.initData||[])).next();!r.done;r=i.next())Or(e.m,(r=r.value).initDataType,r.initData)}function fl(e){var t=e.Ge();if(e.u&&e.M&&e.C){var n=e.H;n.j=t,Wh(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),ws(e)}t=(new Map).set("buffering",t),e.dispatchEvent(Pe("buffering",t))}function Rd(e){var t=e.h.playbackRate;0!=t&&(e.H&&e.H.set(t),t=Pe("ratechange"),e.dispatchEvent(t))}function ws(e){if(e.u&&e.M){var t=e.u.g,n="playing";e.M.g==ji?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var i=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Pe("statechanged",n)))}}function Nd(e){if(e.R()){var t=e.wb();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync)var n=e.g.streaming.liveSyncMaxLatency,i=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,i=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var r=e.h.playbackRate,o=t.end-e.h.currentTime,s=0;if(e.l==Dt){var u=e.h.buffered;0<u.length&&(s=u.end(u.length-1),s=Math.max(i,s-t.end))}n&&i&&o-s>n?r!=i&&e.lg(i):1!==r&&0!==r&&e.Bf()}}}function ci(e){try{Bd(e,e.i)}catch(n){return fi(e,n),!1}var t=Af(e.i.variants);return t=e.eb.create(t),e.s.setVariants(Array.from(t.values())),!0}function tr(e,t,n,i,r){var o;t=void 0===t||t,n=void 0===n?0:n,i=void 0!==i&&i,r=void 0===r||r,(o=ci(e)?e.s.chooseVariant():null)&&Ts(e,o,r,t,n,i)}function Ts(e,t,n,i,r,o){o=void 0!==o&&o;var s=e.j.j;if(t==s)i&&td(e.j,t,i,r,!0);else{var u=e.u.h;u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),td(e.j,t,i,r,o,n),i=null,s&&(i=Li(s)),t=Li(t),n?(n=(new Map).set("oldTrack",i).set("newTrack",t),e.K&&Ch(e.K,t,e.De()),nr(e,n=Pe("adaptation",n))):Pd(e,i,t)}}function Ld(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),Pd(e,n=sa(n),t=sa(t))}function Kt(e){nr(e,Pe("trackschanged"))}function Pd(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.K&&Ch(e.K,n,e.De()),nr(e,n=Pe("variantchanged",t))}function xs(e){nr(e,Pe("textchanged"))}function jd(e){nr(e,Pe("texttrackvisibility"))}function _d(e){e.g.abr.enabled||hl(e),nr(e,Pe("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function hl(e,t){if(t=void 0===t||t,e.l==pt){e.Cd.stop();for(var n=p(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&ci(e)}}function fi(e,t){if(e.l!=Xt){2===t.severity&&hl(e,!1);var n=Pe("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function zr(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Pe(t,n))}function dl(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new E(2,3,3016,t,n,e.h.error.message)}function Od(e,t){if(e.j){var n=Pe("keystatuschanged");e.dispatchEvent(n);var i=Object.keys(t),r=1==i.length&&"00"==i[0];if(n=!1,i.length)for(var o=(i=p(e.i.variants)).next();!o.done;o=i.next()){var s=[];(o=o.value).audio&&s.push(o.audio),o.video&&s.push(o.video);for(var u=(s=p(s)).next();!u.done;u=s.next()){var a=u.value;if(u=o.allowedByKeySystem,a.keyIds.size){o.allowedByKeySystem=!0;for(var l=(a=p(a.keyIds)).next();!l.done;l=a.next())l=l.value,l=t[r?"00":l],o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!qd.includes(l)}u!=o.allowedByKeySystem&&(n=!0)}}(!n||ci(e))&&((t=e.j.j)&&!t.allowedByKeySystem&&tr(e),n&&Kt(e))}}function Ud(e,t,n){e.I&&e.I.onExpirationUpdated&&e.I.onExpirationUpdated(t,n),t=Pe("expirationupdated"),e.dispatchEvent(t)}function pl(e,t,n){0<t&&(e.R()||e.ig(t)),n<(t=e.getDuration())&&(e.R()||e.Ja(n))}function Bd(e,t){e=e.m?e.m.ud():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var i=!1,r=!1,o=new Set,s=new Set,u=(t=p(t.variants)).next();!u.done;u=t.next()){var a=[];(u=u.value).audio&&a.push(u.audio),u.video&&a.push(u.video);for(var l=(a=p(a)).next();!l.done;l=a.next())if((l=l.value).keyIds.size)for(var c=(l=p(l.keyIds)).next();!c.done;c=l.next()){c=c.value;var f=e[n?"00":c];f?qd.includes(f)&&s.add(f):o.add(c)}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw new E(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)})}function nr(e,t){C(function(n){if(1==n.g)return y(n,Promise.resolve(),2);e.l!=Xt&&e.dispatchEvent(t),F(n)})}function Fd(e){for(var t=new Set,n=(e=p(e)).next();!n.done;n=e.next())t.add((n=n.value).language?pe(n.language):"und");return t}function bd(e){for(var t=new Map,n=new Map,i=(e=p(e)).next();!i.done;i=e.next()){var r="und",o=[];(i=i.value).language&&(r=pe(i.language)),(o="variant"==i.type?i.audioRoles:i.roles)&&o.length||(o=[""]),t.has(r)||t.set(r,new Set);for(var s=(o=p(o)).next();!s.done;s=o.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var u=[];return t.forEach(function(a,l){for(var c=(a=p(a)).next();!c.done;c=a.next()){c=c.value;var f=null;n.has(l)&&n.get(l).has(c)&&(f=n.get(l).get(c)),u.push({language:l,role:c,label:f})}}),u}function hi(){return new E(2,7,7e3)}function gl(e,t,n,i,r,o){return i==e&&r.mediaElement==o.mediaElement&&r.uri==o.uri&&r.mimeType==o.mimeType?t:n}function ml(e){return new Promise(function(t,n){e.Mb=function(){return n(hi())},e.Od=function(){return t()},e.onError=function(i){return n(i)},e.Qd=function(){return n(hi())}})}U("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",pg:"s",OTHER:"o"}),U("shaka.util.ConfigUtils",el),el.convertToConfigObject=nl,el.mergeConfigObjects=tl,U("shaka.util.FairPlayUtils",kt),kt.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Le(t.data)}catch{return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=Bt(qt(n)))}},kt.expressplayFairPlayRequest=function(e,t){il(e,t)},kt.conaxFairPlayRequest=function(e,t){il(e,t)},kt.ezdrmFairPlayRequest=function(e,t){il(e,t)},kt.verimatrixFairPlayRequest=function(e,t){2===e&&(e=ri(e=Q(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=yn("spc="+e))},kt.expressplayInitDataTransform=function(e,t,n){return md(e,t,n)},kt.conaxInitDataTransform=function(e,t,n){if("skd"!==t)return e;t=n.serverCertificate,n=Fn(e).split("skd://").pop().split("?").shift(),n=P.atob(n);var i=new ArrayBuffer(2*n.length);i=new Uint16Array(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return Gr(e,i,t)},kt.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Gr(e,n=Fn(e).split(";").pop(),t))},kt.verimatrixInitDataTransform=function(e,t,n){return md(e,t,n)},kt.initDataTransform=Gr,kt.defaultGetContentId=gd,kt.isFairPlaySupported=function(){var e;return C(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ee(t,2),y(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(te(t),t.return(!1))})},U("shaka.util.PlayerConfiguration",rl),rl.mergeConfigObjects=Zi,rl.createDefault=Qi,Qe(N,he),(d=N.prototype).destroy=function(){var t,n,e=this;return C(function(i){switch(i.g){case 1:return e.l==Xt?i.return():(ys(e),e.l=Xt,(t={mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0}).Gd=!1,n=Kr(e.Xa,function(){return{node:e.N,payload:t,Gb:!1}}),y(i,new Promise(function(r){n.dc=function(){},n.Od=function(){r()},n.Mb=function(){r()},n.onError=function(){r()},n.Qd=function(){r()}}),2));case 2:return y(i,e.Xa.destroy(),3);case 3:if(e.Fd&&(e.Fd.release(),e.Fd=null),e.Ac&&(e.Ac.release(),e.Ac=null),e.o&&(e.o.release(),e.o=null),e.Oe=null,e.g=null,e.u=null,e.sd=null,e.V=null,!e.F){i.B(4);break}return y(i,e.F.destroy(),5);case 5:e.F=null;case 4:e.s&&(e.s.release(),e.s=null),he.prototype.release.call(e),F(i)}})},d.Bc=function(e,t){if(t=void 0===t||t,this.l==Xt)return Promise.reject(hi());var n={mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0};n.mediaElement=e,Jt()||(t=!1);var i=t?this.Tb:this.W;return(e=Kr(this.Xa,function(){return{node:i,payload:n,Gb:!1}})).dc=function(){},ml(e)},d.vg=function(e){this.mg=e},d.detach=function(){var e=this;if(this.l==Xt)return Promise.reject(hi());var t=Kr(this.Xa,function(){return{node:e.N,payload:{mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0},Gb:!1}});return t.dc=function(){},ml(t)},d.uf=function(e,t){var n=this;if(e=void 0===e||e,t=void 0!==t&&t,this.l==Xt)return Promise.reject(hi());this.Ic=!1,Jt()||(e=!1),ys(this);var i={mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0};return i.Gd=t,(t=Kr(this.Xa,function(r){var o=r.mediaElement&&e?n.Tb:r.mediaElement?n.W:n.N;return i.mediaElement=r.mediaElement,{node:o,payload:i,Gb:!1}})).dc=function(){},ml(t)},d.Sh=function(e){this.Jc=e},d.load=function(e,t,n){var i=this;if(this.Jc=null,this.Ic=!1,this.l==Xt)return Promise.reject(hi());this.dispatchEvent(Pe("loading"));var r={mediaElement:null,mimeType:null,startTime:null,Ud:NaN,uri:null,Gd:!0};r.uri=e,r.Ud=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var o=function x1(e,t){if(!Jt())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=Hi(i),n=Es[n]),n){if(""==(t.mediaElement||pf()).canPlayType(n))return!1;if(!Jt()||!(n in At)&&!(Hi(i)in bn)||("application/x-mpegurl"===n||"application/vnd.apple.mpegurl"===n)&&e.g.streaming.preferNativeHls)return!0;if(Bo())return e.g.streaming.useNativeHlsOnSafari}return!1}(this,r)?this.Vb:this.Z,s=Kr(this.Xa,function(u){return null==u.mediaElement?null:(r.mediaElement=u.mediaElement,{node:o,payload:r,Gb:!0})});return this.u=new vd,s.dc=function(){},new Promise(function(u,a){s.Qd=function(){return a(new E(2,7,7002))},s.Od=function(){u(),i.dispatchEvent(Pe("loaded"))},s.Mb=function(){return a(hi())},s.onError=function(l){return a(l)}})},d.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=nl(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Bn("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Bn("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),null==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var n=Zi(this.g,e,er(this));return Ad(this),n},d.getConfiguration=function(){var e=er(this);return Zi(e,this.g,er(this)),e},d.Jg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.wb().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},d.Fh=function(){for(var e in this.g)delete this.g[e];Zi(this.g,er(this),er(this)),Ad(this)},d.Pg=function(){return this.l},d.De=function(){return this.i?this.i.type:null},d.Tg=function(){return this.h},d.Cb=function(){return this.F},d.Ce=function(){return this.lc},d.Lf=function(){return this.A?this.A:null},d.R=function(){return this.i?this.i.presentationTimeline.R():!(!this.h||!this.h.src)&&this.h.duration==1/0},d.Ib=function(){return!!this.i&&this.i.presentationTimeline.Ib()},d.kh=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},d.wb=function(){if(!this.Ic)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.$b(),end:e.ib()}}return this.h&&this.h.src&&(e=this.h.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},d.hh=function(){this.R()&&(this.h.currentTime=this.wb().end)},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.m?this.m.g:null},d.Mc=function(){return this.m?this.m.Mc():1/0},d.Be=function(){return this.m?this.m.Be():[]},d.ud=function(){return this.m?this.m.ud():{}},d.Ge=function(){return!!this.M&&this.M.g==ji},d.vd=function(){return this.h?this.H?this.H.i:1:0},d.lg=function(e){0==e?ce("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.H.set(e),this.l==pt&&(this.s.playbackRateChanged(e),ed(this.j,1<Math.abs(e))))},d.Bf=function(){var e=this.H.td();this.l==Dt&&this.H.set(e),this.l==pt&&(this.H.set(e),this.s.playbackRateChanged(e),ed(this.j,!1))},d.ub=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=p(this.i.variants),r=i.next();!r.done;r=i.next())if(Ho(r=r.value)){var o=Li(r);o.active=r==e,o.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(s){return sa(s)}):[]},d.ac=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=p(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=qo(i=i.value);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Wr(this).map(function(o){return Sf(o)}):[]},d.Og=function(){return this.i?this.i.imageStreams.map(function(e){return ra(e)}):[]},d.ah=function(e,t){var i,r,o,u,a,l,c,f,h,g,m,w,v,T,x,S,A,I,M,n=this;return C(function(k){return 1==k.g?n.i?(i=n.i.imageStreams.find(function(R){return R.id==e}))?i.segmentIndex?k.B(3):y(k,i.createSegmentIndex(),3):k.return(null):k.B(2):2!=k.g&&null!=(r=i.segmentIndex.find(t))&&(o=i.segmentIndex.get(r),u=/(\d+)x(\d+)/.exec(o.tilesLayout||i.tilesLayout))?(a=i.width||0,l=i.height||0,c=parseInt(u[1],10),f=parseInt(u[2],10),h=a/c,g=l/f,m=c*f,w=o.j-o.startTime,v=o.A||w/m,T=o.startTime,S=x=0,1<m&&(A=Math.floor((t-o.startTime)/v),T=o.startTime+A*v,x=A%c*h,S=Math.floor(A/c)*g),I=!1,(M=o.u)&&(I=!0,g=M.height,x=M.positionX,S=M.positionY,h=M.width),k.return({imageHeight:l,imageWidth:a,height:g,positionX:x,positionY:S,startTime:T,duration:v,uris:o.Ca(),width:h,sprite:I})):k.return(null)})},d.cg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(i){return i.id==e.id});t&&t!=this.j.o&&(sl(this.u.h,t,!1),hs(this.j,t),xs(this),this.fb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){for(var n=(t=p(t=Wr(this))).next();!n.done;n=t.next())(n=n.value).mode=oa(n)==e.id?this.ba?"showing":"hidden":"disabled";xs(this)}},d.hf=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.g.abr.enabled&&ce("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find(function(r){return r.id==e.id});i&&Ho(i)&&(Ts(this,i,!1,t,n),this.eb=new Pf(i),ci(this))}else if(this.h&&this.h.audioTracks)for(n=(t=p(t=Array.from(this.h.audioTracks))).next();!n.done;n=t.next())if(oa(n=n.value)==e.id){Ld(this,n);break}},d.Ig=function(){return bd(this.ub())},d.Zg=function(){return bd(this.ac())},d.Hg=function(){return Array.from(Fd(this.ub()))},d.Yg=function(){return Array.from(Fd(this.ac()))},d.ag=function(e,t,n,i){if(n=void 0===n?0:n,i=void 0===i?0:i,this.i&&this.C){this.eb=new Pi(e,t||"",n,"","",this.g.mediaSource.codecSwitchingStrategy),e=function(s,u){return s.video||u.video?s.video&&u.video?Math.abs((s.video.height||0)-(u.video.height||0))+Math.abs((s.video.width||0)-(u.video.width||0)):1/0:0},t=this.j.j;var r=this.eb.create(this.i.variants);n=null;for(var o=(r=p(r.values())).next();!o.done;o=r.next())o=o.value,(!n||e(n,t)>e(o,t))&&(n=o);n?(e=Li(n),this.hf(e,!0,i)):tr(this)}else this.h&&this.h.audioTracks&&(i=Nr(this.ub(),e,t||"",!1)[0])&&this.hf(i)},d.bg=function(e,t,n){n=void 0!==n&&n,this.i&&this.C?(this.fb=e,this.Hc=t||"",this.Dc=n,(e=Nr(this.i.textStreams,this.fb,this.Hc,this.Dc)[0]||null)&&e!=this.j.o&&(sl(this.u.h,e,!1),this.g.streaming.alwaysStreamText||this.Ie())&&(hs(this.j,e),xs(this))):(e=Nr(this.ac(),e,t||"",n)[0])&&this.cg(e)},d.Ih=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.C){for(var i=null,r=p(this.i.variants),o=r.next();!o.done;o=r.next())if((o=o.value).audio.label==e){i=o;break}null!=i&&(this.eb=new Pi(i.language,"",0,"",e,this.g.mediaSource.codecSwitchingStrategy),tr(this,t,n))}else if(this.h&&this.h.audioTracks){for(t=null,i=(n=p(n=Array.from(this.h.audioTracks))).next();!i.done;i=n.next())(i=i.value).label==e&&(t=i);t&&Ld(this,t)}},d.Ie=function(){var e=this.ba;return this.G?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Wr(this).some(function(t){return"showing"==t.mode}):e},d.Mf=function(){return this.h&&this.h.src&&this.h.textTracks?Id(this).map(function(e){return Sf(e)}):[]},d.Kg=function(e){var t=pe(e),n=Id(this).filter(function(u){return pe(u.language)==t});if(!n||!n.length)return[];e=[];for(var i=new Set,r=(n=p(n)).next();!r.done;r=n.next())if((r=r.value)&&r.cues)for(var o=(r=p(r.cues)).next();!o.done;o=r.next()){var s=o.value;(o=s.id)&&""!=o||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},i.has(o)||(e.push(s),i.add(o))}return e},d.Nh=function(e){if(this.ba!=(e=!!e)){if(this.ba=e,this.l==pt)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||0<(e=Nr(this.i.textStreams,this.fb,this.Hc,this.Dc)).length&&(hs(this.j,e[0]),xs(this)):function qy(e){var t=e.h.get(le);t&&(Hr(t),Ga(t).catch(function(){}),e.h.delete(le)),e.o=null}(this.j));else if(this.h&&this.h.src&&this.h.textTracks)for(var t=Wr(this),n=(t=p(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");jd(this)}},d.Wg=function(){if(!this.R())return null;var e=this.Xa.l,t=0;if(this.C)t=this.C.md();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},d.Nf=function(){if(!this.R())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null},d.hb=function(){if(this.l==pt)return this.G.hb();var e={total:[],audio:[],video:[],text:[]};return this.l==Dt&&(e.total=Vn(this.h.buffered)),e},d.getStats=function(){if(this.l!=pt&&this.l!=Dt)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};ws(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.u;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.u.M=this.C.xf(),this.u.N=this.C.yf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.u;var i=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=i,this.u.H=Number(n.corruptedVideoFrames)}n=this.m&&(n=this.m).H?n.H:NaN,this.u.s=n,this.l==pt&&((n=this.j.j)&&(this.u.A=(this.H?this.H.i:1)*n.bandwidth),n&&n.video&&(i=n.video.height||NaN,(t=this.u).o=n.video.width||NaN,t.l=i),this.R()&&(n=this.Nf().valueOf()+1e3*this.wb().end,this.u.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g),n=this.s.getBandwidthEstimate(),this.u.u=n),this.l==Dt&&(t=e.videoHeight||NaN,(n=this.u).o=e.videoWidth||NaN,n.l=t);var r=this.u;e=r.o,n=r.l,t=r.A,i=r.I;for(var o=r.K,s=r.H,u=r.N,a=r.M,l=r.u,c=r.i,f=r.m,h=r.F,g=r.j,m=ol(r.g,"playing"),w=ol(r.g,"paused"),v=ol(r.g,"buffering"),T=r.s,x=r.C,S=r.G,A=function y1(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=p(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(r.g),I=[],M=(r=p(r.h.g)).next();!M.done;M=r.next())I.push({timestamp:(M=M.value).timestamp,id:M.id,type:M.type,fromAdaptation:M.fromAdaptation,bandwidth:M.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:a,estimatedBandwidth:l,completionPercent:c,loadLatency:f,manifestTimeSeconds:h,drmTimeSeconds:g,playTime:m,pauseTime:w,bufferingTime:v,licenseTime:T,liveLatency:x,maxSegmentDuration:S,stateHistory:A,switchHistory:I}},d.sg=function(e,t,n,i,r,o,s){s=void 0!==s&&s;var a,l,c,f,h,m,w,v,u=this;return C(function(S){switch(S.g){case 1:if(u.l!=pt&&u.l!=Dt)throw new E(1,7,7004);if(i){S.B(2);break}return y(S,al(u,e),3);case 3:i=S.h;case 2:if(a=[],u.A&&(a=u.A.getCuePoints()),u.l!=Dt){S.B(4);break}return s&&(n="forced"),y(S,Md(u,e,t,n,i,o||"",a),5);case 5:if(l=u.ac(),c=l.find(function(A){return A.language==t&&A.label==(o||"")&&A.kind==n}))return Kt(u),S.return(c);throw new E(1,2,2012);case 4:if(f=ze,(h=u.i.presentationTimeline.getDuration())==1/0)throw new E(1,4,4033);if(!a.length){S.B(6);break}return y(S,ll(u,e,u.F,u.g.streaming.retryParameters),7);case 7:m=Cd(u,S.h,i,a),w=new Blob([m],{type:"text/vtt"}),e=ja(w),i="text/vtt";case 6:if(v={id:u.bf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ba(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.ea,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0},!Lo(Ft(v.mimeType,v.codecs)))throw new E(2,2,2014,i);return u.i.textStreams.push(v),Kt(u),S.return(qo(v))}})},d.tg=function(e,t){var i,r,o,s,u,a,l,c,f,h,g,m,w,v,T,x,n=this;return C(function(S){switch(S.g){case 1:if(n.l!=pt&&n.l!=Dt)throw new E(1,7,7004);if(n.l==Dt)throw new E(1,2,2016);if(t){S.B(2);break}return y(S,al(n,e),3);case 3:t=S.h;case 2:if("text/vtt"!=t)throw new E(1,2,2017,e);if(i=ze,(r=n.i.presentationTimeline.getDuration())==1/0)throw new E(1,4,4045);return y(S,ll(n,e,n.F,n.g.streaming.retryParameters),4);case 4:if(o=S.h,!(s=Ge[t]))throw new E(2,2,2014,t);for(u=s(),a={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},l=Q(o),c=u.parseMedia(l,a),f=[],h={},g=p(c),m=g.next();!m.done;h={pc:h.pc},m=g.next())h.pc=st([e],[(w=m.value).payload])[0],v=new J(w.startTime,w.endTime,function(A){return function(){return[A.pc]}}(h),0,null,null,0,0,1/0),h.pc.includes("#xywh")&&4===(T=h.pc.split("#xywh=")[1].split(",")).length&&v.hg({height:parseInt(T[3],10),positionX:parseInt(T[0],10),positionY:parseInt(T[1],10),width:parseInt(T[2],10)}),f.push(v);return x={id:n.bf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new fe(f),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.zc,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0},n.i.imageStreams.push(x),Kt(n),S.return(ra(x))}})},d.rg=function(e,t,n){var r,o,s,u,i=this;return C(function(a){switch(a.g){case 1:if(i.l!=pt&&i.l!=Dt)throw new E(1,7,7004);if(n){a.B(2);break}return y(a,al(i,e),3);case 3:n=a.h;case 2:return r=[],i.A&&(r=i.A.getCuePoints()),y(a,Md(i,e,t,"chapters",n,"",r),4);case 4:if(o=a.h,s=i.Mf(),!(u=s.find(function(l){return l.language==t}))){a.B(5);break}return y(a,new Promise(function(l,c){i.o.ma(o,"load",l),i.o.ma(o,"error",function(){c(new E(1,2,2015))})}),6);case 6:return a.return(u);case 5:throw new E(1,2,2012)}})},d.lf=function(e,t){this.af.width=e,this.af.height=t},d.ef=function(e){if(this.l==pt){var t=this.j;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.s)t=!1;else{for(var n=p(t.h.values()),i=n.next();!i.done;i=n.next())!(i=i.value).Qc||i.ta||i.cb||(i.Qc=!1,Ht(t,i,e));t=!0}}else t=!1;return t},d.Qg=function(){return ce("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.Rg=function(){return this.Hd},d.jg=function(e){this.sd=e},d.le=function(e,t){if(!this.g.abr.enabled||this.l===Xt||!navigator.onLine)return!1;if(this.i.variants.some(function(o){return!(!(o=o[e.type])||o.id===e.id||"audio"==e.type&&e.language!==o.language)})){for(var n=p(this.i.variants),i=n.next();!i.done;i=n.next()){var r=(i=i.value)[e.type];r&&r.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}return this.Cd.La(1),tr(this,!0,t=this.hb().video.reduce(function(o,s){return o+s.end-s.start},0),!0,!1),!0}return!1},U("shaka.Player",N),N.prototype.setVideoContainer=N.prototype.jg,N.prototype.getManifestParserFactory=N.prototype.Rg,N.prototype.getManifest=N.prototype.Qg,N.prototype.retryStreaming=N.prototype.ef,N.prototype.setMaxHardwareResolution=N.prototype.lf,N.prototype.addChaptersTrack=N.prototype.rg,N.prototype.addThumbnailsTrack=N.prototype.tg,N.prototype.addTextTrackAsync=N.prototype.sg,N.prototype.getStats=N.prototype.getStats,N.prototype.getBufferedInfo=N.prototype.hb,N.prototype.getPresentationStartTimeAsDate=N.prototype.Nf,N.prototype.getPlayheadTimeAsDate=N.prototype.Wg,N.prototype.setTextTrackVisibility=N.prototype.Nh,N.prototype.getChapters=N.prototype.Kg,N.prototype.getChaptersTracks=N.prototype.Mf,N.prototype.isTextTrackVisible=N.prototype.Ie,N.prototype.selectVariantsByLabel=N.prototype.Ih,N.prototype.selectTextLanguage=N.prototype.bg,N.prototype.selectAudioLanguage=N.prototype.ag,N.prototype.getTextLanguages=N.prototype.Yg,N.prototype.getAudioLanguages=N.prototype.Hg,N.prototype.getTextLanguagesAndRoles=N.prototype.Zg,N.prototype.getAudioLanguagesAndRoles=N.prototype.Ig,N.prototype.selectVariantTrack=N.prototype.hf,N.prototype.selectTextTrack=N.prototype.cg,N.prototype.getThumbnails=N.prototype.ah,N.prototype.getImageTracks=N.prototype.Og,N.prototype.getTextTracks=N.prototype.ac,N.prototype.getVariantTracks=N.prototype.ub,N.prototype.cancelTrickPlay=N.prototype.Bf,N.prototype.trickPlay=N.prototype.lg,N.prototype.getPlaybackRate=N.prototype.vd,N.prototype.isBuffering=N.prototype.Ge,N.prototype.getKeyStatuses=N.prototype.ud,N.prototype.getActiveSessionsMetadata=N.prototype.Be,N.prototype.getExpiration=N.prototype.Mc,N.prototype.drmInfo=N.prototype.drmInfo,N.prototype.keySystem=N.prototype.keySystem,N.prototype.goToLive=N.prototype.hh,N.prototype.seekRange=N.prototype.wb,N.prototype.isAudioOnly=N.prototype.kh,N.prototype.isInProgress=N.prototype.Ib,N.prototype.isLive=N.prototype.R,N.prototype.getAdManager=N.prototype.Lf,N.prototype.getAssetUri=N.prototype.Ce,N.prototype.getNetworkingEngine=N.prototype.Cb,N.prototype.getMediaElement=N.prototype.Tg,N.prototype.getManifestType=N.prototype.De,N.prototype.getLoadMode=N.prototype.Pg,N.prototype.resetConfiguration=N.prototype.Fh,N.prototype.getBufferFullness=N.prototype.Jg,N.prototype.getConfiguration=N.prototype.getConfiguration,N.prototype.configure=N.prototype.configure,N.prototype.load=N.prototype.load,N.prototype.updateStartTime=N.prototype.Sh,N.prototype.unload=N.prototype.uf,N.prototype.detach=N.prototype.detach,N.prototype.attachCanvas=N.prototype.vg,N.prototype.attach=N.prototype.Bc,N.probeSupport=function(e){var t,n,r,o,s;return e=void 0===e||e,C(function(u){if(1==u.g)return t={},e?y(u,function q0(){var e,t,r,o,s,u;return C(function(a){return 1==a.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),r=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],o=new Map,s=function(l){var c,f,h;return C(function(g){switch(g.g){case 1:if(ee(g,2),"org.w3.clearkey"===l&&na())throw Error("Unsupported keySystem");return y(g,navigator.requestMediaKeySystemAccess(l,r),4);case 4:return h=!!(f=(c=g.h).getConfiguration().sessionTypes)&&f.includes("persistent-license"),Oo()&&(h=!1),o.set(l,{persistentState:h}),y(g,c.createMediaKeys(),5);case 5:ue(g,0);break;case 2:te(g),o.set(l,null),F(g)}})},u=e.map(function(l){return s(l)}),y(a,Promise.all(u),2)):a.return(ha(o))})}(),3):u.B(2);2!=u.g&&(t=u.h);var a={};if(Jt()){for(var l in At)a[l]=!0;for(var c in bn)a[c]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var f=(c=p(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!f.done;f=c.next())a[f=f.value]=Jt()?!!At[f]:Di(f);for(var h in l)a[h]=Jt()?!!bn[h]:Di(l[h]);for(n=a,a={},l=(h=p(h='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(q(ki)))).next();!l.done;l=h.next())a[l=l.value]=Jt()?!!Lo(l)||qe(l)||!!$n(l):Di(l),a[c=l.split(";")[0]]=a[c]||a[l];for(s in r={manifest:n,media:a,drm:t},o=yl)r[s]=o[s]();return u.return(r)})},N.isBrowserSupported=function(){if(P.Promise||ce("A Promise implementation or polyfill is required"),!(P.Promise&&P.Uint8Array&&Array.prototype.forEach)||Oe("Trident/"))return!1;var e=na();return!(e&&13>e||!(P.MediaKeys&&P.navigator&&P.navigator.requestMediaKeySystemAccess&&P.MediaKeySystemAccess&&P.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Jt()||Di("application/x-mpegurl"))},N.setAdManagerFactory=function(e){Ss=e},N.registerSupportPlugin=function(e,t){yl[e]=t},N.prototype.destroy=N.prototype.destroy;var Xt=0,vl=1,pt=2,Dt=3;N.LoadMode={DESTROYED:Xt,NOT_LOADED:vl,MEDIA_SOURCE:pt,SRC_EQUALS:Dt},N.version="v4.5.0";var Vd=["4","5"];Df=new function(e){this.g=e,this.i=p0,this.h=g0}(new la(Number(Vd[0]),Number(Vd[1])));var qd=["output-restricted","internal-error"],yl={},Ss=null,Es={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},G1={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Hd(){this.h=[],this.j=this.i=this.g=0}function G(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.l=this.h.getVolume(),this.j=new Ie,this.j.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.j.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}function As(e,t,n,i,r){var o=this;this.o=e,this.i=t,this.A=!1,this.s=this.C=null,this.F=NaN,this.m=r,this.j=null,this.h=new Ie,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),(e=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.5.0"),this.g=null,this.u=i||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){!function W1(e,t){if(e.m(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),e.C.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.u),e.g.setVolume(e.i.muted?0:e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.g.setVolume(e.i.muted?0:e.i.volume)})}else e.g=t.getAdsManager(e.i,e.u);e.m(new K("ima-ad-manager-loaded",(new Map).set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[];for(var r=(i=p(i)).next();!r.done;r=i.next())t.push({start:r.value,end:null});e.m(new K("ad-cue-points-changed",(new Map).set("cuepoints",t)))}!function z1(e){function t(n,i){n=(new Map).set("originalEvent",n),e.m(new K(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Kd(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Xd(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Xd(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Ms(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Ms(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Is(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Is(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in P?(e.s=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Is(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.s.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Is(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A?e.g.start():e.h.ma(e.i,"play",function(){e.A=!0,e.g.start()})}catch{Ms(e,null)}}(o,s)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){Kd(o,s)}),this.h.D(this.i,"ended",function(){o.l.contentComplete()}),this.h.ma(this.i,"play",function(){o.A=!0})}function Kd(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.m(new K("ad-error",t)),Ms(e,null),e.m(new K("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Is(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function Xd(e,t){var n=t.getAd();n?(e.j=new G(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new K("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):ce("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Ms(e,t){e.m(new K("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function X(e,t,n,i,r){this.h=e,this.g=r,this.i=t,this.j=n,this.l=i}function Yr(e,t,n,i){this.A=e,this.I=t,this.g=n,this.l=null,this.W=NaN,this.i=i,this.H=!1,this.u=null,this.j=[],this.M=[],this.K=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.o=new Ie}function J1(e,t){var n,r,o,u,a;C(function(c){return 1==c.g?!t.staticResource||(n=Gd(t),e.F.get(n))?c.return():(r=Ye([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),o=e.I.request(7,r),ee(c,2),e.F.set(n,[]),y(c,o.promise,4)):2!=c.g?(u=Le(c.h.data),a=JSON.parse(u),e.F.set(n,a.apps),ue(c,0)):(te(c),e.F.delete(n),void F(c))})}function Gd(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Wd(e){var t=e.g.currentTime;if(0!=t&&null==e.u){for(var n,i,r=p(e.j),o=r.next();!o.done;o=r.next())for(var s=p((o=o.value).ads),u=s.next();!u.done;u=s.next())if(u=u.value,i){if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}else u.startTimeInSeconds<t&&(i=u,n=o);n&&i&&!e.M.includes(i.adId)&&(e.u=t,e.g.currentTime=n.startTimeInSeconds)}}function zd(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var i=e.C,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Rt(e,"firstQuartile")):t>=r&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Rt(e,"midpoint")):t>=o&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Rt(e,"thirdQuartile")),i=e.h.getRemainingTime(),0<(r=e.h.getDuration())&&(0>=i||i>r)&&ir(e)}if(!e.h||!e.h.isLinear()){e:for(i=p(e.j),r=i.next();!r.done&&(r=r.value,!e.h||!e.h.isLinear());r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.M.includes(s.adId)){if(e.g.ended)continue;e.g.currentTime=u;break e}ir(e),e.K=r,e.h=new X(s,o+1,r.ads.length,!0,e.g),e.C=s,0===o&&Rt(e,"breakStart"),Yd(e);break}}if(!e.h)for(r=(i=p(e.j)).next();!r.done&&(r=r.value,!e.h);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if((s=r.nonLinearAdsList[o]).nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.F.get(Gd(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){ir(e),u=e;for(var l=(a=p(a)).next();!l.done;l=a.next())if((l=l.value).data.source.length){var c=document.createElement("img");c.setAttribute("src",l.data.source[0].url),c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.A.appendChild(c)}e.K=r,e.h=new X(s,o+1,r.ads.length,!1,e.g),e.C=s,0===o&&Rt(e,"breakStart"),Yd(e);break}}n&&!e.h&&(t=e.g.currentTime,e.u&&e.u>t&&(e.g.currentTime=e.u),e.u=null)}}}function ir(e){if(e.h){for(;e.A.lastChild;)e.A.removeChild(e.A.firstChild);e.H||e.M.push(e.C.adId),Rt(e,"complete");for(var t=p(e.m),n=t.next();!n.done;n=t.next())e.o.Ob((n=n.value).target,n.type,n.listener);e.m=[],e.s=[],(t=e.h.getPositionInSequence())===(n=e.h.getSequenceLength())&&Rt(e,"breakEnd"),e.h=null,e.C=null,e.K=null}}function Yd(e){Rt(e,"impression"),Rt(e,"start"),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&Rt(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||Rt(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){Rt(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){Rt(e,"pause")}});for(var t=p(e.m),n=t.next();!n.done;n=t.next())e.o.D((n=n.value).target,n.type,n.listener)}function Rt(e,t){var n=e.C.trackingEvents.find(function(r){return r.eventType==t});if(n||(n=e.K.adBreakTrackingEvents.find(function(r){return r.eventType==t})),n)for(var i=(n=p(n.beaconUrls)).next();!i.done;i=n.next())(i=i.value)&&""!=i&&((i=Ye([i],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",e.I.request(7,i));switch(t){case"impression":e.i(new K("ad-impression"));break;case"start":e.i(new K("ad-started",(new Map).set("ad",e.h)));break;case"mute":e.i(new K("ad-muted"));break;case"unmute":e.i(new K("ad-volume-changed"));break;case"resume":e.i(new K("ad-resumed"));break;case"pause":e.i(new K("ad-paused"));break;case"firstQuartile":e.i(new K("ad-first-quartile"));break;case"midpoint":e.i(new K("ad-midpoint"));break;case"thirdQuartile":e.i(new K("ad-third-quartile"));break;case"complete":e.i(new K("ad-complete")),e.i(new K("ad-stopped"));break;case"breakStart":e.A.setAttribute("ad-active","true");break;case"breakEnd":e.A.removeAttribute("ad-active")}}function W(e,t){this.g=e,this.i=null,this.h=t}function $d(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.u=this.m=this.o=null,this.A="",this.C=[],this.h=new Ie,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new K("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){!function Z1(e,t){e.i(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(0!=n){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}(r,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.A.length?r.j.resolve(r.A):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new W(o,r.l),r.u&&(r.m.i=r.u),r.i(new K("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.s.removeAttribute("ad-active"),r.o&&r.o>r.l.currentTime&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.u=o.getStreamData().adProgressData,r.m&&(r.m.i=r.u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new K("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new K("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new K("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new K("ad-complete")),r.i(new K("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new K("ad-skipped")),r.i(new K("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[];for(var u=(s=p(s.cuepoints)).next();!u.done;u=s.next())o.push({start:(u=u.value).start,end:u.end});r.C=o,r.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",o)))})}function V(){he.call(this),this.g=this.i=this.h=null,this.j=new Hd,this.m=navigator.language,this.l=null}function wl(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}function Jd(e){return JSON.stringify(e,function(t,n){if("function"!=typeof n){if(n instanceof Event||n instanceof K){var i={};for(r in n)(t=n[r])&&"object"==typeof t?"detail"==r&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(i=(t=p(Object.getOwnPropertyNames(n))).next();!i.done;i=t.next())r.add(i.value);for(t={},i=(r=p(r)).next();!i.done;i=r.next())t[i=i.value]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},i=(n=p(Vn(n))).next();!i.done;i=n.next())t=(i=i.value).end,r.start.push(i.start),r.end.push(t);n=r}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:"number"==typeof n?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Tl(e){return JSON.parse(e,function(t,n){if("NaN"==n)var i=NaN;else if("-Infinity"==n)i=-1/0;else if("Infinity"==n)i=1/0;else if(n&&"object"==typeof n&&"TimeRanges"==n.__type__)i=function ew(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(n);else if(n&&"object"==typeof n&&"Uint8Array"==n.__type__)i=new Uint8Array(n.entries);else if(n&&"object"==typeof n&&"Error"==n.__type__){for(i in t=n.contents,n=Error(t.message),t)n[i]=t[i];i=n}else i=n;return i})}(d=G.prototype).getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.h.setVolume(e)},d.isMuted=function(){return 0==this.h.getVolume()},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},d.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},U("shaka.ads.ClientSideAd",G),G.prototype.release=G.prototype.release,G.prototype.getPodIndex=G.prototype.getPodIndex,G.prototype.getTimeOffset=G.prototype.getTimeOffset,G.prototype.getMediaUrl=G.prototype.getMediaUrl,G.prototype.getAdvertiserName=G.prototype.getAdvertiserName,G.prototype.getCreativeAdId=G.prototype.getCreativeAdId,G.prototype.getAdId=G.prototype.getAdId,G.prototype.getVastMediaWidth=G.prototype.getVastMediaWidth,G.prototype.getVastMediaHeight=G.prototype.getVastMediaHeight,G.prototype.getVastMediaBitrate=G.prototype.getVastMediaBitrate,G.prototype.getDescription=G.prototype.getDescription,G.prototype.getTitle=G.prototype.getTitle,G.prototype.getPositionInSequence=G.prototype.getPositionInSequence,G.prototype.getSequenceLength=G.prototype.getSequenceLength,G.prototype.setMuted=G.prototype.setMuted,G.prototype.resize=G.prototype.resize,G.prototype.isLinear=G.prototype.isLinear,G.prototype.isMuted=G.prototype.isMuted,G.prototype.setVolume=G.prototype.setVolume,G.prototype.getVolume=G.prototype.getVolume,G.prototype.play=G.prototype.play,G.prototype.pause=G.prototype.pause,G.prototype.skip=G.prototype.skip,G.prototype.canSkipNow=G.prototype.canSkipNow,G.prototype.getTimeUntilSkippable=G.prototype.getTimeUntilSkippable,G.prototype.isSkippable=G.prototype.isSkippable,G.prototype.isPaused=G.prototype.isPaused,G.prototype.getRemainingTime=G.prototype.getRemainingTime,G.prototype.getMinSuggestedDuration=G.prototype.getMinSuggestedDuration,G.prototype.getDuration=G.prototype.getDuration,As.prototype.configure=function(e){this.C=e},As.prototype.stop=function(){this.g&&this.g.stop(),this.o&&ds(this.o)},As.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()},(d=X.prototype).getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return!!this.h.skipOffset},d.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},d.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},d.skip=function(){this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.l},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.j?this.j:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.j=this.i=this.g=this.h=null},U("shaka.ads.MediaTailorAd",X),X.prototype.release=X.prototype.release,X.prototype.getPodIndex=X.prototype.getPodIndex,X.prototype.getTimeOffset=X.prototype.getTimeOffset,X.prototype.getMediaUrl=X.prototype.getMediaUrl,X.prototype.getAdvertiserName=X.prototype.getAdvertiserName,X.prototype.getCreativeAdId=X.prototype.getCreativeAdId,X.prototype.getAdId=X.prototype.getAdId,X.prototype.getVastMediaWidth=X.prototype.getVastMediaWidth,X.prototype.getVastMediaHeight=X.prototype.getVastMediaHeight,X.prototype.getVastMediaBitrate=X.prototype.getVastMediaBitrate,X.prototype.getDescription=X.prototype.getDescription,X.prototype.getTitle=X.prototype.getTitle,X.prototype.getPositionInSequence=X.prototype.getPositionInSequence,X.prototype.getSequenceLength=X.prototype.getSequenceLength,X.prototype.setMuted=X.prototype.setMuted,X.prototype.resize=X.prototype.resize,X.prototype.isLinear=X.prototype.isLinear,X.prototype.isMuted=X.prototype.isMuted,X.prototype.setVolume=X.prototype.setVolume,X.prototype.getVolume=X.prototype.getVolume,X.prototype.play=X.prototype.play,X.prototype.pause=X.prototype.pause,X.prototype.skip=X.prototype.skip,X.prototype.canSkipNow=X.prototype.canSkipNow,X.prototype.getTimeUntilSkippable=X.prototype.getTimeUntilSkippable,X.prototype.isSkippable=X.prototype.isSkippable,X.prototype.isPaused=X.prototype.isPaused,X.prototype.getRemainingTime=X.prototype.getRemainingTime,X.prototype.getMinSuggestedDuration=X.prototype.getMinSuggestedDuration,X.prototype.getDuration=X.prototype.getDuration,Yr.prototype.stop=function(){for(var e=p(this.m),t=e.next();!t.done;t=e.next())this.o.Ob((t=t.value).target,t.type,t.listener);ir(this),this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.u=null,this.j=[],this.M=[],this.F.clear()},Yr.prototype.release=function(){this.stop(),this.o&&this.o.release()},Yr.prototype.onManifestUpdated=function(e){this.H=e,""!=this.N&&(function $1(e,t,n){var i,r,s,u,a,l,c,h,g,w,v;C(function(x){if(1==x.g)return i=Ye([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),r=e.I.request(7,i),ee(x,2),y(x,r.promise,4);if(2!=x.g){if(s=[],u=Le(x.h.data),0<(a=JSON.parse(u)).avails.length){if(JSON.stringify(e.j)!=JSON.stringify(a.avails)){for(e.j=a.avails,l=p(e.j),c=l.next();!c.done;c=l.next())for(h=p(c.value.nonLinearAdsList),g=h.next();!g.done;g=h.next())for(w=p(g.value.nonLinearAdList),v=w.next();!v.done;v=w.next())J1(e,v.value);s=e.getCuePoints(),e.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",s))),ir(e),e.j=[];return n&&(e.H||0<s.length)&&function Q1(e){zd(e),e.H||(Wd(e),e.o.D(e.g,"seeked",function(){Wd(e)}),e.o.D(e.g,"ended",function(){ir(e)})),e.o.D(e.g,"timeupdate",function(){zd(e)})}(e),ue(x,0)}te(x),F(x)})}(this,this.N,this.V),this.V=!1)},Yr.prototype.getCuePoints=function(){for(var e=[],t=p(this.j),n=t.next();!n.done;n=t.next())for(var i=(n=p(n.value.ads)).next();!i.done;i=n.next())e.push({start:(i=i.value).startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds});return e},(d=W.prototype).getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},U("shaka.ads.ServerSideAd",W),W.prototype.release=W.prototype.release,W.prototype.getPodIndex=W.prototype.getPodIndex,W.prototype.getTimeOffset=W.prototype.getTimeOffset,W.prototype.getMediaUrl=W.prototype.getMediaUrl,W.prototype.getAdvertiserName=W.prototype.getAdvertiserName,W.prototype.getCreativeAdId=W.prototype.getCreativeAdId,W.prototype.getAdId=W.prototype.getAdId,W.prototype.getVastMediaWidth=W.prototype.getVastMediaWidth,W.prototype.getVastMediaHeight=W.prototype.getVastMediaHeight,W.prototype.getVastMediaBitrate=W.prototype.getVastMediaBitrate,W.prototype.getDescription=W.prototype.getDescription,W.prototype.getTitle=W.prototype.getTitle,W.prototype.getPositionInSequence=W.prototype.getPositionInSequence,W.prototype.getSequenceLength=W.prototype.getSequenceLength,W.prototype.setMuted=W.prototype.setMuted,W.prototype.resize=W.prototype.resize,W.prototype.isLinear=W.prototype.isLinear,W.prototype.isMuted=W.prototype.isMuted,W.prototype.setVolume=W.prototype.setVolume,W.prototype.getVolume=W.prototype.getVolume,W.prototype.play=W.prototype.play,W.prototype.pause=W.prototype.pause,W.prototype.skip=W.prototype.skip,W.prototype.canSkipNow=W.prototype.canSkipNow,W.prototype.getTimeUntilSkippable=W.prototype.getTimeUntilSkippable,W.prototype.isSkippable=W.prototype.isSkippable,W.prototype.isPaused=W.prototype.isPaused,W.prototype.getRemainingTime=W.prototype.getRemainingTime,W.prototype.getMinSuggestedDuration=W.prototype.getMinSuggestedDuration,W.prototype.getDuration=W.prototype.getDuration,(d=$d.prototype).configure=function(){},d.stop=function(){this.A="",this.o=null,this.C=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},d.getCuePoints=function(){return this.C},Qe(V,he),(d=V.prototype).setLocale=function(e){this.m=e},d.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},d.initClientSide=function(e,t,n){var i=this;if(!P.google||!google.ima||!google.ima.AdsLoader)throw new E(2,10,1e4);this.h&&this.h.release(),this.h=new As(e,t,this.m,n,function(r){return wl(i,r)}),this.h.configure(this.l)},d.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),he.prototype.release.call(this)},d.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new K("ad-stopped")),this.j=new Hd},d.requestClientSideAds=function(e){if(!this.h)throw new E(1,10,10001);var t=this.h;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new E(1,10,10001);var t=this.h;t.u=e,t.g&&t.g.updateAdsRenderingSettings(t.u)},d.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Yr(e,t,n,function(r){return wl(i,r)})},d.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new E(1,10,10005);var i=this.i;return n=void 0===n?"":n,i.l?e=Promise.reject(new E(1,10,10004)):(i.l=new Se,function Y1(e,t,n){var i,r,o,u,a,l,c,f,h,g;C(function(m){if(1==m.g)return(i=Ye([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(r=JSON.stringify(n),i.body=yn(r)),o=e.I.request(7,i),ee(m,2),y(m,o.promise,4);if(2!=m.g){if(u=Le(m.h.data),!(a=JSON.parse(u)).manifestUrl||!a.trackingUrl)throw Error("Insufficient data from MediaTailor.");return l=new Ze(t),c=new Ze(a.trackingUrl),e.N=l.resolve(c).toString(),f=Date.now()/1e3,h=f-e.W,e.i(new K("ads-loaded",(new Map).set("loadTime",h))),g=new Ze(a.manifestUrl),e.l.resolve(l.resolve(g).toString()),e.l=null,ue(m,0)}if(te(m),!e.G.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,m.return();e.l.resolve(e.G),e.l=null,F(m)})}(i,e,t),i.G=n||"",i.W=Date.now()/1e3,e=i.l),e},d.initServerSide=function(e,t){var n=this;if(!P.google||!google.ima||!google.ima.dai)throw new E(2,10,10002);this.g&&this.g.release(),this.g=new $d(e,t,this.m,function(i){return wl(n,i)}),this.g.configure(this.l)},d.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new E(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&ce('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.5.0",(n=this.g).j?e=Promise.reject(new E(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Se,n.g.requestStream(e),n.A=t||"",n.F=Date.now()/1e3,e=n.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new E(1,10,10003);(e.mpt||e.mpv)&&ce('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.5.0",this.g.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Bn("AdManager","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},d.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},d.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},U("shaka.ads.AdManager",V),V.prototype.onCueMetadataChange=V.prototype.onCueMetadataChange,V.prototype.onHlsTimedMetadata=V.prototype.onHlsTimedMetadata,V.prototype.onDashTimedMetadata=V.prototype.onDashTimedMetadata,V.prototype.onManifestUpdated=V.prototype.onManifestUpdated,V.prototype.getStats=V.prototype.getStats,V.prototype.getCuePoints=V.prototype.getCuePoints,V.prototype.getServerSideCuePoints=V.prototype.getServerSideCuePoints,V.prototype.replaceServerSideAdTagParameters=V.prototype.replaceServerSideAdTagParameters,V.prototype.requestServerSideStream=V.prototype.requestServerSideStream,V.prototype.initServerSide=V.prototype.initServerSide,V.prototype.requestMediaTailorStream=V.prototype.requestMediaTailorStream,V.prototype.initMediaTailor=V.prototype.initMediaTailor,V.prototype.updateClientSideAdsRenderingSettings=V.prototype.updateClientSideAdsRenderingSettings,V.prototype.requestClientSideAds=V.prototype.requestClientSideAds,V.prototype.onAssetUnload=V.prototype.onAssetUnload,V.prototype.release=V.prototype.release,V.prototype.initClientSide=V.prototype.initClientSide,V.prototype.configure=V.prototype.configure,V.prototype.setLocale=V.prototype.setLocale,V.ADS_LOADED="ads-loaded",V.AD_STARTED="ad-started",V.AD_FIRST_QUARTILE="ad-first-quartile",V.AD_MIDPOINT="ad-midpoint",V.AD_THIRD_QUARTILE="ad-third-quartile",V.AD_COMPLETE="ad-complete",V.AD_STOPPED="ad-stopped",V.AD_SKIPPED="ad-skipped",V.AD_VOLUME_CHANGED="ad-volume-changed",V.AD_MUTED="ad-muted",V.AD_PAUSED="ad-paused",V.AD_RESUMED="ad-resumed",V.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",V.CUEPOINTS_CHANGED="ad-cue-points-changed",V.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",V.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",V.AD_CLICKED="ad-clicked",V.AD_PROGRESS="ad-progress",V.AD_BUFFERING="ad-buffering",V.AD_IMPRESSION="ad-impression",V.AD_DURATION_CHANGED="ad-duration-changed",V.AD_CLOSED="ad-closed",V.AD_LOADED="ad-loaded",V.ALL_ADS_COMPLETED="all-ads-completed",V.AD_LINEAR_CHANGED="ad-linear-changed",V.AD_METADATA="ad-metadata",V.AD_RECOVERABLE_ERROR="ad-recoverable-error",V.AD_ERROR="ad-error",V.AD_BREAK_READY="ad-break-ready",V.AD_INTERACTION="ad-interaction",Ss=function(){return new V};var Qd="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),tw="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),xl=["loop","playbackRate"],nw=["pause","play"],Cs={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},ks={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Sl={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Zd=[["getConfiguration","configure"]],ep=[["isTextTrackVisible","setTextTrackVisibility"]],iw="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),rw=["attach","attachCanvas","detach","load","unload"];function El(e,t,n,i,r,o,s){var u=this;this.G=e,this.M=s,this.j=new ie(t),this.N=n,this.u=!1,this.s=i,this.F=r,this.I=o,this.h=this.m=!1,this.K="",this.o=null,this.A=function(){return Il(u)},this.C=function(a,l){switch((a=Tl(l)).type){case"event":var c=a.targetName,f=Bf(a.event);u.s(c,f);break;case"update":for(f in c=a.update)for(var h in a=u.g[f]||{},c[f])a[h]=c[f][h];u.u&&(u.N(),u.u=!1);break;case"asyncComplete":if(h=a.error,a=u.i[f=a.id],delete u.i[f],a)if(h){for(c in f=new E(h.severity,h.category,h.code),h)f[c]=h[c];a.reject(f)}else a.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Jr.add(this)}function Al(e,t,n){Gt=n,n.addUpdateListener(e.A),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Il(e),$r(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function tp(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new E(2,8,n,t))}function np(e,t){var n=e.I();e.l=new Se,e.u=!0,Al(e,n,t)}function ip(e){var t=Gt;t.removeUpdateListener(e.A),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Il(e){var t=!!Gt&&"connected"==Gt.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Ml(e)}e.h=t,e.K=t?Gt.receiver.friendlyName:"",e.j.kc()}function Ml(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new E(1,7,7e3))}}function $r(e,t){t=Jd(t);var n=Gt;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Xv)}catch(i){throw t=new E(2,8,8005,i),n=new K("error",(new Map).set("detail",t)),e.s("player",n),e.Yb(),t}}(d=El.prototype).destroy=function(){return Jr.delete(this),Ml(this),Gt&&ip(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.C=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},d.Ea=function(){return this.h},d.cf=function(){return this.K},d.init=function(){if(this.G.length)if(P.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=p(Jr),i=n.next();!i.done;i=n.next())np(i.value,t)},function(t){for(var n=p(Jr),i=n.next();!i.done;i=n.next())Ds="available"==t,(i=i.value).j.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Ds&&this.j.U(sw),(e=Gt)&&e.status!=chrome.cast.SessionStatus.STOPPED?np(this,e):Gt=null}else P.__onGCastApiAvailable!==rp&&(Rs=P.__onGCastApiAvailable||null,P.__onGCastApiAvailable=rp)},d.jf=function(e){this.o=e,this.h&&$r(this,{type:"appData",appData:this.o})},d.cast=function(e){var t=this;return C(function(n){if(!t.m)throw new E(1,8,8e3);if(!Ds)throw new E(1,8,8001);if(t.h)throw new E(1,8,8002);return t.l=new Se,chrome.cast.requestSession(function(i){return Al(t,e,i)},function(i){return tp(t,i)}),y(n,t.l,0)})},d.Yb=function(){if(this.h){if(Ml(this),Gt){ip(this);try{Gt.stop(function(){},function(){})}catch{}Gt=null}Il(this)}},d.get=function(e,t){var n=this;if("video"==e){if(nw.includes(t))return function(){return n.Zf.apply(n,[e,t].concat(q(Ut.apply(0,arguments))))}}else if("player"==e){if(Sl[t]&&!this.get("player","isLive")())return function(){};if(iw.includes(t))return function(){return n.Zf.apply(n,[e,t].concat(q(Ut.apply(0,arguments))))};if(rw.includes(t))return function(){return n.Ch.apply(n,[e,t].concat(q(Ut.apply(0,arguments))))};if(Cs[t]||ks[t])return function(){return n.g[e][t]}}return this.g[e][t]},d.set=function(e,t,n){this.g[e][t]=n,$r(this,{type:"set",targetName:e,property:t,value:n})},d.Zf=function(e,t){$r(this,{type:"call",targetName:e,methodName:t,args:Ut.apply(2,arguments)})},d.Ch=function(e,t){var n=Ut.apply(2,arguments),i=new Se,r=this.H.toString();this.H++,this.i[r]=i;try{$r(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};var sw=.02,Ds=!1,Gt=null,Rs=null,Jr=new Set;function rp(e){if(Rs?P.__onGCastApiAvailable=Rs:delete P.__onGCastApiAvailable,Rs=null,e)for(var t=p(Jr),n=t.next();!n.done;n=t.next())n.value.init();"function"==typeof P.__onGCastApiAvailable&&P.__onGCastApiAvailable(e)}function Fe(e,t,n,i){i=void 0!==i&&i,he.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.A=i,this.u=new Map,this.g=new El(n,function(){return sp(r)},function(){return up(r)},function(o,s){return lp(r,o,s)},function(){return ap(r)},function(){return Cl(r)},i),function uw(e){e.g.init(),e.m=new Ie;for(var t=p(Qd),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(o){e.g.Ea()||(o=Bf(o),e.j.dispatchEvent(o))});for(var i in Wo)e.m.D(e.h,Wo[i],function(o){e.g.Ea()||e.o.dispatchEvent(o)});for(var r in e.l={},t={},e.i)t.qc=r,Object.defineProperty(e.l,t.qc,{configurable:!1,enumerable:!0,get:function(o){return function(){return lw(e,o.qc)}}(t),set:function(o){return function(s){var u=o.qc;e.g.Ea()?e.g.set("video",u,s):e.i[u]=s}}(t)}),t={qc:t.qc};e.s={},op(e,function(o){Object.defineProperty(e.s,o,{configurable:!1,enumerable:!0,get:function(){return function cw(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(n,i,r){return e.o.addEventListener(n,i,r)};if("removeEventListener"==t)return function(n,i,r){return e.o.removeEventListener(n,i,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Cb()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Lf()};if("setVideoContainer"==t)return function(n){return e.h.jg(n)};if(e.g.Ea()){if("getManifest"==t||"drmInfo"==t)return function(){return ce(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return ce(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ea()&&0==Object.keys(e.g.g.video).length&&(Cs[t]||ks[t])||!e.g.Ea()?e.h[t].bind(e.h):e.g.get("player",t)}(e,o)}})}),function aw(e){var t=new Map;op(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.u.set(n,i):e.u.set(i,n)):t.set(i,n)})}(e),e.j=new he,e.j.Ed=e.l,e.o=new he,e.o.Ed=e.s}(this)}function op(e,t){function n(a){return"constructor"!=a&&"function"==typeof i[a]&&!r.has(a)}var o,i=e.h,r=new Set;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=p(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function Cl(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Ce(),startTime:null};e.i.pause();for(var n=p(xl),i=n.next();!i.done;i=n.next())t.video[i=i.value]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=p(Zd)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=p(ep)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function sp(e){var t=new K("caststatuschanged");e.dispatchEvent(t)}function up(e){var t=new K(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function ap(e){for(var t=p(Zd),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i));var s={};for(i=(n=p(xl)).next();!i.done;i=n.next())s[i=i.value]=e.g.get("video",i);t.then(function(){if(e.i){for(var u=p(xl),a=u.next();!a.done;a=u.next())e.i[a=a.value]=s[a];for(a=(u=p(ep)).next();!a.done;a=u.next()){var l=a.value;a=l[1],l=e.g.get("player",l[0])(),e.h[a](l)}e.i.autoplay=o,r&&e.i.play()}},function(u){u=new K("error",u=(new Map).set("detail",u)),e.h.dispatchEvent(u)})}function lw(e,t){if("addEventListener"==t)return function(i,r,o){return e.j.addEventListener(i,r,o)};if("removeEventListener"==t)return function(i,r,o){return e.j.removeEventListener(i,r,o)};if(e.g.Ea()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.Ea()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function lp(e,t,n){e.g.Ea()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function $e(e,t,n,i){he.call(this);var r=this;this.g=e,this.h=t,this.j=new Ie,this.H={video:e,player:t},this.C=n||function(){},this.I=i||function(o){return o},this.i=null,this.F=!1,this.o=!0,this.m=0,this.A=!1,this.u=!0,this.s=this.l=null,this.G=new ie(function(){kl(r)}),function fw(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return cp(e)},t.onSenderDisconnected=function(){return cp(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&Cn(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),Cn(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(r){return function pw(e,t){var n=Tl(t.data);switch(n.type){case"PLAY":e.g.play(),kn(e);break;case"PAUSE":e.g.pause(),kn(e);break;case"SEEK":var i=n.resumeState;null!=(t=n.currentTime)&&(e.g.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.g.play(),kn(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),kn(e));break;case"STOP":e.h.uf().then(function(){e.h&&kn(e)});break;case"GET_STATUS":Dl(e,Number(n.requestId));break;case"VOLUME":t=(i=n.volume).level,i=i.muted;var r=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=i&&(e.g.muted=i),r==e.g.volume&&o==e.g.muted||kn(e);break;case"LOAD":e.m=0,e.A=!1,e.u=!1,i=n.currentTime,r=e.I((t=n.media).contentId),o=n.autoplay||!0,e.C(t.customData),o&&(e.g.autoplay=!0),e.h.load(r,i).then(function(){e.h&&Dl(e)}).catch(function(s){var u="LOAD_FAILED";7==s.category&&7e3==s.code&&(u="LOAD_CANCELLED"),Cn(e,{requestId:Number(n.requestId),type:u},e.s)});break;default:Cn(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return function dw(e,t){var n=Tl(t.data);switch(n.type){case"init":e.m=0,e.A=!1,e.u=!0,function hw(e,t,n){var i,o,s,u,a,l,f;C(function(g){switch(g.g){case 1:for(i in t.player)e.h[i](t.player[i]);return e.C(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ee(g,5),y(g,e.h.load(t.manifest,t.startTime),7)):y(g,Promise.resolve(),3);case 7:ue(g,3);break;case 5:return s=te(g),u=(new Map).set("detail",s),a=new K("error",u),e.h&&e.h.dispatchEvent(a),g.return();case 3:if(!e.h)return g.return();for(l in t.video)e.g[l]=t.video[l];for(f in t.playerAfterLoad)e.h[f](t.playerAfterLoad[f]);e.g.autoplay=o,t.manifest&&(e.g.play(),kn(e)),F(g)}})}(e,n.initState,n.appData),kl(e);break;case"appData":e.C(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":(i=e.H[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":r=n.methodName,"player"==(i=n.targetName)&&"load"==r&&(e.m=0,e.A=!1);var o=n.id,s=t.senderId;n=(t=e.H[i])[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then(function(){e.u=!0})),n.then(function(){return dp(e,s,o,null)},function(u){return dp(e,s,o,u)})}}(e,r)},t.start();for(var n=(t=p(Qd)).next();!n.done;n=t.next())e.j.D(e.g,n.value,function(r){return fp(e,"video",r)});for(var i in Wo)e.j.D(e.h,Wo[i],function(r){return fp(e,"player",r)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.lf(3840,2160):e.h.lf(1920,1080),e.j.D(e.g,"loadeddata",function(){e.A=!0}),e.j.D(e.h,"loading",function(){e.o=!1,rr(e)}),e.j.D(e.g,"playing",function(){e.o=!1,rr(e)}),e.j.D(e.g,"pause",function(){rr(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,rr(e)}),e.j.D(e.g,"ended",function(){new ie(function(){e.g&&e.g.ended&&(e.o=!0,rr(e))}).U(mw)})}(this)}function cp(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,rr(e)}function rr(e){var t;C(function(n){return 1==n.g?y(n,Promise.resolve(),2):e.h?(t=new K("caststatuschanged"),e.dispatchEvent(t),hp(e)||kn(e),void F(n)):n.return()})}function fp(e,t,n){e.h&&(kl(e),Cn(e,{type:"event",targetName:t,event:n},e.l))}function kl(e){e.G.U(gw);for(var t={video:{},player:{}},n=p(tw),i=n.next();!i.done;i=n.next())t.video[i=i.value]=e.g[i];if(e.h.R())for(var r in Sl)e.m%Sl[r]==0&&(t.player[r]=e.h[r]());for(var o in Cs)e.m%Cs[o]==0&&(t.player[o]=e.h[o]());for(var s in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Cn(e,{type:"update",update:t},e.l),ks)e.m%ks[s]==0&&((t={player:{}}).player[s]=e.h[s](),Cn(e,{type:"update",update:t},e.l));e.A&&(e.m+=1),hp(e)}function hp(e){return!(!e.u||!e.g.duration&&!e.h.R()||(Dl(e),e.u=!1,0))}function Dl(e,t){var n={contentId:e.h.Ce(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),kn(e,void 0===t?0:t,n)}function dp(e,t,n,i){e.h&&Cn(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Cn(e,t,n,i){e.F&&(e=Jd(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function kn(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?vw:e.h.Ge()?ww:e.g.paused?Tw:yw,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Cn(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}Qe(Fe,he),(d=Fe.prototype).destroy=function(e){return e&&this.g.Yb(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,he.prototype.release.call(this),Promise.all(e)},d.fh=function(){return this.l},d.Vg=function(){return this.s},d.xg=function(){return this.g.m&&Ds},d.Ea=function(){return this.g.Ea()},d.cf=function(){return this.g.cf()},d.cast=function(){var t,e=this;return C(function(n){return 1==n.g?(t=Cl(e),y(n,e.g.cast(t),2)):e.h?y(n,e.h.uf(),0):n.return()})},d.jf=function(e){this.g.jf(e)},d.Oh=function(){!function ow(e){if(e.h){var t=e.I();chrome.cast.requestSession(function(n){return Al(e,t,n)},function(n){return tp(e,n)})}}(this.g)},d.Yb=function(){this.g.Yb()},d.yg=function(e,t){t=void 0!==t&&t;var n=this;return C(function(i){if(1==i.g)return e==n.C&&t==n.A?i.return():(n.C=e,n.A=t,n.g.Yb(),y(i,n.g.destroy(),2));n.g=null,n.g=new El(e,function(){return sp(n)},function(){return up(n)},function(r,o){return lp(n,r,o)},function(){return ap(n)},function(){return Cl(n)},t),n.g.init(),F(i)})},U("shaka.cast.CastProxy",Fe),Fe.prototype.changeReceiverId=Fe.prototype.yg,Fe.prototype.forceDisconnect=Fe.prototype.Yb,Fe.prototype.suggestDisconnect=Fe.prototype.Oh,Fe.prototype.setAppData=Fe.prototype.jf,Fe.prototype.cast=Fe.prototype.cast,Fe.prototype.receiverName=Fe.prototype.cf,Fe.prototype.isCasting=Fe.prototype.Ea,Fe.prototype.canCast=Fe.prototype.xg,Fe.prototype.getPlayer=Fe.prototype.Vg,Fe.prototype.getVideo=Fe.prototype.fh,Fe.prototype.destroy=Fe.prototype.destroy,Qe($e,he),(d=$e.prototype).isConnected=function(){return this.F},d.lh=function(){return this.o},d.Lh=function(e){this.i=e},d.Bg=function(){this.i=null},d.Mh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.Kh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.Jh=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var t,e=this;return C(function(i){if(1==i.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,he.prototype.release.call(e),y(i,Promise.all(t),2);cast.receiver.CastReceiverManager.getInstance().stop(),F(i)})},U("shaka.cast.CastReceiver",$e),$e.prototype.destroy=$e.prototype.destroy,$e.prototype.setContentArtist=$e.prototype.Jh,$e.prototype.setContentImage=$e.prototype.Kh,$e.prototype.setContentTitle=$e.prototype.Mh,$e.prototype.clearContentMetadata=$e.prototype.Bg,$e.prototype.setContentMetadata=$e.prototype.Lh,$e.prototype.isIdle=$e.prototype.lh,$e.prototype.isConnected=$e.prototype.isConnected;var gw=.5,mw=5,vw="IDLE",yw="PLAYING",ww="BUFFERING",Tw="PAUSED";function pp(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(A){return null!=A&&""!=A.g.trim()})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(A){return null!=A&&""!=A.g.trim()})){s=u;break}if(-1===o||-1===s)return null;for(var a=u=!1,l="white",c="black",f=Rl(i,r,u,a,l,c);o<=s;o++){for(var h=n[o],g=-1,m=-1,w=0;w<h.length;w++)if(null!=h[w]&&""!==h[w].g.trim()){g=w;break}for(w=h.length-1;0<=w;w--)if(null!=h[w]&&""!==h[w].g.trim()){m=w;break}if(-1===g||-1===m)h=gp(i,r),e.nestedCues.push(h);else{for(;g<=m;g++)if(w=h[g]){var v=w.l,T=w.i,x=w.j,S=w.h;(v!=u||T!=a||x!=l||S!=c)&&(f.payload&&e.nestedCues.push(f),f=Rl(i,r,v,T,x,S),u=v,a=T,l=x,c=S),f.payload+=w.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==s&&(f=gp(i,r),e.nestedCues.push(f)),f=Rl(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Rl(e,t,n,i,r,o){return e=new Te(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=o,e}function gp(e,t){return(e=new Te(e,t,"")).lineBreak=!0,e}function mp(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Nl(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Qr(this)}function Ns(e,t,n){var i="CC"+(e.u<<1|e.s+1),r=new Te(t,n,"");return r.lineInterpretation=1,r.line=e.g/16*100,pp(r,i,e.i,t,n)}function Qr(e){Dn(e,0,15),e.g=1}function or(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Zr:i=xp.has(n)?xp.get(n):String.fromCharCode(n);break;case yp:i=xw.get(n);break;case wp:e.i[e.g].pop(),i=Sw.get(n);break;case Tp:e.i[e.g].pop(),i=Ew.get(n)}i&&e.i[e.g].push(new mp(i,e.m,e.j,e.o,e.l))}}function vp(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function Dn(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Zr=0,yp=1,wp=2,Tp=3,xp=new Map([[39,"\u2019"],[42,"\xe1"],[92,"\xe9"],[92,"\xe9"],[94,"\xed"],[95,"\xf3"],[96,"\xfa"],[123,"\xe7"],[124,"\xf7"],[125,"\xd1"],[126,"\xf1"],[127,"\u2588"]]),xw=new Map([[48,"\xae"],[49,"\xb0"],[50,"\xbd"],[51,"\xbf"],[52,"\u2122"],[53,"\xa2"],[54,"\xa3"],[55,"\u266a"],[56,"\xe0"],[57,"\u2800"],[58,"\xe8"],[59,"\xe2"],[60,"\xea"],[61,"\xee"],[62,"\xf4"],[63,"\xfb"]]),Sw=new Map([[32,"\xc1"],[33,"\xc9"],[34,"\xd3"],[35,"\xda"],[36,"\xdc"],[37,"\xfc"],[38,"\u2018"],[39,"\xa1"],[40,"*"],[41,"'"],[42,"\u2500"],[43,"\xa9"],[44,"\u2120"],[45,"\xb7"],[46,"\u201c"],[47,"\u201d"],[48,"\xc0"],[49,"\xc2"],[50,"\xc7"],[51,"\xc8"],[52,"\xca"],[53,"\xcb"],[54,"\xeb"],[55,"\xce"],[56,"\xcf"],[57,"\xef"],[58,"\xd4"],[59,"\xd9"],[60,"\xf9"],[61,"\xdb"],[62,"\xab"],[63,"\xbb"]]),Ew=new Map([[32,"\xc3"],[33,"\xe3"],[34,"\xcd"],[35,"\xcc"],[36,"\xec"],[37,"\xd2"],[38,"\xf2"],[39,"\xd5"],[40,"\xf5"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\xc4"],[49,"\xe4"],[50,"\xd6"],[51,"\xf6"],[52,"\xdf"],[53,"\xa5"],[54,"\xa4"],[55,"\u2502"],[56,"\xc5"],[57,"\xe5"],[58,"\xd8"],[59,"\xf8"],[60,"\u250c"],[61,"\u2510"],[62,"\u2514"],[63,"\u2518"]]);function Ls(e,t){this.h=Ap,this.o=new Nl(e,t),this.i=new Nl(e,t),this.g=this.j=new Nl(e,t),this.l=0,this.m=null}function Ll(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Ps&&e.h!==eo&&(r=Ns(i,e.l,n),(n=e.i).g=0<n.h?n.h:0,Dn(n,0,15),(n=e.j).g=0<n.h?n.h:0,Dn(n,0,15),i.g=15),e.h=Ps,i.h=t,r}function Sp(e){e.h=Aw,e.g=e.j,e.g.h=0}function Ep(e){zn("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=eo}var Ap=0,Aw=1,Ps=3,eo=4,Iw="black green blue cyan red yellow magenta black".split(" "),Ip="white green blue cyan red yellow magenta white_italics".split(" ");function Mp(){this.l=!1,this.A=this.F=0,this.C=kw,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Pl(this)}function Pl(e){e.i=[];for(var t=0;16>t;t++)e.i.push(jl())}function jl(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function pi(e,t){Cp(e)&&(e.i[e.h][e.g]=new mp(t,e.u,e.o,e.m,e.s),e.g++)}function Cp(e){return e.h<e.F&&0<=e.h&&e.g<e.A&&0<=e.g}function gi(e,t,n){var i=new Te(e.j,t,"");return i.textAlign=e.C===Mw?"left":e.C===Cw?"right":dn,(n=pp(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Mp.prototype.isVisible=function(){return this.l};var Mw=0,Cw=1,kw=2;function Dw(){this.i=[],this.h=null,this.g=0}function Rw(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new js(e.h)),e.h=null,e.g=0))}function js(e){this.g=0,this.h=e}function Ke(e){if(!e.oa())throw new E(2,2,3e3);return e.h[e.g++]}function Nw(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Lw(e,t,n,i){if(128<=n&&135>=n)e.h[i=7&n]&&(e.g=e.h[i]);else{if(136===n){n=Ke(t).value,t=null;for(var r=(n=p(to(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=gi(r,i,e.i)),Pl(r);return t}if(137===n)for(n=(t=p(to(e,t=Ke(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=Ke(t).value,t=null,r=(n=p(to(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=gi(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=Ke(t).value,t=null,r=(n=p(to(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=gi(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return kp(e,t=Ke(t).value,i);if(143===n)return i=kp(e,255,i),Dp(e),i;if(144===n)t.skip(1),i=Ke(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i));else if(145===n)i=Ke(t).value,n=Ke(t).value,t.skip(1),e.g&&(t=Rp((48&n)>>4,(12&n)>>2,3&n),e.g.s=Rp((48&i)>>4,(12&i)>>2,3&i),e.g.m=t);else if(146===n)i=Ke(t).value,t=Ke(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=Ke(t).value,t.skip(1),e.g&&(e.g.C=3&i);else if(152<=n&&159>=n){if(!(r=null!==e.h[n=(15&n)-8])){var o=new Mp;o.j=i,e.h[n]=o}i=Ke(t).value,Ke(t),Ke(t),o=Ke(t).value;var s=Ke(t).value;t=Ke(t).value,r&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&o),t.A=1+(63&s),e.g=e.h[n]}}}return null}function to(e,t){for(var n=[],i=0;8>i;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function kp(e,t,n){for(var i=null,r=(t=p(to(e,t))).next();!r.done;r=t.next()){var o=e.h[r=r.value];o.isVisible()&&(i=gi(o,n,e.i)),e.h[r]=null}return i}function Dp(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Rp(e,t,n){var i={0:0,1:0,2:1,3:1};return Pw[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}js.prototype.oa=function(){return this.g<this.h.length},js.prototype.la=function(){return this.g},js.prototype.skip=function(e){if(this.g+e>this.h.length)throw new E(2,2,3e3);this.g+=e};var Np=new Map([[32," "],[33,"\xa0"],[37,"\u2026"],[42,"\u0160"],[44,"\u0152"],[48,"\u2588"],[49,"\u2018"],[50,"\u2019"],[51,"\u201c"],[52,"\u201d"],[53,"\u2022"],[57,"\u2122"],[58,"\u0161"],[60,"\u0153"],[61,"\u2120"],[63,"\u0178"],[118,"\u215b"],[119,"\u215c"],[120,"\u215d"],[121,"\u215e"],[122,"\u2502"],[123,"\u2510"],[124,"\u2514"],[125,"\u2500"],[126,"\u2518"],[127,"\u250c"]]),Pw="black blue green cyan red magenta yellow white".split(" ");function no(){this.h=[],this.g=[],this.i=new Dw,this.l=0,this.m=new Map([["CC1",new Ls(0,0)],["CC2",new Ls(0,1)],["CC3",new Ls(1,0)],["CC4",new Ls(1,1)]]),this.s=this.o=0,this.j=new Map,this.u=!0,_l(this)}function _l(e){e.o=0,e.s=0;for(var t=p(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=Ap,n.g=n.j,n.m=null,Qr(n.i),Qr(n.j),Qr(n.o);e.u=!0}function jw(e,t){var n=t.type;if(16==(112&t.Na)){var i=t.Na>>3&1;0===n?e.o=i:e.s=i}if(n=e.m.get("CC"+(n<<1|(n?e.s:e.o)+1)),255===t.Na&&255===t.gb||!t.Na&&!t.gb||!Lp(t.Na)||!Lp(t.gb))return 45<=++e.l&&_l(e),null;if(e.l=0,t.Na&=127,t.gb&=127,!t.Na&&!t.gb)return null;if(e=null,16==(112&t.Na))e:{if(n.m===((i=t.Na)<<8|(e=t.gb)))n.m=null;else if(n.m=i<<8|e,16==(240&i)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1];var r=(30&e)>>1;i="white";var o=!1;7>r?i=Ip[r]:7===r&&(o=!0),e=1==(1&e),n.h!==eo&&(r=n.g,n.h===Ps&&t!==r.g&&(vp(r,n=1+t-r.h,1+r.g-r.h,r.h),Dn(r,0,n-1),Dn(r,t+1,15-t)),r.g=t,r.m=e,r.j=o,r.l=i,r.o="black")}else if(17==(247&i)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",or(n.g,Zr,32),i=!1,"white_italics"===(t=Ip[(14&e)>>1])&&(t="white",i=!0),n.g.m=1==(1&e),n.g.j=i,n.g.l=t;else if(16==(247&i)&&32==(240&e)||23==(247&i)&&45==(255&e))t="black",!(7&i)&&(t=Iw[(14&e)>>1]),n.g.o=t;else if(17==(247&i)&&48==(240&e))or(n.g,yp,e);else if(18==(246&i)&&32==(224&e))or(n.g,1&i?Tp:wp,e);else if(20==(246&i)&&32==(240&e)){switch(e=t.pts,i=null,t.gb){case 32:Sp(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Ll(n,2,e);break;case 38:i=Ll(n,3,e);break;case 39:i=Ll(n,4,e);break;case 40:or(n.g,Zr,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Qr(n.o),Ep(n);break;case 43:Ep(n);break;case 44:t=n.i,i=null,n.h!==eo&&(i=Ns(t,n.l,e)),Dn(t,0,15);break;case 45:t=n.g,n.h!==Ps?i=null:(i=Ns(t,n.l,e),vp(t,(o=t.g-t.h+1)-1,o,t.h),Dn(t,0,o-1),Dn(t,t.g,15-t.g),n.l=e);break;case 46:Dn(n.j,0,15);break;case 47:t=null,n.h!==eo&&(t=Ns(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Sp(n),n.l=e,i=t}e=i;break e}e=null}else i=t.gb,or(n.g,Zr,t.Na),or(n.g,Zr,i);return e}function _w(e,t){var n=[];try{for(;t.oa();){var i=Ke(t).value,r=(224&i)>>5,o=31&i;if(7===r&&0!=o&&(r=63&Ke(t).value),0!=r){e.j.has(r)||e.j.set(r,new Nw(r));for(var s=e.j.get(r),u=t.la();t.la()-u<o;){var a=Ke(r=t),l=a.value,c=a.pts;if(16===l&&(l=l<<16|Ke(r).value),0<=l&&31>=l){var h=c;if(s.g){var g=s.g;switch(r=null,l){case 8:!Cp(g)||0>=g.g&&0>=g.h||(0>=g.g?(g.g=g.A-1,g.h--):g.g--,g.i[g.h][g.g]=null);break;case 13:if(g.isVisible()&&(r=gi(g,h,s.i)),g.h+1>=g.F){h=g;for(var m=0,w=1;16>w;w++,m++)h.i[m]=h.i[w];for(w=0;1>w;w++,m++)h.i[m]=jl()}else g.h++;g.g=0;break;case 14:g.isVisible()&&(r=gi(g,h,s.i)),g.i[g.h]=jl(),g.g=0;break;case 12:g.isVisible()&&(r=gi(g,h,s.i)),Pl(g),(h=g).h=0,h.g=0}var v=r}else v=null}else if(128<=l&&159>=l)v=Lw(s,r,l,c);else{if(4096<=l&&4127>=l)8<=(h=255&l)&&15>=h?r.skip(1):16<=h&&23>=h?r.skip(2):24<=h&&31>=h&&r.skip(3);else if(4224<=l&&4255>=l)128<=(h=255&l)&&135>=h?r.skip(4):136<=h&&143>=h&&r.skip(5);else if(32<=l&&127>=l)r=l,s.g&&pi(s.g,127===r?"\u266a":String.fromCharCode(r));else if(160<=l&&255>=l)s.g&&pi(s.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=255&l,s.g)if(Np.has(r)){var T=Np.get(r);pi(s.g,T)}else pi(s.g,"_")}else 4256<=l&&4351>=l&&s.g&&pi(s.g,160!=(255&l)?"_":"[CC]");v=null}(r=v)&&n.push(r)}}}}catch(x){if(!(x instanceof E&&3e3===x.code))throw x;zn("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Lp(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Pp(e){for(var t=[],n=e,i=e=0;i<n.length;)2==e&&3==n[i]?(e=0,(n=[].concat(q(n))).splice(i,1),n=new Uint8Array(n)):0==n[i]?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;255==e[i];)n+=255,i++;n+=e[i++];for(var r=0;255==e[i];)r+=255,i++;r+=e[i++],4==n&&t.push(e.subarray(i,i+r)),i+=r}return t}function _s(){this.j=new Map,this.i=this.h=0,this.g=Ol}no.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,_l(this);for(var t=(e=p(this.j.values())).next();!t.done;t=e.next())Dp(t.value)},no.prototype.extract=function(e,t){if(this.u){for(var n=p(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.u=!1}if(181===(e=new ve(e,0)).ua()&&49===e.Ua()&&1195456820===e.L()&&3===e.ua()&&0!=(64&(n=e.ua())))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.ua(),o=(4&r)>>2,s=e.ua(),u=e.ua();o&&(0==(r&=3)||1===r?this.h.push({pts:t,type:r,Na:s,gb:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},no.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=p(this.h),i=n.next();!i.done;i=n.next())(i=jw(this,i.value))&&t.push(i);for(i=(n=p(this.g)).next();!i.done;i=n.next())Rw(this.i,i.value);for(i=(n=p(this.i.i)).next();!i.done;i=n.next())i=_w(this,i.value),t.push.apply(t,q(i));return this.i.i=[],this.h=[],this.g=[],t},U("shaka.cea.CeaDecoder",no),Ei=function(){return new no},_s.prototype.init=function(e){function t(o){(o=o.name)in Os&&(n.g=Os[o])}var n=this,i=[],r=[];if((new xe).box("moov",de).box("mvex",de).O("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.L(),s=s.L(),n.h=o,n.i=s}).box("trak",de).O("tkhd",function(o){o=Eh(o.reader,o.version),i.push(o.trackId)}).box("mdia",de).O("mdhd",function(o){o=is(o.reader,o.version),r.push(o.timescale)}).box("minf",de).box("stbl",de).O("stsd",Fi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",$o).box("sinf",de).box("frma",function(o){(o=Ih(o.reader).aa)in Os&&(n.g=Os[o])}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new E(2,2,2010);this.g==Ol&&ce("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},_s.prototype.parse=function(e){var t=this;if(this.g==Ol)return[];var n=[],i=this.h,r=this.i,o=0,s=[],u=null,a=9e4;return(new xe).box("moof",function(l){o=l.start,s=[],de(l)}).box("traf",de).O("trun",function(l){l=Sh(l.reader,l.version,l.flags),s.push(l)}).O("tfhd",function(l){l=xh(l.reader,l.flags),i=l.Hf||t.h,r=l.Fg||t.i,t.j.has(l=l.trackId)&&(a=t.j.get(l))}).O("tfdt",function(l){u=Ma(l.reader,l.version).baseMediaDecodeTime}).box("mdat",function(l){if(null===u)throw ce("Unable to find base media decode time for CEA captions!"),new E(2,2,2010);!function Ow(e,t,n,i,r,o,s,u,a){var l=0,c=o,f=u.map(function(m){return m.$f});for((f=[].concat.apply([],q(f))).length&&(c=f[0].sampleSize||o),t.skip(s+u[0].Eg);t.oa();){s=t.L();var h=t.ua(),g=null;switch(g=!1,u=1,e.g){case Ul:g=6==(g=31&h);break;case io:u=2,t.skip(1),g=39==(g=h>>1&63)||40==g;break;default:return}if(g)for(h=0,l<f.length&&(h=f[l].Sd||0),h=(n+h)/i,g=(u=p(Pp(t.mb(s-u)))).next();!g.done;g=u.next())a.push({packet:g.value,pts:h});else try{t.skip(s-u)}catch{break}0==(c-=s+4)&&(n=l<f.length?n+(f[l].gf||r):n+r,c=++l<f.length&&f[l].sampleSize||o)}}(t,l.reader,u,a,i,r,o-l.start-8,s,n)}).parse(e,!1),n},U("shaka.cea.Mp4CeaParser",_s);var Ol=0,Ul=1,io=2,Os={avc1:Ul,avc3:Ul,hev1:io,hvc1:io,dvh1:io,dvhe:io};function Us(){}function jp(e,t,n){var i=function Vw(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())(n=qw(n.value))&&t.push(n);return t}(e),r=null;e=[];var o=[],s=null,u=new Set(i.map(function(a){return a.keyId}));if(u.delete(null),1<u.size)throw new E(2,4,4010);if(!t){if(1<(o=i.filter(function(a){return"urn:mpeg:dash:sea:2012"==a.$c})).length)throw new E(2,4,4050);o.length&&(s=function Hw(e){if(!P.crypto||!P.crypto.subtle)throw ce("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new E(2,4,4042);var t=xn(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new E(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=t.getAttribute("schemeIdUri"))throw new E(2,4,4051);if(!(t=xn(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new E(2,4,4051);if(e=t.getAttribute("IV"),t=t.getAttribute("keyUriTemplate"),!e||!t)throw new E(2,4,4051);if(16!=(e=oi(e.substr(2))).byteLength)throw new E(2,4,4048);return{oh:t,iv:e}}(o[0])),(o=i.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"==a.$c?(r=a.init||r,!1):"urn:mpeg:dash:sea:2012"!=a.$c})).length&&(e=function bw(e,t,n,i){for(var r=[],o=(t=p(t)).next();!o.done;o=t.next()){var s=n[(o=o.value).$c];if(s){var u;if(u=xn(o.node,"urn:microsoft:playready","pro")){u=qt(u.textContent);var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Qo(u,a,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(a=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.$c)if(0==(a=i).size)a=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);a=[{initData:Qo(new Uint8Array([]),l,a,1),initDataType:"cenc",keyId:o.keyId}]}u=Un(s,o.init||e||u||a),(s=Xw.get(s))&&(u.licenseServerUri=s(o)),r.push(u)}}return r}(r,o,n,u),0==e.length&&(e=[Un("",r)]))}if(i.length&&!s&&(t||!o.length))for(e=[],n=(t=p(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Un(n,r));if(u=Array.from(u)[0]||null)for(n=(t=p(e)).next();!n.done;n=t.next())for(i=(n=p(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=u;return{Gf:u,Ji:r,drmInfos:e,fe:s,Kf:!0}}function Bs(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=xn(e.node,"urn:microsoft:playready","pro"))&&(e=function Bw(e){var t=0,n=ct(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);var r=n.getUint16(e+=2,!0);if(e+=2,1&r||r+e>n.byteLength){n=[];break e}var o=Q(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}(e=qt(e.textContent)).filter(function(n){return n.type===Kw})[0],e)&&(e=qi(e=vn(e.value,!0),"WRMHEADER"))?function Fw(e){for(var t=(e=p(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=p(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function qw(e){var t=e.getAttribute("schemeIdUri"),n=si(e,"urn:mpeg:cenc:2013","default_KID"),i=$f(e,"urn:mpeg:cenc:2013","pssh").map(Zo);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new E(2,4,4009);var r=[];try{r=i.map(function(o){return{initDataType:"cenc",initData:qt(o),keyId:null}})}catch{throw new E(2,4,4007)}return{node:e,$c:t,keyId:n,init:0<r.length?r:null}}Si["video/mp4"]=function(){return new _s},Us.prototype.init=function(){},Us.prototype.parse=function(e){var t=[];if(!Ra(e=Q(e)))return t;var n=(e=(new we).parse(e)).Kc(),i=e.yd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(i=(n=p(i)).next();!i.done;i=n.next())if(e.includes((i=i.value).type)&&null!=i.time)for(var r=p(Pp(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},U("shaka.cea.TsCeaParser",Us),Si["video/mp2t"]=function(){return new Us};var Kw=1,Xw=(new Map).set("com.widevine.alpha",function(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=xn(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Bs).set("com.microsoft.playready.recommendation",Bs).set("com.microsoft.playready.software",Bs).set("com.microsoft.playready.hardware",Bs).set("org.w3.clearkey",function(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=xn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""});function Fs(e,t,n,i,r){var o={RepresentationID:t,Number:n,Bandwidth:i,Time:r};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(s,u,a,l){if("$$"==s)return"$";var c=o[u];if(null==c)return s;switch("RepresentationID"==u&&a&&(a=void 0),"Time"==u&&"bigint"!=typeof c&&(.2<=Math.abs(c-Math.round(c))&&ce("Calculated $Time$ values must be close to integers"),c=Math.round(c)),l){case void 0:case"d":case"i":case"u":s=c.toString();break;case"o":s=c.toString(8);break;case"x":s=c.toString(16);break;case"X":s=c.toString(16).toUpperCase();break;default:s=c.toString()}return a=P.parseInt(a,10)||1,Array(Math.max(0,a-s.length)+1).join("0")+s})}function _p(e,t){var n=cn(e,t,"timescale"),i=1;n&&(i=An(n)||1);var r=cn(e,t,"duration");n=An(r||""),"image"==e.J.contentType&&(n=_r(r||"")),n&&(n/=i);var o=cn(e,t,"startNumber");r=Number(cn(e,t,"presentationTimeOffset"))||0;var s=ut(o||"");if((null==o||null==s)&&(s=1),o=bs(e,t,"SegmentTimeline"),t=null,o){t=i,e=e.X.duration||1/0,o=Me(o,"S");for(var u=[],a=-r,l=0;l<o.length;++l){var c=o[l],f=o[l+1],h=oe(c,"t",ut),g=oe(c,"d",ut);if(c=oe(c,"r",Qf),null!=h&&(h-=r),!g)break;if(h=h??a,0>(c=c||0))if(f){if(null==(f=oe(f,"t",ut)))break;if(h>=f)break;c=Math.ceil((f-h)/g)-1}else{if(e==1/0)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/g)-1}for(0<u.length&&h!=a&&(u[u.length-1].end=h/t),f=0;f<=c;++f)u.push({start:h/t,end:(a=h+g)/t,wf:h}),h=a}t=u}return{timescale:i,qa:n,jc:s,nb:r/i||0,vf:r,timeline:t}}function cn(e,t,n){return[t(e.J),t(e.fa),t(e.na)].filter(On).map(function(i){return i.getAttribute(n)}).reduce(function(i,r){return i||r})}function bs(e,t,n){return[t(e.J),t(e.fa),t(e.na)].filter(On).map(function(i){return Tn(i,n)}).reduce(function(i,r){return i||r})}function Vs(e,t,n,i,r,o){if(o=void 0===o?0:o,si(e,"http://www.w3.org/1999/xlink","href")){var s=function Gw(e,t,n,i,r,o){for(var s=si(e,"http://www.w3.org/1999/xlink","href"),u=si(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=p(Array.from(e.attributes)),l=a.next();!l.done;l=a.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return ei(new E(2,4,4028));if("onLoad"!=u)return ei(new E(2,4,4027));var c=st([i],[s]);return r.request(0,Ye(c,t)).ga(function(f){if(!(f=ma(f.data,e.tagName)))return ei(new E(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;f.childNodes.length;){var h=f.childNodes[0];f.removeChild(h),e.appendChild(h)}for(h=(f=p(Array.from(f.attributes))).next();!h.done;h=f.next())e.setAttributeNode(h.value.cloneNode(!1));return Vs(e,t,n,c[0],r,o+1)})}(e,t,n,i,r,o);return n&&(s=s.ga(void 0,function(){return Vs(e,t,n,i,r,o)})),s}s=[];for(var u=p(Array.from(e.childNodes)),a=u.next();!a.done;a=u.next())(a=a.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==si(a,"http://www.w3.org/1999/xlink","href")?e.removeChild(a):"SegmentTimeline"!=a.tagName&&s.push(Vs(a,t,n,i,r,o)));return Uf(s).ga(function(){return e})}function qn(e){this.h=ct(e),this.g=new ve(this.h,0)}function Rn(e){var t=Op(e);if(7<t.length)throw new E(2,3,3002);for(var n=0,i=(t=p(t)).next();!i.done;i=t.next())n=256*n+i.value;t=Op(e);e:{for(var r=(i=p(Yw)).next();!r.done;r=i.next())if(Pn(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.la();else{if(8==t.length&&224&t[1])throw new E(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=0==r?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.la()+t<=e.h.byteLength?t:e.h.byteLength-e.g.la(),i=ct(e.h,e.g.la(),t),e.g.skip(t),new $w(n,i)}function Op(e){var t=e.g.la(),n=e.g.ua();if(0==n)throw new E(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Q(e.h,t,n)}qn.prototype.oa=function(){return this.g.oa()};var Yw=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function $w(e,t){this.id=e,this.g=t}function Bl(e){if(8<e.g.byteLength)throw new E(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new E(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function Qw(e){var t=new qn(e.g);if(179!=(e=Rn(t)).id)throw new E(2,3,3013);if(e=Bl(e),183!=(t=Rn(t)).id)throw new E(2,3,3012);t=new qn(t.g);for(var n=0;t.oa();){var i=Rn(t);if(241==i.id){n=Bl(i);break}}return{Rh:e,Bh:n}}function Up(e,t,n){if(!(t=bs(e,t,"Initialization")))return null;var i=e.J.za,r=t.getAttribute("sourceURL");r&&(i=st(e.J.za,[r])),r=0;var o=null;return(t=oe(t,"range",es))&&(r=t.start,o=t.end),new It(function(){return i},r,o,Vp(e),null,null,n)}function Bp(e,t,n,i,r,o,s){var u,a,l,c,f,h,g,m,w,v,T,x,S,A,I;return C(function(M){if(1==M.g)return u=e.presentationTimeline,a=!e.sb||!e.X.He,l=e.X.start,c=e.X.duration,f=e.J.mimeType.split("/")[1],g=null,m=[(h=t)(i,r,o,!1),"webm"==f?h(n.Ca(),n.Ka,n.pa,!0):null],h=null,y(M,Promise.all(m),2);if(v=(w=M.h)[0],T=w[1]||null,S=l-s,A=l,I=c?l+c:1/0,"mp4"==f)var k=function Ww(e,t,n,i,r,o,s){var u,a=(new xe).O("sidx",function(l){u=function zw(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.L();if(0==a)throw new E(2,3,3005);if(0==s.version)var l=s.reader.L(),c=s.reader.L();else l=s.reader.hc(),c=s.reader.hc();s.reader.skip(2);var f=s.reader.Ua();for(e=e+s.size+c,c=0;c<f;c++){var h=s.reader.L(),g=(2147483648&h)>>>31;h&=2147483647;var m=s.reader.L();if(s.reader.skip(4),1==g)throw new E(2,3,3006);u.push(new J(l/a+n,(l+m)/a+n,function(){return o},e,e+h-1,t,n,i,r)),l+=m,e+=h}return s.parser.stop(),u}(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new E(2,3,3004)}(v,r,i,n,S,A,I);else{if(440786851!=Rn(k=new qn(T)).id)throw new E(2,3,3008);var R=Rn(k);if(408125543!=R.id)throw new E(2,3,3009);k=R.g.byteOffset,R=new qn(R.g);for(var D=null;R.oa();){var L=Rn(R);if(357149030==L.id){D=L;break}}if(!D)throw new E(2,3,3010);for(D=new qn(D.g),L=1e6,R=null;D.oa();){var j=Rn(D);if(2807729==j.id)L=Bl(j);else if(17545==j.id)if(4==j.g.byteLength)R=j.g.getFloat32(0);else{if(8!=j.g.byteLength)throw new E(2,3,3003);R=j.g.getFloat64(0)}}if(null==R)throw new E(2,3,3011);if(R*=D=L/1e9,475249515!=(L=Rn(new qn(v))).id)throw new E(2,3,3007);k=function Jw(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new qn(e.g);for(var f=null,h=null;e.oa();){var g=Rn(e);if(187==g.id){var m=Qw(g);m&&(g=n*m.Rh,m=t+m.Bh,null!=f&&c.push(new J(f+s,g+s,l,h,m-1,o,s,u,a)),f=g,h=m)}}return null!=f&&c.push(new J(f+s,i+s,l,h,null,o,s,u,a)),c}(L,k,D,R,i,n,S,A,I)}return u.Vc(x=k),g=new fe(x),a&&g.Xb(A,I,!0),M.return(g)})}function sr(e){return e.bd}function Fp(e){var t=bs(e,sr,"RepresentationIndex");return e=es((e=cn(e,sr,"indexRange"))||""),t&&(e=oe(t,"range",es,e)),e}function bp(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=le&&"mp4"!=n&&"webm"!=n)throw new E(2,4,4006);if("webm"==n&&!t)throw new E(2,4,4005)}function Vp(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Nd,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function qp(e){return e.xb}function qs(e){return e.cd}function Hs(e,t,n,i,r,o,s,u,a){fe.call(this,[]),this.h=e,this.F=t,this.u=n,this.A=i,this.j=r,this.o=o,this.C=s,this.s=a,u&&Kp(this)}function Hp(e,t,n,i,r){if(e.h){var o=(n=e.h.timeline)[n.length-1];0<(t=t.timeline.filter(function(s){return s.start>=o.end})).length&&e.h.timeline.push.apply(e.h.timeline,q(t)),e.o!==i&&(e.o=i)}else e.h=t,e.j=n,e.o=i;r&&Kp(e)}function Kp(e){if(!e.m){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.o;)t.pop();e.Za(e.j),0!==t.length&&e.o!==1/0&&(t[t.length-1].end=e.o-e.j)}}function Zt(){this.j=[],this.g=[],this.i=[],this.l=[],this.h=[],this.m=new Set}function Xp(e){var t,n,i,r,o,s,u,l,c,h,g,m,w,v,T,x,S,I,M,k,R,D,j;return C(function(_){switch(_.g){case 1:if(t=ze,1==e.length)return _.return(e[0]);for(n=e.map(function(B){return B.filter(function(H){return H.type==t.T})}),i=e.map(function(B){return B.filter(function(H){return H.type==t.ka})}),r=e.map(function(B){return B.filter(function(H){return H.type==t.ea})}),o=e.map(function(B){return B.filter(function(H){return H.type==t.zc})}),s=p(r),u=s.next();!u.done;u=s.next())u.value.push($p(t.ea));for(l=p(o),c=l.next();!c.done;c=l.next())c.value.push($p(t.zc));return y(_,Hn([],n,0,Ks,Xs),2);case 2:return h=_.h,y(_,Hn([],i,0,Ks,Xs),3);case 3:return g=_.h,y(_,Hn([],r,0,Ks,Xs),4);case 4:return m=_.h,y(_,Hn([],o,0,Ks,Xs),5);case 5:if(w=_.h,v=0,g.length&&h.length)for(I=p(h),M=I.next();!M.done;M=I.next())for(k=M.value,R=p(g),D=R.next();!D.done;D=R.next())j=v++,D.value.variantIds.push(j),k.variantIds.push(j);else for(T=g.concat(h),x=p(T),S=x.next();!S.done;S=x.next())S.value.variantIds=[v++];return _.return(g.concat(h).concat(m).concat(w))}})}function Hn(e,t,n,i,r){var o,s,u,a,l,h,g,w,v,x,S,I,M,R;return C(function(L){switch(L.g){case 1:for(o=ze,s=[],u=0;u<t.length;u++)s.push(u>=n?new Set(t[u]):new Set);a=p(e),l=a.next();case 2:if(l.done){L.B(4);break}return y(L,function gT(e,t,n,i,r){return C(function(o){return 1==o.g?(zp(t,e),e.matchedStreams?e.segmentIndex?y(o,Gp(e,n),2):o.B(2):o.return(!1)):(Wp(e,n,i,r),o.return(!0))})}(l.value,t,n,r,s),5);case 5:if(!L.h)throw new E(2,4,4037);l=a.next(),L.B(2);break;case 4:for(h=p(s),g=h.next();!g.done;g=h.next())for(w=p(g.value),v=w.next();!v.done;v=w.next())(x=mT(v.value,t,i,r,s))&&e.push(x);for(S=p(s),g=S.next();!g.done;g=S.next())for(I={},M=p(g.value),v=M.next();!v.done;I={rb:I.rb},v=M.next())if(I.rb=v.value,R=I.rb.type==o.zc&&!I.rb.tilesLayout,(I.rb.type!=o.ea||I.rb.language)&&!R&&e.some(function(j){return function(_){return _.mimeType==j.rb.mimeType&&bt(_.codecs)==bt(j.rb.codecs)}}(I)))throw new E(2,4,4037);return L.return(e)}})}function Gp(e,t){var n,i,r,o,s,u,a;return C(function(l){if(1==l.g){for(n=[],r=p(i=e.matchedStreams),o=r.next();!o.done;o=r.next())n.push((s=o.value).createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return y(l,Promise.all(n),2)}if(e.segmentIndex instanceof Be)for(u=t;u<i.length;u++)(a=i[u]).segmentIndex&&e.segmentIndex.h.push(a.segmentIndex);F(l)})}function mT(e,t,n,i,r){var o=n(e);return zp(t,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return C(function(s){return o.segmentIndex?s.B(0):(o.segmentIndex=new Be,y(s,Gp(o,0),0))})}),o.matchedStreams&&o.matchedStreams.length?(Wp(o,0,i,r),o):null}function Wp(e,t,n,i){for(var r=e.matchedStreams,o=0;o<r.length;o++)if(o>=t){var s=r[o];n(e,s);var u=!0;"audio"==e.type&&0==Qn(e.language,s.language)&&(u=!1),u&&i[o].delete(s)}}function ro(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=p(t.matchedStreams),i=n.next();!i.done;i=n.next())(i=i.value).segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Ks(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ur(e,t){var s;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(s=t.keyIds,new Set([].concat(q(e.keyIds),q(s)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=Ta(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new E(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=p(t.closedCaptions)).next();!i.done;i=n.next()){var r=p(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=ro(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),ur(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ur(e.trickModeVideo,t)}function Xs(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(q(e.keyIds),q(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,q(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=p(t.closedCaptions)).next();!n.done;n=t.next()){var i=p(n.value);n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}}function zp(e,t){for(var n=[],i=(e=p(e)).next();!i.done;i=e.next()){for(var r=t,o={audio:Yp,video:Yp,text:vT,image:yT}[r.type],s={audio:wT,video:TT,text:xT,image:ST}[r.type],u=null,a=(i=p(i.value)).next();!a.done;a=i.next())!o(r,a=a.value)||u&&!s(r,u,a)||(u=a);if(!(r=u))return;n.push(r)}t.matchedStreams=n}function Yp(e,t){function n(i){if(!Fl.has(i)){var r=bt(i);Fl.set(i,r)}return Fl.get(i)}return!(t.mimeType!=e.mimeType||n(t.codecs)!=n(e.codecs)||e.drmInfos&&!fh(e.drmInfos,t.drmInfos))}function vT(e,t){return!(!e.language||t.language&&(0==Qn(e.language,t.language)||t.kind!=e.kind))}function yT(e){return!!e.tilesLayout}function wT(e,t,n){if(e.id==n.id)return!0;var i=Qn(e.language,t.language),r=Qn(e.language,n.language);return r>i||!(r<i)&&(e.roles.length?(i=t.roles.filter(function(o){return e.roles.includes(o)}),(r=n.roles.filter(function(o){return e.roles.includes(o)})).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!((n.roles.length||!t.roles.length)&&(n.roles.length&&!t.roles.length||(t.primary||!n.primary)&&(t.primary&&!n.primary||(i=oo(e.channelsCount,t.channelsCount,n.channelsCount))!=en&&(i==Nn||(i=oo(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))!=en&&(i==Nn||!e.bandwidth||Qp(e.bandwidth,t.bandwidth,n.bandwidth)!=en))))))}function TT(e,t,n){if(e.id==n.id)return!0;var i=oo(e.width*e.height,t.width*t.height,n.width*n.height);if(i==en)return!0;if(i==Nn)return!1;if(e.frameRate){if((i=oo(e.frameRate,t.frameRate,n.frameRate))==en)return!0;if(i==Nn)return!1}return!(!e.bandwidth||Qp(e.bandwidth,t.bandwidth,n.bandwidth)!=en)}function xT(e,t,n){if(e.id==n.id)return!0;var i=Qn(e.language,t.language),r=Qn(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),(r=n.roles.filter(function(o){return e.roles.includes(o)})).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function ST(e,t,n){return e.id==n.id||oo(e.width*e.height,t.width*t.height,n.width*n.height)==en}function $p(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Jp(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new fe([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function oo(e,t,n){if(t==e&&e!=n)return Nn;if(n==e&&e!=t)return en;if(t>e){if(n<=e||n-e<t-e)return en;if(n-e>t-e)return Nn}else{if(n>e)return Nn;if(e-n<e-t)return en;if(e-n>e-t)return Nn}return Zp}function Qp(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?en:t<e?Nn:Zp}Qe(Hs,fe),(d=Hs.prototype).Db=function(){return this.h?this.h.timeline.length:0},d.release=function(){fe.prototype.release.call(this),this.h=null},d.Za=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.Db()&&this.release())}},d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>this.o)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.j;if(r=r.end+this.j,i<n&&(r=t[i+1].start+this.j),e>=o&&e<r)return i+this.i}return null},d.get=function(e){var t=this,n=e-this.i;if(0>n||n>=this.Db()||!this.h)return null;var i=this.g[n];if(!i){var r=e+this.h.jc,o=this.h.vf+(i=this.h.timeline[n]).wf;i=new J(this.j+i.start,this.j+i.end,function(){return t.h?function cT(e,t,n,i,r,o){return st(o,[e=Fs(e,t,n,i||null,r)]).map(function(s){return s.toString()})}(t.h.Re,t.F,r,t.u,o,t.A):[]},0,null,this.C,this.j-this.h.nb,this.j,this.o,[],"",null,null,ui,this.s),this.g[n]=i}return i},(d=Zt.prototype).release=function(){for(var e=p(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.i=[],this.l=[],this.h=[],this.j=[]},d.eh=function(){return this.j},d.Ee=function(){return this.l.slice()},d.Ng=function(){return this.h},d.Df=function(e,t){var i,r,o,s,u,a,l,c,f,h,g,w,v,x,S,A,I,M,k,R,D,L,j,_,B,H,z,re,n=this;return C(function(se){switch(se.g){case 1:if(i=ze,function fT(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){for(var n=[],i=p((t=t.value).audioStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=!1,s=p(n),u=s.next();!u.done;u=s.next())r.id!=(u=u.value).id&&r.channelsCount==u.channelsCount&&r.language==u.language&&r.bandwidth==u.bandwidth&&r.label==u.label&&r.codecs==u.codecs&&r.mimeType==u.mimeType&&xr(r.roles,u.roles)&&r.audioSamplingRate==u.audioSamplingRate&&r.primary==u.primary&&(o=!0);o||n.push(r)}t.audioStreams=n}}(e),function dT(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){for(var n=[],i=p((t=t.value).videoStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=!1,s=p(n),u=s.next();!u.done;u=s.next())r.id!=(u=u.value).id&&r.width==u.width&&r.frameRate==u.frameRate&&r.codecs==u.codecs&&r.mimeType==u.mimeType&&r.label==u.label&&xr(r.roles,u.roles)&&C0(r.closedCaptions,u.closedCaptions)&&r.bandwidth==u.bandwidth&&(o=!0);o||n.push(r)}t.videoStreams=n}}(e),function hT(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){for(var n=[],i=p((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=!1,s=p(n),u=s.next();!u.done;u=s.next())r.id!=(u=u.value).id&&r.language==u.language&&r.label==u.label&&r.codecs==u.codecs&&r.mimeType==u.mimeType&&r.bandwidth==u.bandwidth&&xr(r.roles,u.roles)&&(o=!0);o||n.push(r)}t.textStreams=n}}(e),function pT(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){for(var n=[],i=p((t=t.value).imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=!1,s=p(n),u=s.next();!u.done;u=s.next())r.id!=(u=u.value).id&&r.width==u.width&&r.codecs==u.codecs&&r.mimeType==u.mimeType&&(o=!0);o||n.push(r)}t.imageStreams=n}}(e),!t&&1==e.length){n.g=(r=e[0]).audioStreams,n.i=r.videoStreams,n.l=r.textStreams,n.h=r.imageStreams,se.B(2);break}for(o=-1,s=0;s<e.length;s++)n.m.has((u=e[s]).id)||(n.m.add(u.id),-1==o&&(o=s));if(-1==o)return se.return();for(a=e.map(function(ye){return ye.audioStreams}),l=e.map(function(ye){return ye.videoStreams}),c=e.map(function(ye){return ye.textStreams}),f=e.map(function(ye){return ye.imageStreams}),h=p(c),g=h.next();!g.done;g=h.next())g.value.push(Jp(i.ea));for(w=p(f),v=w.next();!v.done;v=w.next())v.value.push(Jp(i.zc));return y(se,Hn(n.g,a,o,ro,ur),3);case 3:return y(se,Hn(n.i,l,o,ro,ur),4);case 4:return y(se,Hn(n.l,c,o,ro,ur),5);case 5:return y(se,Hn(n.h,f,o,ro,ur),2);case 2:if(x=0,S=[],n.i.length&&n.g.length)for(D=p(n.g),L=D.next();!L.done;L=D.next())for(j=L.value,_=p(n.i),B=_.next();!B.done;B=_.next())z=Ta(j.drmInfos,(H=B.value).drmInfos),j.drmInfos.length&&H.drmInfos.length&&!z.length||(re=x++,S.push({id:re,language:j.language,disabledUntilTime:0,primary:j.primary,audio:j,video:H,bandwidth:(j.bandwidth||0)+(H.bandwidth||0),drmInfos:z,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(A=n.i.concat(n.g),I=p(A),M=I.next();!M.done;M=I.next())R=x++,S.push({id:R,language:(k=M.value).language,disabledUntilTime:0,primary:k.primary,audio:k.type==i.T?k:null,video:k.type==i.ka?k:null,bandwidth:k.bandwidth||0,drmInfos:k.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=S,F(se)}})},U("shaka.util.PeriodCombiner",Zt),Zt.prototype.combinePeriods=Zt.prototype.Df,Zt.prototype.getImageStreams=Zt.prototype.Ng,Zt.prototype.getTextStreams=Zt.prototype.Ee,Zt.prototype.getVariants=Zt.prototype.eh;var en=1,Zp=0,Nn=-1,Fl=new Map;function so(){var e=this;this.h=this.g=null,this.s=[],this.i=null,this.H=1,this.l={},this.K={},this.j=new Zt,this.C=0,this.G=new Ti(5),this.F=new ie(function(){!function kT(e){var t,n;C(function(i){switch(i.g){case 1:return t=0,ee(i,2),y(i,bl(e),4);case 4:t=i.h,ue(i,3);break;case 2:if(n=te(i),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(n),i.return();n.severity=1,e.h.onError(n)}case 3:if(!e.h)return i.return();e.h.onManifestUpdated(),tg(e,t),F(i)}})}(e)}),this.A=new Lr,this.u=null,this.I=[],this.m=1/0,this.o=!1}function bl(e){var t,n,i,r,o;return C(function(s){return 1==s.g?(t=Ye(e.s,e.g.retryParameters),n=Date.now(),y(s,ql(e,t,0,{type:4}),2)):3!=s.g?(i=s.h,e.h?(i.uri&&!e.s.includes(i.uri)&&e.s.unshift(i.uri),y(s,function ET(e,t,n){var i,s;return C(function(a){if(1==a.g){if(!(i=ma(t,"MPD")))throw new E(2,4,4001,n);return e.g.dash.disableXlinkProcessing?a.return(eg(e,i,n)):(s=Vs(i,e.g.retryParameters,e.g.dash.xlinkFailGracefully,n,e.h.networkingEngine),Ui(e.A,s),y(a,s.promise,2))}return a.return(eg(e,a.h,n))})}(e,i.data,i.uri),3)):s.return(0)):(r=Date.now(),e.G.sample(1,o=(r-n)/1e3),s.return(o))})}function eg(e,t,n){var i,r,o,s,u,a,l,c,h,g,m,v,x,S,A,I,M,k,R,j,_,B,H,z,se,ye,je;return C(function(Ue){switch(Ue.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),r=[n],0<(o=Me(t,"Location").map(Zo).filter(On)).length&&(s=st(r,o),r=e.s=s),u=Me(t,"BaseURL"),a=u.map(Zo),l=st(r,a),c=0,u&&u.length&&(c=oe(u[0],"availabilityTimeOffset",_r)||0),h=0,e.g.dash.ignoreMinBufferTime||(h=oe(t,"minBufferTime",En)||0),e.C=oe(t,"minimumUpdatePeriod",En,-1),g=oe(t,"availabilityStartTime",Jf),m=oe(t,"timeShiftBufferDepth",En),v=null,e.g.dash.ignoreSuggestedPresentationDelay||(v=oe(t,"suggestedPresentationDelay",En)),x=null,e.g.dash.ignoreMaxSegmentDuration||(x=oe(t,"maxSegmentDuration",En)),S=t.getAttribute("type")||"static",e.i)for(A=e.i.presentationTimeline,I=p(Object.values(e.l)),M=I.next();!M.done;M=I.next())(k=M.value).segmentIndex&&k.segmentIndex.Za(A.jb());else R=e.g.defaultPresentationDelay||1.5*h,A=new Y(g,v??R,e.g.dash.autoCorrectDrift);return A.ic("static"==S),A.R()&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),null==m&&(m=1/0),A.Td(m),j=t.getAttribute("profiles")||"",_={sb:"static"!=S,presentationTimeline:A,na:null,X:null,fa:null,J:null,bandwidth:0,Pf:!1,Wb:c,profiles:j.split(",")},B=function AT(e,t,n,i){var r=oe(i,"mediaPresentationDuration",En),o=[],s=0;i=Me(i,"Period");for(var u=0;u<i.length;u++){var a=i[u],l=i[u+1],c=oe(a,"start",En,s),f=a.id,h=oe(a,"duration",En),g=null;if(l){var m=oe(l,"start",En);null!=m&&(g=m-c)}else null!=r&&(g=r-c);if(null==g&&(g=h),!(null!==e.u&&null!==f&&null!==c&&c<e.u)||e.I.includes(f)||u+1==i.length){if(null!==c&&(null===e.u||c>e.u)&&(e.u=c),s=IT(e,t,n,{start:c,duration:g,node:a,He:null==g||!l}),o.push(s),t.na.id&&g&&(e.K[t.na.id]=g),null==g){s=null;break}s=c+g}}return e.I=o.map(function(w){return w.id}),null!=r?{periods:o,duration:r,If:!1}:{periods:o,duration:s,If:!0}}(e,_,l,t),H=B.duration,z=B.periods,"static"!=S&&B.If||A.Ja(H||1/0),e.m&&!e.o&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.o=e.h.isLowLatencyMode()),e.o?A.dg(e.m):e.m&&ce("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),A.Ue(x||1),y(Ue,e.j.Df(z,_.sb),2);case 2:if(e.o&&(h=0),e.o&&e.m&&(e.C=e.m),e.i){e.i.variants=e.j.j,0<(se=e.j.Ee()).length&&(e.i.textStreams=se),e.i.imageStreams=e.j.h,e.h.filter(e.i),Ue.B(3);break}var Ce=A,Ae=e.j.j,ge=e.j.Ee(),ke=e.j.h,xt=h||0,xo=e.g.dash.sequenceMode,nt=Tn(t,"ServiceDescription");if(nt){var St=Tn(nt,"Latency");nt=Tn(nt,"PlaybackRate"),St=St&&St.getAttribute("max")||nt?{maxLatency:St=St&&St.getAttribute("max")?parseInt(St.getAttribute("max"),10)/1e3:null,maxPlaybackRate:nt=nt?parseFloat(nt.getAttribute("max")):null}:null}else St=null;if(e.i={presentationTimeline:Ce,variants:Ae,textStreams:ge,imageStreams:ke,offlineSessionIds:[],minBufferTime:xt,sequenceMode:xo,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:St},!A.ng()){Ue.B(4);break}return ye=Me(t,"UTCTiming"),y(Ue,function NT(e,t,n){var i,r,o,s,u,a,l,c;return C(function(f){switch(f.g){case 1:i=n.map(function(h){return{scheme:h.getAttribute("schemeIdUri"),value:h.getAttribute("value")}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=p(i),s=o.next();case 2:if(s.done){f.B(4);break}switch(u=s.value,ee(f,5),l=u.value,a=u.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ce("NTP UTCTiming scheme is not supported");break;default:ce("Unrecognized scheme in UTCTiming element",a)}f.B(9);break;case 7:return y(f,ng(e,t,l,"HEAD"),10);case 10:return f.return(f.h);case 8:return y(f,ng(e,t,l,"GET"),11);case 11:return f.return(f.h);case 9:ue(f,3);break;case 5:te(f);case 3:s=o.next(),f.B(2);break;case 4:return ce("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}(e,l,ye),5);case 5:if(je=Ue.h,!e.h)return Ue.return();A.eg(je);case 4:A.Id();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),F(Ue)}})}function IT(e,t,n,i){t.na=Vl(i.node,null,n),t.X=i,t.na.Wb=t.Wb,t.na.id||(t.na.id="__shaka_period_"+i.start);var r=Me(i.node,"EventStream");n=t.presentationTimeline.jb();for(var o=(r=p(r)).next();!o.done;o=r.next())LT(e,i.start,i.duration,o.value,n);if(n=Me(i.node,"AdaptationSet").map(function(c){return function MT(e,t,n){function i(k){switch(k){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.fa=Vl(n,t.na,null);var f,r=!1,o=Me(n,"Role"),s=o.map(function(k){return k.getAttribute("value")}).filter(On),u=void 0,a=t.fa.contentType==le;a&&(u="subtitle");for(var l=(o=p(o)).next();!l.done;l=o.next()){var c=(l=l.value).getAttribute("schemeIdUri");if(null==c||"urn:mpeg:dash:role:2011"==c)switch(l=l.getAttribute("value"),l){case"main":r=!0;break;case"caption":case"subtitle":u=l}}o=null,l=!1;for(var h=(c=p(c=Me(n,"EssentialProperty"))).next();!h.done;h=c.next()){var g=(h=h.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=h.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?f=i(parseInt(h.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=g&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=g&&(l=!0)}for(h=(c=p(c=Me(n,"SupplementalProperty"))).next();!h.done;h=c.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(h=h.value).getAttribute("schemeIdUri")&&(f=i(parseInt(h.getAttribute("value"),10)));c=Me(n,"Accessibility");var w,m=new Map;for(h=(c=p(c)).next();!h.done;h=c.next())if(h=(g=h.value).getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==h)if(h=1,null!=g)for(var v=p(g=g.split(";")),T=v.next();!T.done;T=v.next()){var x=T.value,S=T=void 0;x.includes("=")?(T=(x=x.split("="))[0].startsWith("CC")?x[0]:"CC"+x[0],S=x[1]||"und"):(T="CC"+h,2==g.length?h+=2:h++,S=x),m.set(T,pe(S))}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==h)if(h=1,null!=g)for(T=(g=p(g.split(";"))).next();!T.done;T=g.next())x=v=void 0,(T=T.value).includes("=")?(v="svc"+(T=T.split("="))[0],x=T[1].split(",")[0].split(":").pop()):(v="svc"+h,h++,x=T),m.set(v,pe(x));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==h?null!=g&&(s.push(g),"captions"==g&&(u="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==h&&("1"==g?w="visually impaired":"2"==g&&(w="hard of hearing"));if(l)return null;var A=jp(l=Me(n,"ContentProtection"),e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),I=pe(t.fa.language||"und"),M=n.getAttribute("label");if((l=Me(n,"Label"))&&l.length&&((l=l[0]).textContent&&(M=l.textContent)),n=(l=Me(n,"Representation")).map(function(k){return(k=function CT(e,t,n,i,r,o,s,u,a,l,c){if(t.J=Vl(l,t.fa,null),e.m=Math.min(e.m,t.J.Wb),!function RT(e){var t=e.bd?1:0;return t+=e.xb?1:0,0==(t+=e.cd?1:0)?e.contentType==le||"application"==e.contentType:(1!=t&&(e.bd&&(e.xb=null),e.cd=null),!0)}(t.J))return null;var f=t.X.start;t.bandwidth=oe(l,"bandwidth",An)||0;var h=t.J.contentType,g=h==le||"application"==h;h="image"==h;try{var m=void 0;if(n.fe){var w=st(t.J.za,[n.fe.oh]),v=Ye(w,e.g.retryParameters);m={method:"AES-128",iv:n.fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var D,j;return C(function(_){if(1==_.g)return y(_,ql(e,v,6),2);if(3!=_.g){if(!(D=_.h).data||16!=D.data.byteLength)throw new E(2,4,4049);return j=m,y(_,P.crypto.subtle.importKey("raw",D.data,{name:"AES-CBC"},!0,["decrypt"]),3)}j.cryptoKey=_.h,m.fetchKey=void 0,F(_)})}}}if(w=function(D,L,j,_){return function PT(e,t,n,i,r){var o,s,u;return C(function(l){return 1==l.g?(o=ln,s=r?0:1,u=ba(t,n,i,e.g.retryParameters),y(l,ql(e,u,o,{type:s}),2)):l.return(l.h.data)})}(e,D,L,j,_)},t.J.bd)var T=function Zw(e,t,n){var i=Number(cn(e,sr,"presentationTimeOffset"))||0,r=cn(e,sr,"timescale"),o=1;r&&(o=An(r)||1);var s=i/o||0,u=Up(e,sr,n);!function eT(e,t){if(bp(e,t),!Fp(e))throw new E(2,4,4002)}(e,u);var a=Ff(e);return{Zb:function(){var l=bs(a,sr,"RepresentationIndex"),c=a.J.za;return l&&(l=l.getAttribute("sourceURL"))&&(c=st(a.J.za,[l])),l=Fp(a),Bp(a,t,u,c,l.start,l.end,s)}}}(t,w,m);else if(t.J.xb)T=function tT(e,t,n){var i=Up(e,qp,n),r=function nT(e){var t=function rT(e){return[e.J.xb,e.fa.xb,e.na.xb].filter(On).map(function(t){return Me(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){return t.getAttribute("indexRange")&&!e.Pf&&(e.Pf=!0),{sh:t.getAttribute("media"),start:(t=oe(t,"mediaRange",es,{start:0,end:null})).start,end:t.end}})}(e),n=(e=_p(e,qp)).jc;0==n&&(n=1);var i=0;return e.qa?i=e.qa*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{qa:e.qa,startTime:i,jc:n,nb:e.nb,timeline:e.timeline,cc:t}}(e);if(!r.qa&&!r.timeline&&1<r.cc.length)throw new E(2,4,4002);if(!r.qa&&!e.X.duration&&!r.timeline&&1==r.cc.length)throw new E(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new E(2,4,4002);var o=null,s=null;e.na.id&&e.J.id&&(s=t[e.na.id+","+e.J.id])&&(o=s.segmentIndex);var u=function iT(e,t,n,i,r,o){var s=i.cc.length;i.timeline&&i.timeline.length!=i.cc.length&&(s=Math.min(i.timeline.length,i.cc.length));for(var u=e-i.nb,a=t?e+t:1/0,l=[],c=i.startTime,f={},h=0;h<s;f={xc:f.xc,vc:f.vc},h++){var g;f.vc=i.cc[h],g=null!=i.qa?c+i.qa:i.timeline?i.timeline[h].end:c+t,f.xc=null,l.push(new J(e+c,e+g,function(m){return function(){return null==m.xc&&(m.xc=st(n,[m.vc.sh])),m.xc}}(f),f.vc.start,f.vc.end,r,u,e,a,[],"",null,null,ui,o)),c=g}return l}(e.X.start,e.X.duration,e.J.za,r,i,n);return t=!o,o?o.Uc(u,e.presentationTimeline.jb()):o=new fe(u),e.presentationTimeline.Vc(u),e.sb&&e.X.He||o.Xb(e.X.start,e.X.duration?e.X.start+e.X.duration:1/0,t),s&&(s.segmentIndex=o),{Zb:function(){return o&&0!=o.Db()||o.Kd(u),Promise.resolve(o)}}}(t,e.l,m);else if(t.J.cd)T=function oT(e,t,n,i,r,o,s){var u=function lT(e,t){var n=cn(e,qs,"initialization");if(!n)return null;var i=e.J.id,r=e.bandwidth||null,o=e.J.za;return new It(function(){var s=Fs(n,i,null,r,null);return st(o,[s])},0,null,Vp(e),null,null,t)}(e,s),a=function sT(e){var t=_p(e,qs),n=cn(e,qs,"media");return e=cn(e,qs,"index"),{qa:t.qa,timescale:t.timescale,jc:t.jc,nb:t.nb,vf:t.vf,timeline:t.timeline,Re:n,Rc:e}}(e);!function uT(e){var t=e.Rc?1:0;if(t+=e.timeline?1:0,0==(t+=e.qa?1:0))throw new E(2,4,4002);if(1!=t&&(e.Rc&&(e.timeline=null),e.qa=null),!e.Rc&&!e.Re)throw new E(2,4,4002)}(a);var l=Ff(e);if(a.Rc)return bp(e,u),{Zb:function(){var m=Fs(a.Rc,l.J.id,null,l.bandwidth||null,null);return m=st(l.J.za,[m]),Bp(l,t,u,m,0,null,a.nb)}};if(a.qa)return i||"image"===e.fa.contentType||(e.presentationTimeline.Ue(a.qa),e.presentationTimeline.Md(e.X.start)),{Zb:function(){return function aT(e,t,n,i,r,o){function s(L){var j=(L-m)*g,_=j+t.nb,B=j+c;return j=B+g,(B=new J(B,Math.min(j,a()),function(){var z=_*w;return"BigInt"in P&&z>Number.MAX_SAFE_INTEGER&&(z=BigInt(_)*BigInt(w)),z=Fs(v,x,L,T,z),st(S,[z])},0,null,i,A,c,a(),[],"",null,null,ui,o)).j=j,B}function u(){var L=[Math.max(l.jb(),c),Math.min(l.Eb(),a())].map(function(j){return j-c});return[Math.ceil(L[0]/g),Math.ceil(L[1]/g)-1].map(function(j){return j+m})}function a(){var L=null!=f&&r[f]||h;return L?c+L:1/0}var l=e.presentationTimeline,c=e.X.start,f=e.na.id,h=e.X.duration,g=t.qa,m=t.jc,w=t.timescale,v=t.Re,T=e.bandwidth||null,x=e.J.id,S=e.J.za,A=c-t.nb,I=u();e=e.sb?Math.max(I[0],I[1]-n+1):I[0],I=I[1],n=[];for(var M=e;M<=I;++M){var k=s(M);n.push(k)}var R=new fe(n);if(n=l.Eb()<a(),M=l.R(),n||M){var D=Math.max(e,I+1);R.Vd(g,function(){var L=l.jb();R.Za(L);var j=p(u());j.next(),j=j.next().value;for(var _=[];D<=j;){var B=s(D);_.push(B),D++}return L>a()&&!_.length?null:_})}return Promise.resolve(R)}(l,a,r,u,o,s)}};var c=null;i=i=null,e.na.id&&e.J.id&&(i=n[i=e.na.id+","+e.J.id])&&(c=i.segmentIndex);var f=e.X.start,h=e.X.duration?f+e.X.duration:1/0,g=!(e.sb&&e.X.He);return c?(Hp(n=c,a,f,h,g),n.Za(e.presentationTimeline.jb())):c=new Hs(a,e.J.id,e.bandwidth,e.J.za,f,h,u,g,s),a.timeline&&"image"!==e.fa.contentType&&e.presentationTimeline.Wf(a.timeline,f),i&&e.sb&&(i.segmentIndex=c),{Zb:function(){return c instanceof Hs&&0==c.Db()&&Hp(c,a,f,h,g),Promise.resolve(c)}}}(t,w,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.K,m);else{var x=t.J.za,S=t.X.duration||0;T={Zb:function(){return Promise.resolve(Ba(f,S,x))}}}}catch(D){if((g||h)&&4002==D.code)return null;throw D}w=function Uw(e,t,n,i){var r=jp(e,n,i);if(t.Kf)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Kf=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return r.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),0==t.drmInfos.length))throw new E(2,4,4008);return r.Gf||t.Gf}(w=Me(l,"ContentProtection"),n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),w=new Set(w?[w]:[]);var A=!1;Me(l,"SupplementalProperty").some(function(D){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==D.getAttribute("schemeIdUri")&&"JOC"==D.getAttribute("value")})&&(A=!0);var M,k,I=!1;if(g&&(I=u.includes("forced_subtitle")||u.includes("forced-subtitle")),h&&((l=Me(l,"EssentialProperty").find(function(D){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(D.getAttribute("schemeIdUri"))}))&&(M=l.getAttribute("value")),!M))return null;l=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(k="PQ");var R=(l=t.J.id?t.na.id+","+t.J.id:"")&&e.l[l]?e.l[l]:{id:e.H++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){R.segmentIndex&&(R.segmentIndex.release(),R.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:t.J.codecs,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:w,language:r,originalLanguage:t.fa.language,label:o,type:t.fa.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:u,forced:I,channelsCount:t.J.Nd,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:A,closedCaptions:a,hdr:k,tilesLayout:M,matchedStreams:[],accessibilityPurpose:c,external:!1};return R.createSegmentIndex=function(){var D;return C(function(L){if(1==L.g)return R.segmentIndex?L.B(0):(D=R,y(L,T.Zb(),3));D.segmentIndex=L.h,F(L)})},l&&t.sb&&!e.l[l]&&(e.l[l]=R),R}(e,t,A,u,I,M,r,s,m,k,w))&&(k.hdr=k.hdr||f),k}).filter(function(k){return!!k}),0==n.length){if(o="image"==t.fa.contentType,e.g.dash.ignoreEmptyAdaptationSet||a||o)return null;throw new E(2,4,4003)}if(!t.fa.contentType||"application"==t.fa.contentType)for(t.fa.contentType=ig(n[0].mimeType,n[0].codecs),h=(a=p(n)).next();!h.done;h=a.next())h.value.type=t.fa.contentType;for(a=t.fa.id||"__fake__"+e.H++,h=(c=p(n)).next();!h.done;h=c.next()){for(h=h.value,v=(g=p(A.drmInfos)).next();!v.done;v=g.next())(v=v.value).keyIds=v.keyIds&&h.keyIds?new Set([].concat(q(v.keyIds),q(h.keyIds))):v.keyIds||h.keyIds;e.g.dash.enableAudioGroups&&(h.groupId=a)}return l=l.map(function(k){return k.getAttribute("id")}).filter(On),{id:a,contentType:t.fa.contentType,language:I,Ki:r,streams:n,drmInfos:A.drmInfos,tf:o,Eh:l}}(e,t,c)}).filter(On),t.sb){for(i=[],o=(r=p(n)).next();!o.done;o=r.next())for(var s=(o=p(o.value.Eh)).next();!s.done;s=o.next())i.push(s.value);if(i.length!=new Set(i).size)throw new E(2,4,4018)}for(i=n.filter(function(c){return!c.tf}),r=(n=p(n=n.filter(function(c){return c.tf}))).next();!r.done;r=n.next()){o=(r=r.value).tf.split(" ");for(var u=(s=p(i)).next();!u.done;u=s.next()){var a=u.value;if(o.includes(a.id)){u={};for(var l=(a=p(a.streams)).next();!l.done;u={ld:u.ld},l=a.next())u.ld=l.value,u.ld.trickModeVideo=r.streams.find(function(c){return function(f){return bt(c.ld.codecs)==bt(f.codecs)}}(u))}}}if(r=e.g.disableAudio?[]:Gs(i,"audio"),s=e.g.disableVideo?[]:Gs(i,"video"),o=e.g.disableText?[]:Gs(i,le),n=e.g.disableThumbnails?[]:Gs(i,"image"),!s.length&&!r.length)throw new E(2,4,4004);for(i=[],u=(r=p(r)).next();!u.done;u=r.next())i.push.apply(i,q(u.value.streams));for(r=[],u=(s=p(s)).next();!u.done;u=s.next())r.push.apply(r,q(u.value.streams));for(s=[],u=(o=p(o)).next();!u.done;u=o.next())s.push.apply(s,q(u.value.streams));for(o=[],u=(n=p(n)).next();!u.done;u=n.next())o.push.apply(o,q(u.value.streams));return{id:t.na.id,audioStreams:i,videoStreams:r,textStreams:s,imageStreams:o}}function Gs(e,t){return e.filter(function(n){return n.contentType==t})}function tg(e,t){0>e.C||e.F.U(Math.max(e.C-t,Io(e.G)))}function Vl(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Nd:null,audioSamplingRate:null,Wb:0},n=n||t.za;for(var i=Me(e,"BaseURL"),r=i.map(Zo),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,a=oe(e,"frameRate",R0)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=Me(e,"InbandEventStream"),f=t.emsgSchemeIdUris.slice(),h=(c=p(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),f.includes(h)||f.push(h);c=function DT(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(c=Me(e,"AudioChannelConfiguration"))||t.Nd,h=oe(e,"audioSamplingRate",ut)||t.audioSamplingRate,o||(o=ig(s,u));var g=Tn(e,"SegmentBase"),m=Tn(e,"SegmentTemplate"),w=g&&oe(g,"availabilityTimeOffset",_r)||0,v=m&&oe(m,"availabilityTimeOffset",_r)||0;return i=i&&i.length&&oe(i[0],"availabilityTimeOffset",_r)||0,i=t.Wb+i+w+v,{za:st(n,r),bd:g||t.bd,xb:Tn(e,"SegmentList")||t.xb,cd:m||t.cd,width:oe(e,"width",ut)||t.width,height:oe(e,"height",ut)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:a,pixelAspectRatio:l,emsgSchemeIdUris:f,id:e.getAttribute("id"),language:e.getAttribute("lang"),Nd:c,audioSamplingRate:h,Wb:i}}function ng(e,t,n,i){var r,o,s,u,a,l;return C(function(c){if(1==c.g)return r=st(t,[n]),(o=Ye(r,e.g.retryParameters)).method=i,s=e.h.networkingEngine.request(4,o),Ui(e.A,s),y(c,s.promise,2);if(u=c.h,"HEAD"==i){if(!u.headers||!u.headers.date)return c.return(0);a=u.headers.date}else a=Le(u.data);return l=Date.parse(a),isNaN(l)?c.return(0):c.return(l-Date.now())})}function LT(e,t,n,i,r){for(var o=i.getAttribute("schemeIdUri")||"",s=i.getAttribute("value")||"",u=oe(i,"timescale",ut)||1,a=(i=p(Me(i,"Event"))).next();!a.done;a=i.next()){var l=oe(a=a.value,"presentationTime",ut)||0,c=oe(a,"duration",ut)||0;c=(l=l/u+t)+c/u,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<r||(a={schemeIdUri:o,value:s,startTime:l,endTime:c,id:a.getAttribute("id")||"",eventElement:a},e.h.onTimelineRegionAdded(a))}}function ig(e,t){return Lo(t=Ft(e,t))?le:e.split("/")[0]}function ql(e,t,n,i){return t=e.h.networkingEngine.request(n,t,i),Ui(e.A,t),t.promise}function Ws(){}(d=so.prototype).configure=function(e){this.g=e},d.start=function(e,t){var i,n=this;return C(function(r){if(1==r.g)return n.o=t.isLowLatencyMode(),n.s=[e],n.h=t,y(r,bl(n),2);if(i=r.h,n.h&&tg(n,i),!n.h)throw new E(2,7,7001);return r.return(n.i)})},d.stop=function(){for(var e=p(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.s=[],this.i=null,this.l={},this.j=null,null!=this.F&&(this.F.stop(),this.F=null),this.A.destroy()},d.update=function(){var t,e=this;return C(function(n){return 1==n.g?(ee(n,2),y(n,bl(e),4)):2!=n.g?ue(n,0):(t=te(n),e.h&&t?(e.h.onError(t),void F(n)):n.return())})},d.onExpirationUpdated=function(){},U("shaka.dash.DashParser",so),bn.mpd=function(){return new so},At["application/dash+xml"]=function(){return new so},At["video/vnd.mpeg.dash.mpd"]=function(){return new so},U("shaka.dependencies",Ws),Ws.has=function(e){return Hl.has(e)},Ws.add=function(e,t){if(!og[e])throw Error(e+" is not supported");e==rg?Bn("mux.js","mux.js is no longer used in Shaka Player."):Hl.set(e,function(){return t})};var rg="muxjs",og={Li:rg,ISOBoxer:"ISOBoxer"};Ws.Allowed=og;var Hl=new Map([["ISOBoxer",function(){return P.ISOBoxer}]]);function fn(e,t){return e.filter(function(n){return n.name==t})}function sg(e,t){return e.filter(function(n){return be(n,"TYPE")==t})}function et(e,t){return(e=fn(e,t)).length?e[0]:null}function ar(e,t,n){return n=void 0===n?0:n,(e=et(e,t))?Number(e.value):n}function lr(e,t){return st([e],[t])[0]}function ug(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function Kl(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function $(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function be(e,t){if(!(e=e.getAttribute(t)))throw new E(2,4,4023,t);return e.value}function Xl(e,t,n,i){i=void 0===i?[]:i,this.g=n,this.l=null,this.j=e,this.m=t,this.h=i}function ag(e,t){this.name=e,this.value=t}function mi(e){this.h=e||"",this.g=0}function cr(e){Kn(e,/[ \t]+/gm)}function Kn(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function vi(e){return e.g==e.h.length?null:(e=Kn(e,/[^ \t\n]*/gm))?e[0]:null}function jT(){this.g=0}function Gl(e,t,n){var i=(t=(t=Le(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new E(2,4,4015);t=0;for(var r=!0,o=p(i),s=o.next();!s.done;s=o.next())if(/^#(?!EXT)/m.test(s=s.value)||r)r=!1;else{if(s=Wl(e,s),--e.g,lg.includes(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(r=!0)}for(o=[],r=!0,s=0;s<i.length;s++){var u=i[s],a=i[s+1];if(/^#(?!EXT)/m.test(u)||r)r=!1;else{if(u=Wl(e,u),_T.includes(u.name)){if(1!=t)throw new E(2,4,4017);var l=i.splice(s,i.length-s);i=n,r=[],s=[],a=[],u=null;for(var c=(l=p(l)).next();!c.done;c=l.next())/^(#EXT)/.test(c=c.value)?(c=Wl(e,c),lg.includes(c.name)?o.push(c):"EXT-X-MAP"==c.name?u=c:"EXT-X-PART"==c.name?a.push(c):"EXT-X-PRELOAD-HINT"==c.name?"PART"==$(c,"TYPE")?a.push(c):"MAP"==$(c,"TYPE")&&(c.name="EXT-X-MAP",u=c):s.push(c)):/^#(?!EXT)/m.test(c)||(c=c.trim(),u&&s.push(u),r.push(new Xl(i,c,s,a)),s=[],a=[]);return a.length&&(u&&s.push(u),r.push(new Xl("","",s,a))),new ug(n,t,o,r)}o.push(u),"EXT-X-STREAM-INF"==u.name&&(u.g.push(new ag("URI",a)),r=!0)}}return new ug(n,t,o)}function Wl(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new E(2,4,4016,t);t=n[1];var r,i=n[2];if(n=[],i){var o;(o=Kn(i=new mi(i),/^([^,=]+)(?:,|$)/g))&&(r=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Kn(i,s);)n.push(new ag(o[1],o[2]||o[3])),cr(i)}return new Kl(e,t,n,r)}Kl.prototype.toString=function(){var t="#"+this.name,n=this.g?this.g.map(function e(i){return i.name+"="+(isNaN(Number(i.value))?'"'+i.value+'"':i.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t},Kl.prototype.getAttribute=function(e){var t=this.g.filter(function(n){return n.name==e});return t.length?t[0]:null},Wt.Object.defineProperties(Xl.prototype,{i:{configurable:!0,enumerable:!0,get:function(){return!this.l&&this.j&&this.m&&(this.l=lr(this.j,this.m),this.m=this.j=null),this.l||""}}});var lg="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),_T="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function cg(){}function fg(e){try{var t=zl(e);return _i({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return ei(n)}}function zl(e){var t=e.split(":");if(2>t.length||"data"!=t[0])throw new E(2,1,1004,e);if(2>(t=t.slice(1).join(":").split(",")).length)throw new E(2,1,1004,e);var n=t[0];e=P.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;return 1<t.length&&"base64"==t[t.length-1]&&(i=!0,t.pop()),{data:i?qt(e):yn(e),contentType:n}}function uo(){var e=this;this.g=this.i=null,this.Xa=1,this.s=new Map,this.A=new Map,this.G=new Map,this.G.set("video",new Map),this.G.set("audio",new Map),this.G.set(le,new Map),this.G.set("image",new Map),this.ja=new Set,this.h=new Map,this.j=null,this.N="",this.Z=new jT,this.C=-1,this.K=1/0,this.fb=!1,this.m=new ie(function(){!function ZT(e){var t,n,o,s;C(function(u){switch(u.g){case 1:return e.i?(ee(u,2),t=Date.now(),y(u,e.update(),4)):u.return();case 4:n=Date.now(),gt(e)&&(e.wa.sample(1,(n-t)/1e3),o=Math.max(0,e.l-Io(e.wa)),e.m.U(o)),ue(u,3);break;case 2:if(s=te(u),!e.i)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(s),u.return();s.severity=1,e.i.onError(s),e.m.U(.1);case 3:if(!e.i)return u.return();e.i.onManifestUpdated(),F(u)}})}(e)}),this.da=$s,this.F=null,this.ca=0,this.l=1/0,this.W=this.V=this.H=0,this.I=new Lr,this.M=new Map,this.u=new Map,this.ba=new Map,this.eb=this.o=!1,this.wa=new Ti(5)}function Yl(e,t){return gt(e)?e.G.get(t.type):t.Jd}function OT(e,t){var i,r,o,s,u,a,l,c,f,h,g,w,v,x,S,A,I,k,R;return C(function(_){if(1==_.g)return i=new Ze(t.nd),r=new Ii,t.pd&&(0<=t.Sa&&r.add("_HLS_msn",String(t.Sa)),0<=t.Ta&&r.add("_HLS_part",String(t.Ta))),t.qd&&r.add("_HLS_skip","YES"),zu(r),r.Gc&&No(i,r),y(_,nc(e,i.toString(),!0),2);if(o=_.h,!t.stream.segmentIndex)return _.return();if(1!=(s=Gl(e.Z,o.data,o.uri)).type)throw new E(2,4,4017);var B,H;u=fn(s.g,"EXT-X-DEFINE"),a=dg(e,u),l=t.stream,c=Yl(e,t),f=Sg(s,l.mimeType),g=f.drmInfos,H=h=f.keyIds,(B=l.keyIds).size===H.size&&[].concat(q(B)).every(function(z){return H.has(z)})||(l.keyIds=h,l.drmInfos=g,e.i.newDrmInfo(l)),w=Cg(e,s,l.type,l.mimeType,c,a),v=w.segments,l.bandwidth=w.bandwidth,l.segmentIndex.Uc(v,e.j.jb()),v.length&&(x=ar(s.g,"EXT-X-MEDIA-SEQUENCE",0),A=(S=et(s.g,"EXT-X-SKIP"))?Number($(S,"SKIPPED-SEGMENTS")):0,I=Tg(x,v),k=I.Ta,t.Sa=I.Sa+A,t.Ta=k,R=c.get(x),l.segmentIndex.Za(R)),t.Jb=v[0].startTime,t.kb=v[v.length-1].endTime,et(s.g,"EXT-X-ENDLIST")&&(t.Pc=!0),Zl(e,s),F(_)})}function hg(e,t,n){t.Jb+=n,t.kb+=n;for(var i=(t=p(e=Yl(e,t))).next();!i.done;i=t.next()){var r=p(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}}function $l(e){if(gt(e)){if(e.da==ic){for(var t,n=t=1/0,i=p(e.h.values()),r=i.next();!r.done;r=i.next())(r=r.value).stream.segmentIndex&&"text"!=r.stream.type&&(t=Math.min(t,r.kb),n=Math.min(n,r.Jb));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.Td(t)}}else e.j.Ja(vg(e));e.j.Id()}function dg(e,t){for(var n=new Map,i=(t=p(t)).next();!i.done;i=t.next()){var r=i.value;i=$(r,"NAME");var o=$(r,"VALUE");r=$(r,"IMPORT"),i&&o&&n.set(i,o),r&&(i=e.s.get(r))&&n.set(r,i)}return n}function pg(e,t){var n=[];return e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),gg(e=$(t,"CODECS",n.join(",")).split(/\s*,\s*/))}function gg(e){for(var t=new Set,n=[],i=(e=p(e)).next();!i.done;i=e.next()){var r=sn(i=i.value)[0];t.has(r)||(n.push(i),t.add(r))}return n}function mg(e,t){var n=be(t,"GROUP-ID"),i="",r=be(t,"TYPE").toLowerCase();"subtitles"==r&&(r=le);var o=r;if(o==le?i=$(t,"CODECS")||"":n&&e.u.has(n)&&(i=e.u.get(n)),r=fr(be(t,"URI"),e.s),e.h.has(r))return e.h.get(r);var s=$(t,"LANGUAGE"),u=$(t,"NAME"),a="YES"==$(t,"DEFAULT"),l="audio"==o&&(l=$(t,"CHANNELS"))?parseInt(l.split("/")[0],10):null,c=!("audio"!=o||!(c=$(t,"CHANNELS")))&&c.includes("/JOC");return i=Jl(e,r,i,o,s,a,u,l,null,$(t,"CHARACTERISTICS"),"YES"==$(t,"FORCED"),t="audio"==o&&(t=$(t,"SAMPLE-RATE"))?parseInt(t,10):null,c),e.A.has(n)?e.A.get(n).push(i):e.A.set(n,[i]),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i)}function Jl(e,t,n,i,r,o,s,u,a,l,c,f,h){var m=lr(e.N,t),w=xg(e,n,i,r,o,s,u,a,l,c,f,h),v={stream:w,type:i,dd:t,nd:m,Jb:0,kb:0,Jd:new Map,qd:!1,pd:!1,Pc:!1,me:-1,Sa:-1,Ta:-1,Ne:!1},T=null,x=new AbortController;return w.createSegmentIndex=function(){return T||(x=new AbortController,T=new Promise(function(S){S(function g(S){var A,I,M,k,R,D,L,j,_,B,H,z,re,se;return C(function(ye){if(1==ye.g)return y(ye,nc(e,v.nd,!0),2);if(3!=ye.g)return A=ye.h,S.aborted?ye.return():(M=Gl(e.Z,A.data,I=A.uri),k=gt(e),y(ye,wg(e,M,t,I,n,i,r,o,s,u,a,l,c,f,h),3));if(R=ye.h,S.aborted)return ye.return();if(D=R.stream,gt(e)&&!k&&Ag(e,M),v.nd=I,v.Jb=R.Jb,v.kb=R.kb,v.qd=R.qd,v.pd=R.pd,v.Pc=R.Pc,v.Jd=R.Jd,v.Sa=R.Sa,v.Ta=R.Ta,v.Ne=!0,w.segmentIndex=D.segmentIndex,w.encrypted=D.encrypted,w.drmInfos=D.drmInfos,w.keyIds=D.keyIds,w.mimeType=D.mimeType,w.bandwidth=D.bandwidth,w.drmInfos.length&&e.i.newDrmInfo(w),i==(L=ze).ka||i==L.T)for(j=p(e.h.values()),_=j.next();!_.done;_=j.next())(B=_.value).Ne||B.type!=i||(B.stream.mimeType=D.mimeType);i==L.ea&&(H=D.segmentIndex.get(0))&&H.h&&(w.mimeType="application/mp4"),function YT(e){if(!e.F)return!1;for(var t=[],n=[],i=(e=p(e.F.variants)).next();!i.done;i=e.next())(i=i.value).video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}(e)&&(e.fb?Ql(e,[v]):(e.fb=!0,z=Array.from(e.h.values()),re=z.filter(function(je){return je.stream.segmentIndex}),Ql(e,re),$l(e),0<(se=e.l)&&e.m.U(se))),F(ye)})}(x.signal))}))},w.closeSegmentIndex=function(){T&&!w.segmentIndex&&x.abort(),w.segmentIndex&&(w.segmentIndex.release(),w.segmentIndex=null),T=null},v}function vg(e){for(var t=1/0,n=(e=p(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.kb));return t}function yg(e,t){for(var n=[],i=(t=p(t)).next();!i.done;i=t.next())(i=i.value).segmentIndex&&Ly(i.segmentIndex,function(r){n.push(r)});e.j.Vc(n)}function Ql(e,t){if(!gt(e))for(var n=vg(e),i=p(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Xb(0,n);yg(e,t.map(function(o){return o.stream})),e.g.hls.ignoreManifestProgramDateTime?function UT(e,t){for(var n=-1==e.C,i=p(t),r=i.next();!r.done;r=i.next()){var o=(r=r.value).stream.segmentIndex,s=Yl(e,r);if(o=o.g[0]||null)for(var u=(s=p(s)).next();!u.done;u=s.next()){var a=(u=p(u.value)).next().value;if(u.next().value==o.startTime){n&&(e.C=Math.max(e.C,a)),r.me=a;break}}}if(!(0>e.C))for(r=(t=p(t)).next();!r.done;r=t.next())(i=(n=r.value).stream.segmentIndex)&&(i.g.splice(0,e.C-n.me),(i=i.g[0]||null)&&(n.stream.segmentIndex.offset(i=-i.startTime),hg(e,n,i)))}(e,t):function BT(e,t){if(e.K==1/0)for(var n=(t=p(t)).next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.K=Math.min(e.K,i.g))}if((t=e.K)!=1/0)for(n=(i=p(e.h.values())).next();!n.done;n=i.next()){var r=(n=n.value).stream.segmentIndex;if(null!=r){var o=r.g[0]||null;if(null==o.g)Ln("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.dd,"Expect AV sync issues!");else for(hg(e,n,o.g-t-o.startTime),r=(n=p(r)).next();!r.done;r=n.next())r.value.nf(t)}}}(e,t)}function wg(e,t,n,i,r,o,s,u,a,l,c,f,h,g,m,w){var v,T,x,S,A,I,M,k,R,D,L,j,B,H,z,re,se,ye,je,Ue,Ce,Ae;return C(function(ge){if(1==ge.g){if(1!=t.type)throw new E(2,4,4017);v=fn(t.g,"EXT-X-DEFINE"),T=dg(e,v);var ke=et(t.g,"EXT-X-PLAYLIST-TYPE"),xt=et(t.g,"EXT-X-ENDLIST");return xt=ke&&"VOD"==ke.value||xt,ke=ke&&"EVENT"==ke.value&&!xt,ke=!xt&&!ke,zs(e,xt?$s:ke?ic:Lg),gt(e)&&Zl(e,t),w?ge.B(2):y(ge,function QT(e,t,n,i,r){var o,s,u,a,l,f,h,m;return C(function(w){return 1==w.g?(o=ln,s=Math.trunc((i.segments.length-1)/2),u=fr(i.segments[s].i,r),a=new Ze(u),l=a.ya.split(".").pop(),(f=Rg[t][l])||(f=Dg[l])||(f=ec(t,n))?w.return(f):((h=Ye([u],e.g.retryParameters)).method="HEAD",y(w,Ys(e,h,o,{type:1}),2))):(m=w.h.headers["content-type"])?w.return(m.split(";")[0]):w.return(tc(t))})}(e,o,r,t,T),3)}if(2!=ge.g&&(w=ge.h),x=Sg(t,w),S=x.drmInfos,A=x.keyIds,M=x.ug,(I=x.encrypted)&&!S.length&&!M)throw new E(2,4,4026);return k=gt(e)?e.G.get(o):new Map,R=Cg(e,t,o,w,k,T),D=R.segments,L=R.bandwidth,gt(e)&&Zl(e,t),j=D[0].startTime,B=D[D.length-1].endTime,H=new fe(D),re=!!(z=et(t.g,"EXT-X-SERVER-CONTROL"))&&null!=z.getAttribute("CAN-SKIP-UNTIL"),se=!!z&&null!=z.getAttribute("CAN-BLOCK-RELOAD"),ye=ar(t.g,"EXT-X-MEDIA-SEQUENCE",0),je=Tg(ye,D),Ue=je.Sa,Ce=je.Ta,(Ae=xg(e,r,o,s,u,a,l,c,f,h,g,m)).segmentIndex=H,Ae.encrypted=I,Ae.drmInfos=S,Ae.keyIds=A,Ae.mimeType=w,Ae.bandwidth=L,ge.return({stream:Ae,type:o,dd:n,nd:i,Jb:j,kb:B,qd:re,pd:se,Pc:!1,me:-1,Sa:Ue,Ta:Ce,Jd:k,Ne:!1})})}function Tg(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Sa:++e,Ta:n};var i=(t=t[t.length-1]).i;return t.i.length?(n=i.length-1,i[i.length-1].m||(e++,n=0),{Sa:e,Ta:n}):(e++,t.o&&(n=0),{Sa:e,Ta:n})}function xg(e,t,n,i,r,o,s,u,a,l,c,f){var h=ec(n,t)||tc(n),g=[];if(a)for(var m=(a=p(a.split(","))).next();!m.done;m=a.next())g.push(m.value);return a=n==le?"subtitle":void 0,g.length||"subtitle"!==a||g.push("subtitle"),{id:e.Xa++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==le?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:pe(i||"und"),originalLanguage:i,label:o,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:g,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:f,closedCaptions:u,hdr:void 0,tilesLayout:void 0,accessibilityPurpose:null,external:!1}}function Sg(e,t){var n=[];if(e.segments)for(var i=(e=p(e.segments)).next();!i.done;i=e.next())i=fn(i.value.g,"EXT-X-KEY"),n.push.apply(n,q(i));i=e=!1;for(var r=[],o=new Set,s=(n=p(n)).next();!s.done;s=n.next()){var u=be(s=s.value,"METHOD");if("NONE"!=u)if(e=!0,"AES-128"==u)i=!0;else if(u=$(s,"KEYFORMAT")||"identity",s=(u=Ng[u])?u(s,t):null){if(s.keyIds)for(var a=(u=p(s.keyIds)).next();!a.done;a=u.next())o.add(a.value);r.push(s)}}return{drmInfos:r,keyIds:o,encrypted:e,ug:i}}function Eg(e,t,n){if(!P.crypto||!P.crypto.subtle)throw ce("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new E(2,4,4042);var i=0,r=$(t,"IV","");if(r){var o=oi(r.substr(2));if(16!=o.byteLength)throw new E(2,4,4048)}else i=ar(n.g,"EXT-X-MEDIA-SEQUENCE",0);var s=Ye([t=lr(n.h,be(t,"URI"))],e.g.retryParameters),u={method:"AES-128",iv:o,firstMediaSequenceNumber:i,fetchKey:function(){var a,c;return C(function(f){if(1==f.g)return y(f,Ys(e,s,6),2);if(3!=f.g){if(!(a=f.h).data||16!=a.data.byteLength)throw new E(2,4,4049);return c=u,y(f,P.crypto.subtle.importKey("raw",a.data,{name:"AES-CBC"},!0,["decrypt"]),3)}c.cryptoKey=f.h,u.fetchKey=void 0,F(f)})}};return u}function Zl(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var o=et(i[r].g,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(!(i=et(t.g,"EXT-X-TARGETDURATION")))throw new E(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=et(t.g,"EXT-X-PART-INF"))&&(e.H=Number(be(r,"PART-TARGET"))),t=et(t.g,"EXT-X-SERVER-CONTROL"),e.o&&e.H?(e.l=e.eb?5*e.H<=n?Math.min(e.H,e.l):Math.min(n,e.l):Math.min(e.H,e.l),e.W=t?Number(be(t,"PART-HOLD-BACK")):0):(e.l=Math.min(n,e.l),n=t?t.getAttribute("HOLD-BACK"):null,e.V=n?Number(n.value):0),e.ca=Math.max(i,e.ca)}function Ag(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.W)t=e.W;else if(e.V)t=e.V;else{var n=e.g.hls.liveSegmentsDelay;n>(t=t.segments.length)-2&&(n=Math.max(1,t-2)),t=e.ca*n}e.j.gg(0),e.j.fg(t),e.j.ic(!1)}function Ig(e,t,n,i){var r=et(n,"EXT-X-MAP");if(!r)return null;var o=be(r,"URI");if(i=[o=fr(lr(t.h,o),i),$(r,"BYTERANGE","")].join("-"),!e.ba.has(i)){for(var s=void 0,u=(n=p(n)).next();!u.done;u=n.next())"EXT-X-KEY"==(u=u.value).name&&"AES-128"==be(u,"METHOD")&&u.id<r.id&&(s=Eg(e,u,t));t=function $T(e,t,n){var i=0,r=null;return(t=$(t,"BYTERANGE"))&&(i=t.split("@"),r=Number(i[0]),r=(i=Number(i[1]))+r-1,n&&((t=r+1-i)%16&&(r+=16-t%16))),new It(function(){return[e]},i,r,null,null,null,n)}(o,r,s),e.ba.set(i,t)}return e.ba.get(i)}function JT(e,t,n,i,r,o,s,u,a,l){var c=i.g,f=et(c,"EXTINF"),h=0,g=0,m=null;i.h.length&&!e.o&&ce("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var w=null;if(!e.g.hls.ignoreManifestProgramDateTime){var v=et(c,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(w=Jf(v.value))}var T=ui;if(et(c,"EXT-X-GAP")&&(T=2),!f){if(0==i.h.length)throw new E(2,4,4024,"EXTINF");if(!e.o)return null}var x=[];v=!1;var S=null,A=!1,I=!1;if(e.o&&i.h.length){h=("video/mp4"==a||"audio/mp4"==a)&&P.ReadableStream,a=w;for(var M={},k=0;k<i.h.length;M={sc:M.sc,jd:M.jd},k++){var R=i.h[k],D=0==k?n:x[x.length-1],L=0==k?r:D.endTime,j=Number($(R,"DURATION"))||e.H;if(j){var _=L+j,B=0,H=null;if("EXT-X-PRELOAD-HINT"==R.name?(B=(B=$(R,"BYTERANGE-START"))?Number(B):0,(D=$(R,"BYTERANGE-LENGTH"))?H=B+Number(D)-1:B&&(H=Number.MAX_SAFE_INTEGER)):(B=(H=p(Mg(D,B=$(R,"BYTERANGE")))).next().value,H=H.next().value),M.jd=$(R,"URI"),M.jd){D=ui,"YES"==$(R,"GAP")&&(D=2,A=!0),M.sc=null;var z=function(se){return function(){return null==se.sc&&(se.sc=lr(s,se.jd)),[se.sc]}}(M);h&&0<=B&&null!=H&&(S=z,v=!0),L=new J(L,_,z,B,H,t,0,0,1/0,[],"",null,a,D,l),"EXT-X-PRELOAD-HINT"==R.name&&(L.Pe(),I=!0),"YES"!=$(R,"INDEPENDENT")&&0<k&&L.Tf(),x.push(L),a&&(a+=j)}}}}if(f){if(0==(f=Number(f.value.split(",")[0])))return null;h=r+f}else{if(!x.length)return null;h=x[x.length-1].endTime}v&&(A||0!=x[0].Ka?(v=!1,S=null):x=[]),(f=et(c,"EXT-X-BYTERANGE"))?(g=(m=p(Mg(n,f.value))).next().value,m=m.next().value):x.length&&(g=x[0].Ka,m=x[x.length-1].pa),n="",f=null,"image"==u&&(n="1x1",u=et(c,"EXT-X-TILES"))&&(n=be(u,"LAYOUT"),(u=$(u,"DURATION"))&&(f=Number(u)));var re=null;return t=new J(r,h,function(){return S?S():(null==re&&(re=fr(i.i,o)),re.length?[re]:[])},g,m,t,0,0,1/0,x,n,f,w,T,l),v&&(e.eb=!0,t.Sf(),I&&t.Pe()),t}function Mg(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),i=(n=n[1]?Number(n[1]):e.pa+1)+t-1),[n,i]}function Cg(e,t,n,i,r,o){var s=t.segments,u=void 0,a=ar(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=ar(t.g,"EXT-X-MEDIA-SEQUENCE",0),c=et(t.g,"EXT-X-SKIP"),f=c?Number($(c,"SKIPPED-SEGMENTS")):0,h=l+f,g=0;gt(e)&&r.has(h)&&(g=r.get(h));var m=[],w=null;c=[];for(var v=0;v<s.length;v++){var T=s[v],x=0==v?g:w.endTime;h=l+f+v,et(T.g,"EXT-X-DISCONTINUITY")&&a++;for(var S=p(T.g),A=S.next();!A.done;A=S.next())"EXT-X-KEY"==(A=A.value).name&&(u="AES-128"==be(A,"METHOD")?Eg(e,A,t):void 0);r.set(h,x),S=Ig(e,t,T.g,o),!e.o&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.o=e.i.isLowLatencyMode()),(x=JT(e,S,w,T,x,o,t.h,n,i,u))&&((w=ar(T.g,"EXT-X-BITRATE"))?c.push({bitrate:w,duration:x.endTime-x.startTime}):c.length&&((w=c.pop()).duration+=x.endTime-x.startTime,c.push(w)),w=x,x.l=a,e.g.hls.ignoreManifestProgramDateTime&&null!=e.C&&h<e.C||m.push(x))}if(t=void 0,c.length&&(t=c.reduce(function(I,M){return I+M.duration},0),t=Math.round(c.reduce(function(I,M){return I+M.bitrate*M.duration},0)/t*1e3)),c=m.some(function(I){return null!=I.g}))for(n={},i=0;i<m.length;n={oc:n.oc,nc:n.nc,ed:n.ed,pb:n.pb,mc:n.mc},i++)if(n.pb=m[i],null==n.pb.g)for(n.nc=0,n.oc=i,r=function(I){return function(){var M=m[I.oc];if(M){if(null!=M.g)return M.g+I.nc;I.nc-=M.endTime-M.startTime,I.oc+=1}return null}}(n),n.mc=0,n.ed=i,o=function(I){return function(){var M=m[I.ed];if(M){if(M!=I.pb&&(I.mc+=M.endTime-M.startTime),null!=M.g)return M.g+I.mc;--I.ed}return null}}(n);null==n.pb.g;)n.pb.g=o(),null==n.pb.g&&(n.pb.g=r());if(c)for(i=(n=p(m)).next();!i.done;i=n.next())for(i=(r=i.value).g,o=(r=p(r.i)).next();!o.done;o=r.next())(o=o.value).g=i,i+=o.endTime-o.startTime;if(e=e.K,c&&e!=1/0)for(i=(c=p(m)).next();!i.done;i=c.next())i.value.nf(e);return{segments:m,bandwidth:t}}function fr(e,t){if(!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var i=(n=p(n)).next();!i.done;i=n.next()){var r=(i=i.value).slice(2,i.length-1),o=t.get(r);if(!o)throw new E(2,4,4039,r);e=e.replace(i,o)}return e}function ec(e,t){if(e==le){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function tc(e){return e==le?"text/vtt":Rg[e].mp4}function kg(e,t,n,i,r){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0)}function nc(e,t,n){return Ys(e,Ye([t],e.g.retryParameters),0,{type:n?2:3})}function gt(e){return e.da!=$s}function zs(e,t){e.da=t,e.j&&e.j.ic(!gt(e)),gt(e)||e.m.stop()}function Ys(e,t,n,i){if(!e.I)throw new E(2,7,7001);return t=e.i.networkingEngine.request(n,t,i),Ui(e.I,t),t.promise}U("shaka.net.DataUriPlugin",cg),cg.parse=fg,mn("data",fg),(d=uo.prototype).configure=function(e){this.g=e},d.start=function(e,t){var i,n=this;return C(function(r){return 1==r.g?(n.i=t,n.o=t.isLowLatencyMode(),y(r,nc(n,e),2)):3!=r.g?(n.N=(i=r.h).uri,y(r,function FT(e,t,n){var i,o,s,u,a,l,c,f,h,g,m,w,v,T,x,S,A,I,M,k,R,L,j,_,H,re,ye;return C(function(je){switch(je.g){case 1:for(var Ue=p(fn((i=Gl(e.Z,t,e.N)).g,"EXT-X-DEFINE")),Ce=Ue.next();!Ce.done;Ce=Ue.next()){var Ae=Ce.value;Ce=$(Ae,"NAME"),Ae=$(Ae,"VALUE"),Ce&&Ae&&(e.s.has(Ce)||e.s.set(Ce,Ae))}if(o=[],s=[],u=[],1==i.type)return y(je,function bT(e,t){var n,i,r,o,s,u,a,l,c,f,h,g,m,v,T,x,S;return C(function(A){if(1==A.g)return i=Jn(n=e.g.hls.mediaPlaylistFullMimeType),r=i.split("/")[0],o=on(n),s={type:r,mimeType:i,codecs:o,language:null,height:null,width:null,channelCount:null,sampleRate:null},t.segments.length?(a=new Ze((u=t.segments[0]).i),l=a.ya.split(".").pop(),(c=Dg[l])?A.return({type:"audio",mimeType:c,codecs:"",language:null,height:null,width:null,channelCount:null,sampleRate:null}):(f=[u.i],(h=Ig(e,t,u.g,new Map))&&(f=h.Ca()),g=ln,m=Ye(f,e.g.retryParameters),y(A,Ys(e,m,g,{type:h?0:1}),2))):A.return(s);if((T=(v=A.h).headers["content-type"])&&(T=T.split(";")[0].toLowerCase()),"ts"==l||"video/mp2t"==T){var I=Q(v.data),M=(new we).parse(I);I=M.Kc(),M=M.Fe();var k=[],R=!1,D=!1;switch(I.audio){case"aac":k.push("mp4a.40.2"),R=!0;break;case"mp3":k.push("mp4a.40.34"),R=!0;break;case"ac3":k.push("ac-3"),R=!0;break;case"ec3":k.push("ec-3"),R=!0}switch(I.video){case"avc":k.push(M.aa?M.aa:"avc1.42E01E"),D=!0;break;case"hvc":k.push(M.aa?M.aa:"hvc1.1.6.L93.90"),D=!0}if(x=k.length?{type:R&&!D?"audio":"video",mimeType:"video/mp2t",codecs:k.join(", "),language:null,height:M.height,width:M.width,channelCount:null,sampleRate:null}:null)return A.return(x)}else if(("mp4"==l||"video/mp4"==T||"audio/mp4"==T)&&(S=function VT(e){function t(f){return n(f.name)}function n(f){switch(f=f.toLowerCase()){case"avc1":case"avc3":i.push(f+".42E01E"),o=!0;break;case"hev1":case"hvc1":i.push(f+".1.6.L93.90"),o=!0;break;case"dvh1":case"dvhe":i.push(f+".05.04"),o=!0;break;case"vp09":i.push(f+".00.10.08"),o=!0;break;case"av01":i.push(f+".0.01M.08"),o=!0;break;case"mp4a":i.push("mp4a.40.2"),r=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":i.push(f),r=!0}}var i=[],r=!1,o=!1,s=null,u=null,a=null,l=null,c=null;return(new xe).box("moov",de).box("trak",de).O("tkhd",function(f){f=Eh(f.reader,f.version),u=String(f.height),a=String(f.width)}).box("mdia",de).O("mdhd",function(f){s=is(f.reader,f.version).language}).box("minf",de).box("stbl",de).O("stsd",Fi).box("mp4a",function(f){var h=f.reader;h.skip(6),h.skip(2),h.skip(8);var g=h.Ua();h.skip(2),h.skip(2),h.skip(2),h=h.Ua()+h.Ua()/65536,l=g,c=h,f.reader.oa()?de(f):t(f)}).box("esds",function(f){f=function iy(e){var t="mp4a";return e.skip(11),t+="."+this.g(e.ua()),{aa:t+="."+this.g(e.ua()>>>2&63).replace(/^0/,"")}}(f.reader),i.push(f.aa),r=!0}).box("ac-3",t).box("ec-3",t).box("opus",t).box("Opus",t).box("fLaC",t).box("avc1",function(f){f=Ah(f.reader,f.name),i.push(f.aa),o=!0}).box("avc3",function(f){f=Ah(f.reader,f.name),i.push(f.aa),o=!0}).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vp09",t).box("av01",t).box("enca",$o).box("encv",$o).box("sinf",de).box("frma",function(f){n(f=Ih(f.reader).aa)}).parse(e.data,!0),i.length?{type:(e=r&&!o)?"audio":"video",mimeType:e?"audio/mp4":"video/mp4",codecs:gg(i).join(", "),language:s,height:u,width:a,channelCount:l,sampleRate:c}:null}(v)))return A.return(S);return A.return(s)})}(e,i),5);for(a=fn(i.g,"EXT-X-MEDIA"),l=fn(i.g,"EXT-X-STREAM-INF"),c=fn(i.g,"EXT-X-IMAGE-STREAM-INF"),f=fn(i.g,"EXT-X-SESSION-KEY"),Ce=(Ue=p(l)).next();!Ce.done;Ce=Ue.next()){var ge=Ce.value;Ae=$(ge,"AUDIO"),Ce=$(ge,"VIDEO");var ke=$(ge,"SUBTITLES");if(ge=pg(e,ge),ke){var xt=Et(le,ge);e.u.set(ke,xt),$t(ge,xt)}Ae&&((ke=Et("audio",ge))||(ke=e.g.hls.defaultAudioCodec),e.u.set(Ae,ke)),Ce&&((Ae=Et("video",ge))||(Ae=e.g.hls.defaultVideoCodec),e.u.set(Ce,Ae))}for(h=fn(i.g,"EXT-X-SESSION-DATA"),g=p(h),m=g.next();!m.done;m=g.next())v=$(w=m.value,"DATA-ID"),T=$(w,"URI"),x=$(w,"LANGUAGE"),S=$(w,"VALUE"),A=(new Map).set("id",v),T&&A.set("uri",lr(e.N,T)),x&&A.set("language",x),S&&A.set("value",S),I=new K("sessiondata",A),e.i&&e.i.onEvent(I);for(function KT(e,t){t=t.filter(function(i){var r=$(i,"URI")||"";return"SUBTITLES"!=$(i,"TYPE")&&""!=r});for(var n=(t=p(t)).next();!n.done;n=t.next())mg(e,n.value)}(e,a),Ce=(Ue=p(Ue=sg(a,"CLOSED-CAPTIONS"))).next();!Ce.done;Ce=Ue.next())Ce=pe((ke=$(Ae=Ce.value,"LANGUAGE"))||"und"),ke||(ke=$(Ae,"NAME"))&&(Ce=ke),ke=be(Ae,"GROUP-ID"),Ae=be(Ae,"INSTREAM-ID").replace("SERVICE","svc"),e.M.get(ke)||e.M.set(ke,new Map),e.M.get(ke).set(Ae,Ce);return o=function XT(e,t,n){var i=[],r=new Set;if(0<n.length)for(var o=(n=p(n)).next();!o.done;o=n.next()){var s=be(o=o.value,"METHOD");if("NONE"!=s&&"AES-128"!=s&&(s=$(o,"KEYFORMAT")||"identity",o=(s=Ng[s])?s(o,""):null)){if(o.keyIds)for(var u=(s=p(o.keyIds)).next();!u.done;u=s.next())r.add(u.value);i.push(o)}}return t=t.map(function(a){var l=$(a,"FRAME-RATE"),c=Number($(a,"AVERAGE-BANDWIDTH"))||Number(be(a,"BANDWIDTH")),f=$(a,"RESOLUTION"),h=(f=p(f?f.split("x"):[null,null])).next().value,g=f.next().value,m=$(a,"VIDEO-RANGE");a=function GT(e,t){var n=pg(e,t),i=$(t,"AUDIO"),r=$(t,"VIDEO"),o=i||r;o=o&&e.A.has(o)?e.A.get(o):[],i={audio:i?o:[],video:r?o:[]},r=!1;var s=be(t,"URI"),u=i.audio.find(function(c){return c&&c.dd==s}),a=Et("video",n),l=Et("audio",n);return l&&!a?(o="audio",r=0<i.audio.length):!o.length&&l&&a?(o="video",n=[[a,l].join()]):i.audio.length&&u?(o="audio",r=!0):o=i.video.length&&!i.audio.length?"audio":"video",r||(e=function zT(e,t,n,i){var r=fr(be(t,"URI"),e.s);return e.h.has(r)||(t=$(t,"CLOSED-CAPTIONS"),t="video"==i&&t&&"NONE"!=t?e.M.get(t):null,i=Jl(e,r,n=Mi(i,n),i,null,!1,null,null,t,null,!1,null,!1),e.h.has(r))?e.h.get(r):(e.h.set(r,i),i)}(e,t,n,o),i[e.stream.type]=[e]),i}(e,a),f=a.audio;for(var w=p(a=a.video),v=w.next();!v.done;v=w.next())kg(v.value.stream,h,g,l,m);for(l=e.g.disableAudio,(!f.length||l)&&(f=[null]),l=e.g.disableVideo,(!a.length||l)&&(a=[null]),l=[],h=(f=p(f)).next();!h.done;h=f.next())for(h=h.value,m=(g=p(a)).next();!m.done;m=g.next()){var T=m.value;(m=h?h.stream:null)&&(m.drmInfos=i,m.keyIds=r),(w=T?T.stream:null)&&(w.drmInfos=i,w.keyIds=r),v=h?h.stream.drmInfos:null;var x=T?T.stream.drmInfos:null;T=(T?T.dd:"")+" - "+(h?h.dd:""),m&&w&&!fh(v,x)||e.ja.has(T)||(m={id:e.Xa++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!w&&w.primary,audio:m,video:w,bandwidth:c,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},l.push(m),e.ja.add(T))}return l}).reduce(Yu,[]),t.filter(function(a){return null!=a})}(e,l,f),s=function qT(e,t){var n=sg(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return mg(e,s).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}});for(var i=(n=p(n)).next();!i.done;i=n.next()){var r=be(i.value,"GROUP-ID");if((i=e.u.get(r))&&(r=e.A.get(r)))for(var o=(r=p(r)).next();!o.done;o=r.next())(o=o.value).stream.codecs=i,o.stream.mimeType=ec(le,i)||tc(le)}return t.filter(function(s){return s})}(e,a),y(je,function HT(e,t){var n;return C(function(r){return 1==r.g?(n=t.map(function(o){var a;return C(function(l){if(1==l.g)return e.g.disableThumbnails?l.return(null):(ee(l,2),y(l,function WT(e,t){var n,i,r,o,s,u,a,l,c,f;return C(function(h){return 1==h.g?(n=fr(be(t,"URI"),e.s),i=$(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(r=$(t,"LANGUAGE"),o=$(t,"NAME"),s=$(t,"CHARACTERISTICS"),u=Jl(e,n,i,"image",r,!1,o,null,null,s,!1,null,!1),e.h.has(n)?h.return(e.h.get(n)):(a=$(t,"RESOLUTION"))?y(h,u.stream.createSegmentIndex(),3):h.B(2))):(2!=h.g&&(l=u.stream.segmentIndex.get(0),c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),(f=$(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(f)),e.h.set(n,u),h.return(u))})}(e,o),4));if(2!=l.g)return l.return(l.h.stream);if(a=te(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}),y(r,Promise.all(n),2)):r.return(r.h.filter(function(o){return o}))})}(e,c),4);case 4:u=je.h,je.B(3);break;case 5:return R=(M=je.h).mimeType,j=M.height,_=M.width,H=M.sampleRate,y(je,wg(e,i,n,n,M.codecs,k=M.type,L=M.language,!0,"Media Playlist",M.channelCount,new Map,null,!1,H,!1,R),6);case 6:e.h.set(n,re=je.h),"video"==k&&kg(re.stream,_,j,null,null),o.push({id:0,language:pe(L||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==k?re.stream:null,video:"video"==k?re.stream:null,bandwidth:re.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new E(2,7,7001);e.j=new Y(null,0),e.j.ic(!0),1==i.type&&(gt(e)&&(Ag(e,i),e.m.U(e.l)),ye=Array.from(e.h.values()),Ql(e,ye),$l(e)),e.F={presentationTimeline:e.j,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.i.makeTextStreamsForClosedCaptions(e.F),F(je)}})}(n,i.data,e),3)):r.return(n.F)})},d.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.I&&(e.push(this.I.destroy()),this.I=null),this.g=this.i=null,this.ja.clear(),this.F=null,this.h.clear(),this.A.clear(),this.u.clear(),this.s.clear(),Promise.all(e)},d.update=function(){var t,n,i,r,o,u,l,e=this;return C(function(c){if(1==c.g){if(!gt(e))return c.return();for(t=[],n=Array.from(e.h.values()),e.l=1/0,i=n.filter(function(f){return f.stream.segmentIndex}),r=p(i),o=r.next();!o.done;o=r.next())t.push(OT(e,o.value));return y(c,Promise.all(t),2)}yg(e,i.map(function(f){return f.stream})),u=i.some(function(f){return 0==f.Pc}),i.length&&!u&&(zs(e,ex.qg),l=i.map(function(f){return f.kb}),e.j.Ja(Math.min.apply(Math,q(l))),e.i.updateDuration()),u&&$l(e),F(c)})},d.onExpirationUpdated=function(){},U("shaka.hls.HlsParser",uo);var Dg={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Rg={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Ng={"com.apple.streamingkeydelivery":function(e,t){if("video/mp2t"==t)throw new E(2,4,4040);if(P.shakaMediaKeysPolyfill)throw new E(2,4,4041);return Un("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=be(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Un("com.widevine.alpha",[{initDataType:"cenc",initData:t=Q((t=zl(t=be(e,"URI"))).data)}]),(e=$(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=be(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Un("com.microsoft.playready",[{initDataType:"cenc",initData:e=Qo(e=Q((e=zl(e=be(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=be(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Un("org.w3.clearkey",null):null}},$s="VOD",Lg="EVENT",ic="LIVE",ex={qg:$s,ai:Lg,gi:ic};function Js(e){if(e=Pg(e))e:{for(var t=(e=p(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())if(t=Tn(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function Pg(e){return(e=function tx(e){var t=0,n=ct(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);var r=n.getUint16(e+=2,!0);if(e+=2,1&r||r+e>n.byteLength){n=[];break e}var o=Q(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}(e=qt(e.textContent)).filter(function(t){return t.type===nx})[0])&&(e=qi(e=vn(e.value,!0),"WRMHEADER"))?e:null}bn.m3u8=function(){return new uo},At["application/x-mpegurl"]=function(){return new uo},At["application/vnd.apple.mpegurl"]=function(){return new uo};var nx=1,ix=(new Map).set("com.microsoft.playready",Js).set("com.microsoft.playready.recommendation",Js).set("com.microsoft.playready.software",Js).set("com.microsoft.playready.hardware",Js);function hr(e){if(!Og){Og=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Zs=ne("ftyp",t,i,t,n),t=ne("dref",dx),rc=ne("dinf",t)}this.g=e}function dr(e){for(var t=new Uint8Array([]),n=p(e.g),i=n.next();!i.done;i=n.next()){var r=t;t=i.value,i=ne;var o=t.id+1,s=t.stream.width||0,u=t.stream.height||0;"audio"==t.type&&(u=s=0);var a=t.duration*t.timescale,l=Math.floor(a/(Xn+1));switch(a=Math.floor(a%(Xn+1)),o=ne("tkhd",o=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(q(De(o,4)),[0,0,0,0],q(De(l,4)),q(De(a,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],q(De(s,2)),[0,0],q(De(u,2)),[0,0]))),s=ne,l=t.duration*t.timescale,u=Math.floor(l/(Xn+1)),l=Math.floor(l%(Xn+1)),a=(a=t.stream.language).charCodeAt(0)-96<<10|a.charCodeAt(1)-96<<5|a.charCodeAt(2)-96,u=ne("mdhd",u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(q(De(t.timescale,4)),q(De(u,4)),q(De(l,4)),q(De(a,2)),[0,0]))),l=t,a=new Uint8Array([]),l.type){case"video":a=rx;break;case"audio":a=ox}l=ne("hdlr",a);e:{switch(t.type){case"video":t=ne("minf",ne("vmhd",cx),rc,jg(t));break e;case"audio":t=ne("minf",ne("smhd",fx),rc,jg(t));break e}t=new Uint8Array([])}t=Ve(r,i=i("trak",o,t=s("mdia",u,l,t)))}for(n=ne,o=(i=e.g[0]).duration*i.timescale,r=Math.floor(o/(Xn+1)),o=Math.floor(o%(Xn+1)),r=ne("mvhd",r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(q(De(i.timescale,4)),q(De(r,4)),q(De(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),o=new Uint8Array([]),s=(e=p(e.g)).next();!s.done;s=e.next())o=Ve(o,s=ne("trex",s=new Uint8Array([0,0,0,0].concat(q(De(s.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))));if(e=ne("mvex",o),o=new Uint8Array([]),i.encrypted)for(s=(i=p(i.stream.drmInfos)).next();!s.done;s=i.next())if((s=s.value).initData)for(u=(s=p(s.initData)).next();!u.done;u=s.next())o=Ve(o,u.value.initData);return e=n("moov",r,t,e,o),(n=new Uint8Array(Zs.byteLength+e.byteLength)).set(Zs),n.set(e,Zs.byteLength),n}function jg(e){var t=ne,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.ia.byteLength)var r=ne("avcC",e.ia);else{r=ne;for(var o=7,s=[],u=[],a=0,l=0,c=0,f=0;f<e.Ma.length;f++){var h=_g(e.Ma[f]);switch(31&h[0]){case 7:s.push(h),o+=h.length+2;break;case 8:u.push(h),o+=h.length+2}}for(0<s.length&&(a=s[0][1],c=s[0][2],l=s[0][3]),f=0,(o=new Uint8Array(o))[f++]=1,o[f++]=a,o[f++]=c,o[f++]=l,o[f++]=255,o[f++]=224|s.length,a=0;a<s.length;a++)o[f++]=(65280&s[a].length)>>8,o[f++]=255&s[a].length,o.set(s[a],f),f+=s[a].length;for(o[f++]=u.length,s=0;s<u.length;s++)o[f++]=(65280&u[s].length)>>8,o[f++]=255&u[s].length,o.set(u[s],f),f+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(q(De(n,2)),q(De(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=new Uint8Array([]),e.encrypted&&(u=ao(e),i="encv"),n=ne(i,n,r,u)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.ia.byteLength&&(n=ne("hvcC",e.ia)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(q(De(i,2)),q(De(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=new Uint8Array([]),e.encrypted&&(u=ao(e),r="encv"),n=ne(r,i,n,u));break;case"audio":e.codecs.includes("mp3")?e=ne(".mp3",Qs(e)):e.codecs.includes("ac-3")?(n=ne("dac3",e.$),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=ao(e),i="enca"),e=ne(i,Qs(e),n,r)):e.codecs.includes("ec-3")?(n=ne("dec3",e.$),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=ao(e),i="enca"),e=ne(i,Qs(e),n,r)):(0<e.$.byteLength?n=ne("esds",e.$):(n=ne,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=Mi("audio",e.codecs.split(",")),u=(l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[s],("mp4a.40.5"===a||"mp4a.40.29"===a)&&(u=l[2*s]),s=parseInt(a.split(".").pop(),10),n=n("esds",i=new Uint8Array([0,0,0,0,3,25].concat(q(De(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])))),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=ao(e),i="enca"),e=ne(i,Qs(e),n,r)),n=e}return t("stbl",e=ne("stsd",hx,n),ne("stts",sx),ne("stsc",ux),ne("stsz",lx),ne("stco",ax))}function Qs(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(q(De(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ao(e){for(var t=ne,n=e.codecs.substring(0,e.codecs.indexOf(".")),i=0,r=0;r<n.length;r+=1)i|=n.charCodeAt(r)<<8*(n.length-r-1);n=ne("frma",n=new Uint8Array([].concat(q(De(i,4))))),i=ne("schm",i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0])),r=ne;for(var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=(e=p(e.stream.drmInfos)).next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size)for(var u=(s=p(s.keyIds)).next();!u.done;u=s.next())o=_g(u.value);return t("sinf",n,i,r("schi",o=ne("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),o)))}function lo(e){for(var t=new Uint8Array([]),n=(e=p(e.g)).next();!n.done;n=e.next()){n=n.value;var i=ne,r=new Uint8Array([0,0,0,0].concat(q(De(n.data?n.data.ab:0,4))));r=ne("mfhd",r);var o,s=n.data?n.data.Ha:[],u=new Uint8Array(4+s.length);for(o=0;o<s.length;o++){var a=s[o].flags;u[o+4]=a.Ba<<4|a.Fa<<2|a.Da}var l=(s=ne("sdtp",u)).length+92;u=ne,o=ne("tfhd",o=new Uint8Array([0,0,0,58].concat(q(De(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),a=n.data?n.data.baseMediaDecodeTime:0;var c=Math.floor(a%(Xn+1));a=ne("tfdt",a=new Uint8Array([1,0,0,0].concat(q(De(Math.floor(a/(Xn+1)),4)),q(De(c,4)))));var f=l,h=12+16*(c=(l=n.data?n.data.Ha:[]).length),g=new Uint8Array(h);for(f+=8+h,g.set(["video"===n.type?1:0,0,15,1].concat(q(De(c,4)),q(De(f,4))),0),f=0;f<c;f++){var m=l[f];h=De(m.duration,4);var w=De(m.size,4),v=m.flags;m=De(m.Oa,4),g.set([].concat(q(h),q(w),[v.Pa<<2|v.Ba,v.Fa<<6|v.Da<<4|v.Qa,61440&v.Aa,15&v.Aa],q(m)),12+16*f)}for(i=i("moof",r,s=u("traf",o,a,l=ne("trun",g),s)),r=n.data?n.data.Ha:[],n=new Uint8Array([]),s=(r=p(r)).next();!s.done;s=r.next())n=Ve(n,s.value.data);t=Ve(t,i,n=ne("mdat",n))}return t}function De(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function _g(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function ne(e){var t=Ut.apply(1,arguments),n=Ug[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Ug[e]=n);for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for((r=new Uint8Array(i))[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Og=!1,Xn=Math.pow(2,32)-1,Ug={},rx=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ox=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),sx=new Uint8Array([0,0,0,0,0,0,0,0]),ux=new Uint8Array([0,0,0,0,0,0,0,0]),ax=new Uint8Array([0,0,0,0,0,0,0,0]),lx=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),cx=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),fx=new Uint8Array([0,0,0,0,0,0,0,0]),hx=new Uint8Array([0,0,0,0,0,0,0,1]),Zs=new Uint8Array([]),dx=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),rc=new Uint8Array([]);function eu(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.A=new Ti(5),this.o=new ie(function(){!function px(e){var t;C(function(n){switch(n.g){case 1:return ee(n,2),y(n,oc(e),4);case 4:ue(n,3);break;case 2:t=te(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();F(n)}})}(e)}),this.u=new Lr,this.m=new Map}function oc(e){var t,n,i,r,o,s;return C(function(a){if(1==a.g)return t=Ye(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5}),Ui(e.u,r),y(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=ma(o.data,"SmoothStreamingMedia");if(!c)throw new E(2,4,4046,l);if((l=e.g.mss.manifestPreprocessor)&&l(c),e.i||(e.i=new Y(null,0)),l=oe(c,"IsLive",Zf,!1))throw new E(2,4,4047);e.i.ic(!l);var f=oe(c,"TimeScale",ut,1e7),h=oe(c,"DVRWindowLength",ut);l&&(0===h||isNaN(h))&&(h=1/0);var m,g=oe(c,"CanSeek",Zf,!1);for(0===h&&g&&(h=1/0),g=null,h&&0<h&&(g=h/f),l&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),e.i.Td(g),h=oe(c,"Duration",ut,1/0),l||e.i.Ja(h/f),l={variants:[],textStreams:[],timescale:f,duration:h/f},g=Me(c,"Protection"),f=e.g.mss.keySystemsBySystemId,h=[],m=(g=p(g)).next();!m.done;m=g.next())h=h.concat(Me(m.value,"ProtectionHeader"));if(h.length){for(g=[],m=0;m<h.length;m++){var w=h[m],v=w.getAttribute("SystemID").toLowerCase(),T=f[v];if(T){var x=Pg(w);if(x)e:{for(var S=(x=p(x.getElementsByTagName("DATA"))).next();!S.done;S=x.next())if(S=Tn(S.value,"KID")){x=qt(S.textContent),x=Vi(x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(q(x.slice(8)))));break e}x=null}else x=null;v=Un(T,v=[{initData:Qo(S=qt(w.textContent),v=oi(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:x}]),x&&v.keyIds.add(x),(T=ix.get(T))&&(v.licenseServerUri=T(w)),g.push(v)}}f=g}else f=[];for(m=f,g=[],f=[],h=[],w=(c=p(c=Me(c,"StreamIndex"))).next();!w.done;w=c.next()){T=Me(w=w.value,"QualityLevel"),v=l.timescale,x=l.duration,S=Me(w,"c");for(var A=[],I=0,M=0;M<S.length;++M){var k=S[M],R=S[M+1],D=oe(k,"t",ut),L=oe(k,"d",ut);if(k=oe(k,"r",Qf),!L)break;if(D=D??I,0>(k=k||0))if(R){if(null==(R=oe(R,"t",ut)))break;if(D>=R)break;k=Math.ceil((R-D)/L)-1}else{if(x==1/0)break;if(D/v>=x)break;k=Math.ceil((x*v-D)/L)-1}for(R=0;R<=k;++R)A.push({start:D/v,end:(I=D+L)/v,wf:D}),D=I}for(v=A,x=(T=p(T)).next();!x.done;x=T.next())(x=gx(e,w,x.value,v,m,l))&&("audio"!=x.type||e.g.disableAudio?"video"!=x.type||e.g.disableVideo?x.type!=le||e.g.disableText||h.push(x):f.push(x):g.push(x))}for(c=[],m=(g=p(0<g.length?g:[null])).next();!m.done;m=g.next())for(m=m.value,x=(w=p(0<f.length?f:[null])).next();!x.done;x=w.next())v=(T=c).push,S=0,m&&m.bandwidth&&0<m.bandwidth&&(S+=m.bandwidth),(x=x.value)&&x.bandwidth&&0<x.bandwidth&&(S+=x.bandwidth),x={id:e.s++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!x&&x.primary,audio:m,video:x,bandwidth:S,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(T,x);l.variants=c,l.textStreams=h,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Id()),Promise.resolve(),s=Date.now(),e.A.sample(1,(s-i)/1e3),F(a)})}function gx(e,t,n,i,r,o){var s=t.getAttribute("Type");if("audio"!==s&&"video"!==s&&"text"!==s)return ce("Ignoring unrecognized type:",s),null;var u=t.getAttribute("Language"),a=e.s++,l=oe(n,"Bitrate",An),c=oe(n,"MaxWidth",An),f=oe(n,"MaxHeight",An),h=oe(n,"Channels",An),g=oe(n,"SamplingRate",An),m=o.duration;i.length&&(m=i[i.length-1].end-i[0].start);var w=e.i.getDuration();e.i.Ja(Math.min(m,w));var v={id:a,originalId:t.getAttribute("Name")||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:f||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:pe(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:g,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if((r=t.getAttribute("Subtype"))&&((r=xx[r])&&v.roles.push(r),"main"===r&&(v.primary=!0)),(null===(r=n.getAttribute("FourCC"))||""===r)&&(r=t.getAttribute("FourCC")),!r)if("audio"===s)r="AAC";else if("video"===s)return ce('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Tx.includes(r.toUpperCase()))return ce("Codec not supported:",r),null;switch(n=function mx(e,t,n,i){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=i.channelsCount||2;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e=i.audioSamplingRate||44100],"AACH"===n?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|i>>1,n[1]=i<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,s,r,v),v.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return ce("Quality unsupported without CodecPrivateData",s),null;v.type="audio",v.mimeType="mss/audio/mp4",v.codecs=function vx(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(r,n);break;case"video":if(!n)return ce("Quality unsupported without CodecPrivateData",s),null;v.type="video",v.mimeType="mss/video/mp4",v.codecs=function yx(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":v.type=le,v.mimeType="application/mp4",("TTML"===r||"DFXP"===r)&&(v.codecs="stpp")}return v.createSegmentIndex=function(){if(v.segmentIndex)return Promise.resolve();if(e.m.has(v.id))var T=e.m.get(v.id);else T=[],"video"==v.type&&(T=v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),T=dr(new hr([T={id:v.id,type:v.type,codecs:v.codecs,encrypted:v.encrypted,timescale:v.mssPrivateData.timescale,duration:v.mssPrivateData.duration,Ma:T,$:new Uint8Array([]),ia:new Uint8Array([]),data:null,stream:v}])),e.m.set(v.id,T);return T=function wx(e,t,n,i,r){var o=i.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));i=[];for(var s={},u=(r=p(r)).next();!u.done;s={wc:s.wc},u=r.next())s.wc=u.value,i.push(new J(s.wc.start,s.wc.end,function(a){return function(){return st(e.l,[o.replace("{start time}",String(a.wc.wf))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return i}(e,new It(function(){return[]},0,null,null,void 0,T),v,t,i),v.segmentIndex=new fe(T),Promise.resolve()},v.closeSegmentIndex=function(){v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null)},v}(d=eu.prototype).configure=function(e){this.g=e},d.start=function(e,t){var n=this;return C(function(i){if(1==i.g)return n.l=[e],n.h=t,y(i,oc(n),2);if(!n.h)throw new E(2,7,7001);return i.return(n.j)})},d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.u.destroy()},d.update=function(){var t,e=this;return C(function(n){return 1==n.g?(ee(n,2),y(n,oc(e),4)):2!=n.g?ue(n,0):(t=te(n),e.h&&t?(e.h.onError(t),void F(n)):n.return())})},d.onExpirationUpdated=function(){},U("shaka.mss.MssParser",eu);var Tx="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),xx={CAPT:"main",SUBT:"alternate",DESC:"main"};function Bg(e,t,n,i,r,o){if(200<=n&&299>=n&&202!=n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Fn(t)}catch{}throw new E(401==n||403==n?2:1,1,1001,i,n,r,e,o)}function sc(){}function tu(e,t,n,i,r){var o=new Mx;Pr(t.headers).forEach(function(l,c){o.append(c,l)});var s=new Ax,u={Cf:!1,kg:!1};if(e=function Sx(e,t,n,i,r,o,s){var u,a,l,c,f,h,g,m,w,v,x,S;return C(function(A){switch(A.g){case 1:return u=Ex,a=Ix,h=f=0,g=Date.now(),ee(A,2),y(A,u(e,n),4);case 4:if(o(Fg((l=A.h).headers)),"HEAD"==n.method){A.B(5);break}return m=l.clone().body.getReader(),v=(w=l.headers.get("Content-Length"))?parseInt(w,10):0,new a({start:function(I){!function M(){var k,R;return C(function(D){switch(D.g){case 1:return ee(D,2),y(D,m.read(),4);case 4:k=D.h,ue(D,3);break;case 2:return te(D),D.return();case 3:if(k.done){D.B(5);break}if(f+=k.value.byteLength,!s){D.B(5);break}return y(D,s(k.value),5);case 5:(100<(R=Date.now())-g||k.done)&&(r(R-g,f-h,v-f),h=f,g=R),k.done?I.close():(I.enqueue(k.value),M()),F(D)}})}()}}),y(A,l.arrayBuffer(),6);case 6:c=A.h;case 5:ue(A,3);break;case 2:throw x=te(A),i.Cf?new E(1,1,7001,e,t):i.kg?new E(1,1,1003,e,t):new E(1,1,1002,e,x,t);case 3:return S=Fg(l.headers),A.return(Bg(S,c,l.status,e,l.url,t))}})}(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback),e=new Re(e,function(){return u.Cf=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var a=new ie(function(){u.kg=!0,s.abort()});a.U(t/1e3),e.finally(function(){a.stop()})}return e}function Fg(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function bg(){if(!P.ReadableStream)return!1;try{new ReadableStream({})}catch{return!1}return!!P.Response&&!!new Response("").body&&!(!P.fetch||!P.AbortController)}bn.ism=function(){return new eu},At["application/vnd.ms-sstr+xml"]=function(){return new eu},U("shaka.net.HttpFetchPlugin",sc),sc.isSupported=bg,sc.parse=tu;var Ex=P.fetch,Ax=P.AbortController,Ix=P.ReadableStream,Mx=P.Headers;function Vg(){}function nu(e,t,n,i,r){var o=new Cx,s=Date.now(),u=0;return new Re(new Promise(function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new E(1,1,7001,e,n))};var f=!1;for(var h in o.onreadystatechange=function(){if(2==o.readyState&&!f){var g=qg(o);r(g),f=!0}},o.onload=function(){var g=qg(o),m=o.response;try{var w=Bg(g,m,o.status,e,o.responseURL,n);l(w)}catch(v){c(v)}},o.onerror=function(g){c(new E(1,1,1002,e,g,n))},o.ontimeout=function(){c(new E(1,1,1003,e,n))},o.onprogress=function(g){var m=Date.now();(100<m-s||g.lengthComputable&&g.loaded==g.total)&&(i(m-s,g.loaded-u,g.total-g.loaded),u=g.loaded,s=m)},t.headers)o.setRequestHeader(h.toLowerCase(),t.headers[h]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}function qg(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=p(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}bg()&&(mn("http",tu,2,!0),mn("https",tu,2,!0),mn("blob",tu,2,!0)),U("shaka.net.HttpXHRPlugin",Vg),Vg.parse=nu;var Cx=P.XMLHttpRequest;function Hg(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function uc(e){return e.Ca().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ka+":"+e.pa}function kx(e,t){return ba(e.g.Ca(),e.g.Ka,e.g.pa,t.streaming.retryParameters)}function Kg(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Xg(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Gg(e){var t=this;this.o=e,this.j=new Map,this.i=new ti(function(){return ac(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Kg}function ac(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function Rx(e,t,n,i,r,o){me(e.i);var s=(e.j.get(t)||Promise.resolve()).then(function(){var u,a,l,c,f;return C(function(m){if(1==m.g)return y(m,function Lx(e,t){var i,r,o;return C(function(s){return 1==s.g?(i=e.o.request(ln,t),e.h.push(r=function(){return i.abort()}),y(s,i.promise,2)):(o=s.h,$t(e.h,r),s.return(o.data))})}(e,n),2);if(u=m.h,e.i.g)throw new E(2,9,7001);if(r)for(c in a=Q(u),(l=new Yf(a)).data)f=Number(c),e.l(l.data[f],l.g[f]);e.g.close(i,u.byteLength);var w=e.g;return e.m(0==w.i?0:w.j/w.i,e.g.h),m.return(o(u))})});e.j.set(t,s)}function iu(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Se,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function lc(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return C(function(s){if(1==s.g)return null==r.result?(n(),s.return()):y(s,t((o=r.result).key,o.value,o),2);o.continue(),F(s)})}})}function cc(e){this.h=e,this.g=[]}function yi(e,t){return ru(e,t,"readwrite")}function ru(e,t,n){var i=new iu(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then(function(){$t(e.g,i)},function(){$t(e.g,i)}),i}function wi(e,t,n){this.h=new cc(e),this.i=t,this.g=n}function Wg(e){return Promise.reject(new E(2,9,9011,"Cannot add new value to "+e))}function zg(e,t,n,i){t=(e=yi(e.h,t)).store();for(var r={},o=(n=p(n)).next();!o.done;r={hd:r.hd},o=n.next())r.hd=o.value,t.delete(r.hd).onsuccess=function(s){return function(){return i(s.hd)}}(r);return e.promise()}function Yg(e,t,n){var i,r,o,s,u,a,l;return C(function(c){if(1==c.g){for(i=ru(e.h,t,"readonly"),r=i.store(),o={},s=[],u={},a=p(n),l=a.next();!l.done;u={uc:u.uc,rc:u.rc},l=a.next())u.rc=l.value,u.uc=r.get(u.rc),u.uc.onsuccess=function(f){return function(){null==f.uc.result&&s.push(f.rc),o[f.rc]=f.uc.result}}(u);return y(c,i.promise(),2)}if(s.length)throw new E(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(f){return o[f]}))})}function co(e){this.g=new cc(e)}function lt(){this.g=new Map}function $g(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{Ra:i,ra:o},ra:r})})}),t)return t;throw new E(2,9,9013,"Could not find a cell that supports add-operations")}function ou(e,t,n){if(!(e=e.g.get(t)))throw new E(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new E(2,9,9013,"Could not find cell with name "+n);return t}function Jg(e,t){fo.set(e,t)}mn("http",nu,1,!0),mn("https",nu,1,!0),mn("blob",nu,1,!0),Kg.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Gg.prototype.destroy=function(){return this.i.destroy()},iu.prototype.abort=function(){var e=this;return C(function(t){if(1==t.g){try{e.i.abort()}catch{}return ee(t,2),y(t,e.g,4)}if(2!=t.g)return ue(t,0);te(t),F(t)})},iu.prototype.store=function(){return this.h},iu.prototype.promise=function(){return this.g},cc.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(d=wi.prototype).destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return Wg(this.i)},d.removeSegments=function(e,t){return zg(this,this.i,e,t)},d.getSegments=function(e){var t=this;return C(function(i){return 1==i.g?y(i,Yg(t,t.i,e),2):i.return(i.h.map(function(r){return t.Ef(r)}))})},d.addManifests=function(){return Wg(this.g)},d.updateManifest=function(){return Promise.reject(new E(2,9,9016,"Cannot modify values in "+this.g))},d.updateManifestExpiration=function(e,t){var n=yi(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},d.removeManifests=function(e,t){return zg(this,this.g,e,t)},d.getManifests=function(e){var t=this;return C(function(i){return 1==i.g?y(i,Yg(t,t.g,e),2):i.return(Promise.all(i.h.map(function(r){return t.Fc(r)})))})},d.getAllManifests=function(){var t,n,e=this;return C(function(i){return 1==i.g?(t=ru(e.h,e.g,"readonly"),n=new Map,y(i,lc(t,function(r,o){return C(function(u){if(1==u.g)return y(u,e.Fc(o),2);n.set(r,u.h),F(u)})}),2)):3!=i.g?y(i,t.promise(),3):i.return(n)})},d.Ef=function(e){return e},d.Fc=function(e){return Promise.resolve(e)},d.add=function(e,t){var i,r,o,s,u,a,n=this;return C(function(c){if(1==c.g){for(i=yi(n.h,e),r=i.store(),o=[],s={},u=p(t),a=u.next();!a.done;s={kd:s.kd},a=u.next())s.kd=r.add(a.value),s.kd.onsuccess=function(f){return function(){o.push(f.kd.result)}}(s);return y(c,i.promise(),2)}return c.return(o)})},co.prototype.destroy=function(){return this.g.destroy()},co.prototype.getAll=function(){var t,n,e=this;return C(function(i){return 1==i.g?(t=ru(e.g,"session-ids","readonly"),n=[],y(i,lc(t,function(r,o){n.push(o)}),2)):3!=i.g?y(i,t.promise(),3):i.return(n)})},co.prototype.add=function(e){for(var t=yi(this.g,"session-ids"),n=t.store(),i=(e=p(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},co.prototype.remove=function(e){var n,t=this;return C(function(i){return 1==i.g?y(i,lc(n=yi(t.g,"session-ids"),function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2):y(i,n.promise(),0)})},lt.prototype.destroy=function(){for(var e=[],t=p(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},lt.prototype.init=function(){var e=this;fo.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=p(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},U("shaka.offline.StorageMuxer",lt),lt.unregister=function(e){fo.delete(e)},lt.register=Jg,lt.prototype.destroy=lt.prototype.destroy;var fo=new Map;function ho(){wi.apply(this,arguments)}function Bx(e,t){!function bx(e){var t=e.streams.filter(function(u){return"audio"==u.contentType});if(e=e.streams.filter(function(u){return"video"==u.contentType}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=p(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=p(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,o=p(e);for(i=o.next();!i.done;i=o.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(o=p(t)).next();!i.done;i=o.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=p(t)).next();!i.done;i=t.next())for(i=i.value,o=(r=p(e)).next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}(e);for(var n=p(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return function Fx(e,t,n){var i=e.initSegmentUri?Qg(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=Qg(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}(r,e.startTime,t)})}function Qg(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new E(2,9,9004,"Could not parse uri "+e)}function su(){wi.apply(this,arguments)}function Vx(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function fc(){wi.apply(this,arguments)}function Zg(){this.m=this.j=this.i=this.h=this.g=this.l=null}function hn(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function hc(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new hn(t,n,i,Number(e[4])):null}function em(e,t){this.h=e,this.g=t}function tm(e,t){var n=new Y(null,0);n.Ja(t.duration);var i=t.streams.filter(function(l){return"audio"==l.type}),r=t.streams.filter(function(l){return"video"==l.type});i=function Hx(e,t,n,i){for(var r=new Set,o=p(t),s=o.next();!s.done;s=o.next()){var u=p(s.value.variantIds);for(s=u.next();!s.done;s=u.next())r.add(s.value)}for(s=(o=p(n)).next();!s.done;s=o.next())for(s=(u=p(s.value.variantIds)).next();!s.done;s=u.next())r.add(s.value);for(o=new Map,s=(r=p(r)).next();!s.done;s=r.next())o.set(s=s.value,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(r=(t=p(t)).next();!r.done;r=t.next())for(s=uu(e,r=r.value,i),r=(u=p(r.variantIds)).next();!r.done;r=u.next())(r=o.get(r.value)).language=s.language,r.primary=r.primary||s.primary,r.audio=s;for(t=(n=p(n)).next();!t.done;t=n.next())for(t=uu(e,r=t.value,i),r=(s=p(r.variantIds)).next();!r.done;r=s.next())(r=o.get(r.value)).primary=r.primary||t.primary,r.video=t;return o}(e,i,r,n),r=t.streams.filter(function(l){return l.type==le}).map(function(l){return uu(e,l,n)});var o=t.streams.filter(function(l){return"image"==l.type}).map(function(l){return uu(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=p(i.values()),a=u.next();!a.done;a=u.next())(a=a.value).audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function uu(e,t,n){var i=t.segments.map(function(r){return function Kx(e,t){var n=new hn("segment",e.h,e.g,t.dataKey);return new J(t.startTime,t.endTime,function(){return[n.toString()]},0,null,null!=t.initSegmentKey?function Xx(e,t){var n=new hn("segment",e.h,e.g,t);return new It(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,r)});return n.Vc(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new fe(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function nm(){this.g=null}function im(){}function rm(e){var t=hc(e);return e=t&&"manifest"==t.g?_i(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function Gx(e,t){var n=new lt;return _i(void 0).ga(function(){return n.init()}).ga(function(){return ou(n,t.Ra(),t.ra())}).ga(function(i){return i.getSegments([t.key()])}).ga(function(i){return{uri:t,data:i[0].data,headers:{}}}).finally(function(){return n.destroy()})}(t.key(),t):ei(new E(2,1,9004,e))}function om(e,t,n){var i,r,o,u;return C(function(l){switch(l.g){case 1:i=[];for(var c=[],f=p(n),h=f.next();!h.done;h=f.next()){h=h.value;for(var g=!1,m=p(c),w=m.next();!w.done;w=m.next())if(zx((w=w.value).info,h)){w.sessionIds.push(h.sessionId),g=!0;break}g||c.push({info:h,sessionIds:[h.sessionId]})}r=p(c),o=r.next();case 2:if(o.done){l.B(4);break}return u=function Wx(e,t,n){var i,r;return C(function(o){switch(o.g){case 1:return i=new ts({Kb:t,onError:function(){},Pd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ee(o,2),i.configure(e),y(o,function j0(e,t,n,i,r,o){var s=new Map;return(r={audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),sh(e,s,[])}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ue(o,3);break;case 2:return te(o),y(o,i.destroy(),5);case 5:case 9:return o.return([]);case 3:return ee(o,6),y(o,va(i),8);case 8:ue(o,7);break;case 6:return te(o),y(o,i.destroy(),9);case 7:return r=[],y(o,Promise.all(n.sessionIds.map(function(s){return C(function(u){return 1==u.g?(ee(u,2),y(u,function O0(e,t){var n,i,r;return C(function(o){return 1==o.g?y(o,ah(e,t,{initData:null,initDataType:null}),2):3!=o.g?(n=o.h)?(i=[],(r=e.i.get(n))&&(r.bb=new Se,i.push(r.bb)),i.push(n.remove()),y(o,Promise.all(i),3)):o.return():(e.i.delete(n),void F(o))})}(i,s),4)):2!=u.g?(r.push(s),ue(u,0)):(te(u),void F(u))})})),10);case 10:return y(o,i.destroy(),11);case 11:return o.return(r)}})}(e,t,o.value),y(l,u,5);case 5:i=i.concat(l.h),o=r.next(),l.B(2);break;case 4:return l.return(i)}})}function zx(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&xr(e.audioCapabilities,t.audioCapabilities,n)&&xr(e.videoCapabilities,t.videoCapabilities,n)}function dc(e,t){var n=tm(new em(e.Ra(),e.ra()),t),i=t.appMetadata||{};return n=sm(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function sm(e){for(var t=[],n=Af(e.variants),i=(n=p(n)).next();!i.done;i=n.next())t.push(Li(i.value));for(n=(e=p(e.textStreams)).next();!n.done;n=e.next())t.push(qo(n.value));return t}function $x(){this.g={}}function Jx(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;0>=o&&(o=t.bandwidth),e.g[n.id]=r,e.g[i.id]=o}}function Qx(e,t){e.g[t.id]=t.bandwidth||2048}function um(e,t){return null==(e=e.g[t])&&(e=0),e}function Xe(e){var t=this;if(e&&e.constructor!=N)throw new E(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Cb()):(this.h=Qi(),this.g=new Ee),this.i=[],this.j=[];var n=!e;this.l=new ti(function(){var i,r,o,s;return C(function(a){switch(a.g){case 1:return y(a,Promise.all(t.j.map(function(l){return ac(l)})),2);case 2:for(i=function(){},r=[],o=p(t.i),s=o.next();!s.done;s=o.next())r.push(s.value.then(i,i));return y(a,Promise.all(r),3);case 3:if(!n){a.B(4);break}return y(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,F(a)}})})}function pc(){if(Jt())e:{for(var e=p(fo.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function am(e){var t,n,i;return C(function(o){switch(o.g){case 1:return y(o,(t=new lt).init(),2);case 2:return y(o,$g(t),3);case 3:return i=new hn("manifest",(n=o.h).path.Ra,n.path.ra,e),y(o,t.destroy(),4);case 4:return y(o,(new Xe).remove(i.toString()),0)}})}function lm(e,t,n,i,r,o){var s,u,a,l,f,h,g,m,w,v;return C(function(T){switch(T.g){case 1:for(s=!1,ee(T,2),u=!0,a=p(n.streams),l=a.next();!l.done;l=a.next())for(f=p(l.value.segments),h=f.next();!h.done;h=f.next())null!=(m=(g=h.value).pendingSegmentRefId?i[g.pendingSegmentRefId]:null)&&(g.dataKey=m,g.pendingSegmentRefId=void 0),null!=(m=g.pendingInitSegmentRefId?i[g.pendingInitSegmentRefId]:null)&&(g.initSegmentKey=m,g.pendingInitSegmentRefId=void 0),g.pendingSegmentRefId&&(u=!1),g.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),y(T,e.updateManifest(t,n),4);case 4:s=!0,o(),ue(T,0);break;case 2:return w=te(T),y(T,am(t),5);case 5:if(s){T.B(6);break}return v=Object.values(i),y(T,e.removeSegments(v,function(){}),6);case 6:throw w}})}function gc(e){return e.variants.some(function(t){return t.video&&t.video.encrypted||t.audio&&t.audio.encrypted})}function cm(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function fm(e,t){for(var n=[],i=p(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Ft(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Ft(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function oS(e,t,n){return C(function(i){return y(i,function mS(e,t,n,i){var r,o,s;return C(function(u){return 1==u.g?i.drmInfo?(r=function Ox(e){var t=Array.from(e.g.keys());if(!t.length)throw new E(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:fm(i,!1),videoCapabilities:fm(i,!0)}}),y(u,om(t,e,o),2)):u.return():3!=u.g?y(u,r.remove(s=u.h),3):y(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function sS(e,t,n){function i(){}var r=function gS(e){for(var t=new Set,n=(e=p(e.streams)).next();!n.done;n=e.next())for(var i=(n=p(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return dc(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function hS(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external},u=r.offline.numberOfParallelDownloads,a=0;return function dS(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.jb(),function(l){var c=uc(l),f=void 0;if(!o.has(c)){var h=l.endTime-l.startTime;h=um(t,i.id)*h,h=Xg(e.g,h),o.set(c,new Hg(l,h,a,!1))}l.h&&(f=uc(l.h),o.has(f)||(h=.5*um(t,i.id),h=Xg(e.g,h),o.set(f,new Hg(l.h,h,a,!0)))),s.segments.push({pendingInitSegmentRefId:f,initSegmentKey:f?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:c,dataKey:0}),a=(a+1)%u}),s}function tt(e){if(e.l.g)throw new E(2,9,7001)}function au(){if(!pc())throw new E(2,9,9e3)}function mc(e,t){return C(function(n){return 1==n.g?(e.i.push(t),Wn(n),y(n,t,4)):2!=n.g?n.return(n.h):(tn(n),$t(e.i,t),nn(n,0))})}function hm(e){for(var t=new Set,n=p(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=p(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=p(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}Qe(ho,wi),ho.prototype.updateManifestExpiration=function(e,t){var i,r,o,n=this;return C(function(s){return i=yi(n.h,n.g),r=i.store(),o=new Se,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new E(2,9,9012,"Could not find values for "+e))},y(s,Promise.all([i.promise(),o]),0)})},ho.prototype.Fc=function(e){var t,n,o;return C(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n)o=Bx(e.periods[n],(n==e.periods.length-1?e.duration:e.periods[n+1].startTime)-e.periods[n].startTime),t.push(o);return y(u,Xp(t),2)}return u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:u.h,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},ho.prototype.Ef=function(e){return{data:e.data}},Qe(su,wi),su.prototype.Fc=function(e){var t,n,r;return C(function(u){if(1==u.g){for(t=[],n=0;n<e.periods.length;++n){r=(n==e.periods.length-1?e.duration:e.periods[n+1].startTime)-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=p(a.streams),f=c.next();!f.done;f=c.next())0!=(f=f.value).variantIds.length&&l.push(Vx(f,a.startTime,a.startTime+r));t.push(l)}return y(u,Xp(t),2)}return u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:u.h,sequenceMode:!1})})},Qe(fc,wi),(d=fc.prototype).hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,t){return function Px(e,t,n){var i=(e=yi(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},d.Fc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(d=Zg.prototype).init=function(){var e=this,t=new Se,n=!1,i=new ie(function(){n=!0,t.reject(new E(2,9,9017))});i.U(5);var r=P.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new ho(o,"segment","manifest"):null,e.g=s,s=(s=o.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new su(o,"segment-v2","manifest-v2"):null,e.h=s,s=(s=o.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new su(o,"segment-v3","manifest-v3"):null,e.i=s,s=(s=o.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new fc(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new co(o):null,e.m=o,i.stop(),t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=p(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())o.objectStoreNames.contains(u=u.value)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(t.reject(new E(2,9,9001,r.error)),i.stop(),o.preventDefault())},t},d.destroy=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return y(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return y(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return y(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return y(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return y(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),F(t)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return y(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return y(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return y(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return y(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),y(t,function qx(){var e=new Se,t=P.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new E(2,9,9001,t.error)),n.preventDefault()},e}(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,y(t,e.init(),0)}})},Jg("idb",function(){return Oe("CrKey")||Rr()||!P.indexedDB?null:new Zg}),hn.prototype.Ra=function(){return this.i},hn.prototype.ra=function(){return this.h},hn.prototype.key=function(){return this.l},hn.prototype.toString=function(){return this.j},(d=nm.prototype).configure=function(){},d.start=function(e,t){var i,r,u,a,l,n=this;return C(function(c){switch(c.g){case 1:if(i=hc(e),n.g=i,null==i||"manifest"!=i.g)throw new E(2,1,9004,e);return r=new lt,Wn(c),y(c,r.init(),4);case 4:return y(c,ou(r,i.Ra(),i.ra()),5);case 5:return y(c,c.h.getManifests([i.key()]),6);case 6:return u=c.h[0],a=new em(i.Ra(),i.ra()),l=tm(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return tn(c),y(c,r.destroy(),7);case 7:nn(c,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,t){var i,r,o,u,a,l,n=this;return C(function(c){switch(c.g){case 1:return i=n.g,r=new lt,ee(c,2,3),y(c,r.init(),5);case 5:return y(c,ou(r,i.Ra(),i.ra()),6);case 6:return y(c,(o=c.h).getManifests([i.key()]),7);case 7:if(a=(u=c.h[0]).sessionIds.includes(e),l=null==u.expiration||u.expiration>t,!a||!l){c.B(3);break}return y(c,o.updateManifestExpiration(i.key(),t),3);case 3:return tn(c),y(c,r.destroy(),10);case 10:nn(c,0);break;case 2:te(c),c.B(3)}})},At["application/x-offline-manifest"]=function(){return new nm},U("shaka.offline.OfflineScheme",im),im.plugin=rm,mn("offline",rm),(d=Xe.prototype).destroy=function(){return this.l.destroy()},d.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=nl(e,t)),Zi(this.h,e)},d.getConfiguration=function(){var e=Qi();return Zi(e,this.h,Qi()),e},d.Cb=function(){return this.g},d.store=function(e,t,n){var i=this,r=this.getConfiguration(),o=new Gg(this.g);return this.j.push(o),t=function Zx(e,t,n,i,r,o){var s,u,a,l,c,f,h,m,w,v,T,x,S;return C(function(A){switch(A.g){case 1:return au(),u=s=null,a=new lt,f=c=l=null,ee(A,2,3),y(A,i(),5);case 5:return y(A,function lS(e,t,n,i){var r,s,u,a;return C(function(l){if(1==l.g)return r=null,s={networkingEngine:e.g,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate}},n.configure(i.manifest),tt(e),y(l,n.start(t,s),2);if(3!=l.g)return u=l.h,tt(e),a=hm(u),y(l,Promise.all(fa(a,function(c){return c.createSegmentIndex()})),3);if(tt(e),r)throw r;return l.return(u)})}(e,t,s=A.h,r),6);case 6:if(h=A.h,tt(e),h.presentationTimeline.R()||h.presentationTimeline.Ib())throw new E(2,9,9005,t);return y(A,function cS(e,t,n,i){var r;return C(function(o){switch(o.g){case 1:return(r=new ts({Kb:e.g,onError:n,Pd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),y(o,function P0(e,t,n){return e.ja=!0,e.u=new Map,e.M=n,th(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return y(o,va(r),3);case 3:return y(o,ih(r),4);case 4:return o.return(r)}})}(e,h,function(I){f=f||I},r),7);case 7:if(u=A.h,tt(e),f)throw f;return y(A,function tS(e,t){var i,a,l,f,h,m,w,T,x,S,A,I,D,L,j,_,B,H;return C(function(z){switch(z.g){case 1:return function r0(e,t,n){e.variants=e.variants.filter(function(i){return Fo(i,t,n)})}(e,t.restrictions,{width:1/0,height:1/0}),y(z,vf(e,t.offline.usePersistentLicense),2);case 2:for(i=[],mf(e,t.preferredVideoCodecs,t.preferredAudioCodecs,t.preferredAudioChannelCount,t.preferredDecodingAttributes),a=p(e.variants),l=a.next();!l.done;l=a.next())i.push(Li(l.value));for(f=p(e.textStreams),h=f.next();!h.done;h=f.next())i.push(qo(h.value));for(m=p(e.imageStreams),w=m.next();!w.done;w=m.next())i.push(ra(w.value));return y(z,t.offline.trackSelectionCallback(i),3);case 3:for(T=z.h,x=e.presentationTimeline.getDuration(),S=0,A=p(T),I=A.next();!I.done;I=A.next())S+=I.value.bandwidth*x/8;return ee(z,4),y(z,t.offline.downloadSizeCallback(S),6);case 6:if(!z.h)throw new E(2,9,9014);ue(z,5);break;case 4:throw(D=te(z))instanceof E?D:new E(2,9,9015);case 5:for(L=new Set,j=new Set,_=new Set,B=p(T),I=B.next();!I.done;I=B.next())"variant"==(H=I.value).type&&L.add(H.id),"text"==H.type&&j.add(H.id),"image"==H.type&&_.add(H.id);e.variants=e.variants.filter(function(re){return L.has(re.id)}),e.textStreams=e.textStreams.filter(function(re){return j.has(re.id)}),e.imageStreams=e.imageStreams.filter(function(re){return _.has(re.id)}),function vS(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=p(t),i=n.next();!i.done;i=n.next())for(var r=(i=p(t)).next();!r.done;r=i.next());for(n=(t=p(e)).next();!n.done;n=t.next())for(i=(n=p(e)).next();!i.done;i=n.next());}(e),F(z)}})}(h,r),8);case 8:return y(A,a.init(),9);case 9:return tt(e),y(A,$g(a),10);case 10:return l=A.h,tt(e),m=function nS(e,t,n,i,r,o){var s=function Yx(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=sm(t),appMetadata:n,isIncomplete:!1}}(n,t,i),u=r.offline.progressCallback;!function Dx(e,t,n){e.m=t,e.l=n}(o,function(g,m){s.size=m,u(s,g)},function(g,m){a&&r.offline.usePersistentLicense&&l==m&&Or(e,"cenc",g)});var a=gc(t)&&!cm(t),l=null;a&&(l=yS.get(e.g.keySystem));for(var c=new $x,f=p(t.textStreams),h=f.next();!h.done;h=f.next())c.g[h.value.id]=52;for(h=(f=p(t.imageStreams)).next();!h.done;h=f.next())Qx(c,h.value);for(f=(h=p(t.variants)).next();!f.done;f=h.next())Jx(c,f.value);return c=function fS(e,t,n,i){for(var r=new Map,o=hm(n),s=new Map,u=(o=p(o)).next();!u.done;u=o.next()){var a=hS(e,t,n,u=u.value,i,r);s.set(u.id,a)}for(t=(e=p(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),rf:Array.from(r.values())}}(o,c,t,r),o=c.streams,c=c.rf,f=r.offline.usePersistentLicense,(h=e.g)&&f&&(h.initData=[]),{ph:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Mc(),streams:o,sessionIds:f?oh(e):[],drmInfo:h,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},rf:c}}(u,h,t,n,r,o),v=m.rf,y(A,l.ra.addManifests([w=m.ph]),11);case 11:if(T=A.h,tt(e),c=T[0],tt(e),f)throw f;return y(A,function eS(e,t,n,i,r,o,s,u,a){var l,c,f,h,g,m,w,v,T,x;return C(function(S){switch(S.g){case 1:if(l={},c=0,f=function(A,I){var M,k,R,D,L,j,_;return C(function(B){if(1==B.g){for(M={},k=p(A),R=k.next();!R.done;M={yb:M.yb},R=k.next())M.yb=R.value,D=kx(M.yb,o),L=M.yb.i,j=M.yb.h,_=function(H){return function(z){var re,ye;return C(function(je){if(1==je.g)return y(je,s.addSegments([{data:z}]),2);re=je.h,tt(e),ye=uc(H.yb.g),l[ye]=re[0],c+=z.byteLength,F(je)})}}(M),Rx(r,M.yb.groupId,D,L,j,_);return y(B,function Nx(e){return C(function(t){return 1==t.g?y(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}(r),2)}return I?(tt(e),function iS(e,t,n,i){if(t.expiration=n.Mc(),n=oh(n),t.sessionIds=i.offline.usePersistentLicense?n:[],gc(e)&&i.offline.usePersistentLicense&&!n.length)throw new E(2,9,9007)}(u,i,a,o),y(B,s.updateManifest(n,i),0)):B.B(0)})},h=!1,ee(S,2),!gc(u)||!h||cm(u)){S.B(4);break}return y(S,f(t.filter(function(A){return A.h}),!0),5);case 5:return tt(e),t=t.filter(function(A){return!A.h}),g=l,m=c,l={},c=0,y(S,lm(s,n,i,g,m,function(){return tt(e)}),6);case 6:tt(e);case 4:if(h){S.B(7);break}return y(S,f(t,!1),8);case 8:return tt(e),w=l,v=c,l={},c=0,y(S,lm(s,n,i,w,v,function(){return tt(e)}),9);case 9:tt(e);case 7:ue(S,0);break;case 2:return T=te(S),x=Object.values(l),y(S,s.removeSegments(x,function(){}),10);case 10:throw T}})}(e,v,c,w,o,r,l.ra,h,u),12);case 12:return tt(e),x=new hn("manifest",l.path.Ra,l.path.ra,c),A.return(dc(x,w));case 3:return tn(A),y(A,a.destroy(),13);case 13:if(!s){A.B(14);break}return y(A,s.stop(),14);case 14:if(!u){A.B(16);break}return y(A,u.destroy(),16);case 16:nn(A,0);break;case 2:if(S=te(A),null==c){A.B(18);break}return y(A,am(c),18);case 18:throw f||S}})}(this,e,t||{},function(){return C(function(u){return 1==u.g?y(u,ph(e,i.g,r.manifest.retryParameters,n||null),2):u.return((0,u.h)())})},r,o),(t=new Re(t,function(){return ac(o)})).finally(function(){$t(i.j,o)}),function pS(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){$t(e.i,n)})}(this,t)},d.remove=function(e){return mc(this,function rS(e,t){var n,i,r,o,u;return C(function(a){switch(a.g){case 1:if(au(),null==(n=hc(t))||"manifest"!=n.g)throw new E(2,9,9004,t);return i=n,r=new lt,Wn(a),y(a,r.init(),4);case 4:return y(a,ou(r,i.Ra(),i.ra()),5);case 5:return y(a,(o=a.h).getManifests([i.key()]),6);case 6:return u=a.h[0],y(a,Promise.all([oS(e,u,r),sS(o,i,u)]),2);case 2:return tn(a),y(a,r.destroy(),8);case 8:nn(a,0)}})}(this,e))},d.Dh=function(){return mc(this,function uS(e){var t,n,i,r,o,s,u,a,l,c;return C(function(f){switch(f.g){case 1:return au(),t=e.g,n=e.h.drm,i=new lt,r=!1,Wn(f),y(f,i.init(),4);case 4:o=[],function _x(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}(i,function(h){return o.push(h)}),s=p(o),u=s.next();case 5:if(u.done){f.B(2);break}return y(f,(a=u.value).getAll(),8);case 8:return y(f,om(n,t,l=f.h),9);case 9:return y(f,a.remove(c=f.h),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),f.B(5);break;case 2:return tn(f),y(f,i.destroy(),11);case 11:nn(f,3);break;case 3:return f.return(!r)}})}(this))},d.list=function(){return mc(this,function aS(){var e,t,n;return C(function(i){switch(i.g){case 1:return au(),e=[],t=new lt,Wn(i),y(i,t.init(),4);case 4:return n=Promise.resolve(),function jx(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({Ra:i,ra:o},r)})})}(t,function(r,o){n=n.then(function(){return C(function(u){if(1==u.g)return y(u,o.getAllManifests(),2);u.h.forEach(function(a,l){a=dc(new hn("manifest",r.Ra,r.ra,l),a),e.push(a)}),F(u)})})}),y(i,n,2);case 2:return tn(i),y(i,t.destroy(),6);case 6:nn(i,3);break;case 3:return i.return(e)}})}())},U("shaka.offline.Storage",Xe),Xe.deleteAll=function(){var e;return C(function(t){return 1==t.g?(e=new lt,Wn(t),y(t,function Ux(e){var t,n;return C(function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=0<t.length)||fo.forEach(function(o){(o=o())&&t.push(o)}),y(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.B(0):y(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}(e),2)):5!=t.g?(tn(t),y(t,e.destroy(),5)):nn(t,0)})},Xe.prototype.list=Xe.prototype.list,Xe.prototype.removeEmeSessions=Xe.prototype.Dh,Xe.prototype.remove=Xe.prototype.remove,Xe.prototype.store=Xe.prototype.store,Xe.prototype.getNetworkingEngine=Xe.prototype.Cb,Xe.prototype.getConfiguration=Xe.prototype.getConfiguration,Xe.prototype.configure=Xe.prototype.configure,Xe.prototype.destroy=Xe.prototype.destroy,Xe.support=pc;var yS=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function We(){}function it(e,t){for(e={priority:t||0,wg:e},t=0;t<po.length;t++)if(po[t].priority<e.priority)return void po.splice(t,0,e);po.push(e)}yl.offline=pc,U("shaka.polyfill",We),We.register=it,We.installAll=function(){for(var e=p(po),t=e.next();!t.done;t=e.next()){t=t.value;try{t.wg()}catch(n){ce("Error installing polyfill!",n)}}};var po=[];function go(){this.g=new lu}function dm(){P.AbortController||(P.AbortController=go,P.AbortSignal=lu)}function lu(){he.call(this),this.h=!1,this.g=void 0,this.onabort=null}function pm(){}function gm(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=p(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())wS(t.value)}function wS(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){null==n||null==n?this.removeAttribute(t):this.setAttribute(t,n)}})}function mm(){}function vm(){Lv()}function ym(){}function wm(){if(P.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",pr),document.addEventListener("webkitfullscreenerror",pr),document.addEventListener("mozfullscreenchange",pr),document.addEventListener("mozfullscreenerror",pr),document.addEventListener("MSFullscreenChange",pr),document.addEventListener("MSFullscreenError",pr)}}function pr(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function cu(){}function Tm(){var e=!0;(Bo()||Oe("PlayStation 5")||Ri()||Oe("Web0S")||Zn()||Oe("CrKey")||Oe("PC=EOS")||Oe("Hisense")||Oe("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),xm=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=TS)}function TS(e){var t,n,i,r,o,h,g,m,T,x,S;return C(function(A){switch(A.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return A.return(t);if(n=e.video,i=e.audio,"media-source"==e.type){if(!Jt())return A.return(t);if(n){if(Oe("CrKey"))if(P.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var I=n.contentType;n.width&&n.height&&(I+="; width="+n.width+"; height="+n.height),n.framerate&&(I+="; framerate="+n.framerate),"pq"===n.transferFunction&&(I+="; eotf=smpte2084"),r=cast.__platform__.canDisplayType(I)}else r=qe(n.contentType);else Zn()?(o=n.contentType,n.width&&n.height&&(o+="; width="+n.width,o+="; height="+n.height),n.framerate&&(o+="; framerate="+n.framerate),n.bitrate&&(o+="; bitrate="+n.bitrate),r=qe(o)):r=qe(n.contentType);if(!r)return A.return(t)}if(i&&!qe(i.contentType))return A.return(t)}else{if("file"!=e.type)return A.return(t);if(n&&!Di(n.contentType)||i&&!Di(i.contentType))return A.return(t)}if(!e.keySystemConfiguration)return t.supported=!0,A.return(Promise.resolve(t));if(g=[],m=[],(h=e.keySystemConfiguration).audio&&g.push({robustness:h.audio.robustness||"",contentType:e.audio.contentType}),h.video&&m.push({robustness:h.video.robustness||"",contentType:e.video.contentType}),T={initDataTypes:[h.initDataType],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes},g.length&&(T.audioCapabilities=g),m.length&&(T.videoCapabilities=m),x=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ee(A,3),x in fu){S=fu[x],A.B(5);break}return y(A,navigator.requestMediaKeySystemAccess(h.keySystem,[T]),6);case 6:fu[x]=S=A.h;case 5:ue(A,4);break;case 3:te(A);case 4:S&&(t.supported=!0,t.keySystemAccess=S);case 2:return A.return(t)}})}go.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new K("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},Wt.Object.defineProperties(go.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),We.AbortController=go,go.install=dm,Qe(lu,he),Wt.Object.defineProperties(lu.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),it(dm),We.Aria=pm,pm.install=gm,it(gm),We.EncryptionScheme=mm,mm.install=vm,it(vm,-2),We.Fullscreen=ym,ym.install=wm,it(wm),We.MediaCapabilities=cu,cu.install=Tm;var xm=null;cu.originalMcap=xm;var yc,wc,Tc,xc,Sc,Ec,fu={};function Sm(){}function Em(){var e=na();P.MediaSource&&(P.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function AS(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some(function(i){return i.startsWith("codecs=")})?cast.__platform__.canDisplayType(t):e(t)}}():e?12>=e?(Am(),function xS(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):15>=e&&Am():ea()?function SS(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}():(Uo()||Oo()||Oe("Tizen 4"))&&function ES(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=sn(t)[0]&&e(t)}}()),P.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function IS(){var e=MediaSource.isTypeSupported;Oe("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function Am(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ut.apply(0,arguments));return t.abort=function(){},t}}function Im(){}function Mm(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?function MS(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}():null!=P.orientation&&function CS(){function e(){switch(P.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new hu;screen.orientation=t,e(),P.addEventListener("orientationchange",function(){e();var n=new K("change");t.dispatchEvent(n)})}())}function hu(){he.call(this),this.type="",this.angle=0}function vc(){}function kS(e,t){try{var n=new du(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function DS(e){var t=this.mediaKeys;return t&&t!=e&&Cm(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Cm(e,this):Promise.resolve()}function RS(e){if(ct(e=Q(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=yn(e=vn(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Bt(e),this.dispatchEvent(t)}function du(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=p(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=p(n.audioCapabilities),s=o.next();!s.done;s=o.next())(s=s.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(s=(n=p(n.videoCapabilities)).next();!s.done;s=n.next())(o=s.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function mo(e){this.h=new WebKitMediaKeys(e),this.g=new Ie}function Cm(e,t){if(e.g.vb(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",RS);try{return zi(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function Ac(e){he.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ie,this.sessionId="",this.expiration=NaN,this.closed=new Se,this.keyStatuses=new km}function pu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new K("keystatuseschange"),e.dispatchEvent(t)}function km(){this.size=0,this.g=void 0}function Dm(){}function Rm(){!P.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=NS,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=LS,P.MediaKeys=gu,P.MediaKeySystemAccess=Ic,P.shakaMediaKeysPolyfill=!0)}function NS(){return Promise.reject(Error("The key system specified is not supported."))}function LS(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function gu(){throw new TypeError("Illegal constructor.")}function Ic(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Nm(){}function Lm(){if(!(!P.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Rc="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=PS,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jS,P.MediaKeys=vo,P.MediaKeySystemAccess=mu,P.shakaMediaKeysPolyfill=!0}}function Mc(e){return Rc?Rc+e.charAt(0).toUpperCase()+e.slice(1):e}function PS(e,t){try{var n=new mu(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function jS(e){var t=this.mediaKeys;return t&&t!=e&&Pm(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Pm(e,this),Promise.resolve()}function mu(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var o=(t=p(t)).next();!o.done;o=t.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=p(o.audioCapabilities),l=a.next();!l.done;l=a.next())(l=l.value).contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(l=(a=p(o.videoCapabilities)).next();!l.done;l=a.next())(l=l.value).contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=s)}throw n="Unsupported keySystem",("org.w3.clearkey"==e||"com.widevine.alpha"==e)&&(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function vo(e){this.l=e,this.h=null,this.g=new Ie,this.i=[],this.j=new Map}function Pm(e,t){e.h=t,e.g.vb();var n=Rc;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=Bt(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=Cc(e,i.sessionId);r&&(i=new K("message",i=(new Map).set("messageType",null==r.keyStatuses.Fb()?"licenserequest":"licenserenewal").set("message",i.message)),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=Cc(e,i.sessionId))&&(vu(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),e.g.D(t,n+"keyerror",function(i){var r=Cc(e,i.sessionId);r&&r.handleError(i)}))}function Cc(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function kc(e,t,n){he.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Se,this.keyStatuses=new _m}function jm(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=Q(yn("LOAD_SESSION|"+n));else{var r=yn("PERSISTENT|");i=Ve(r,t)}else i=Q(t)}catch(s){return Promise.reject(s)}e.h=new Se;var o=Mc("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if("InvalidStateError"!=s.name)return e.h=null,Promise.reject(s);new ie(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).U(.01)}return e.h}function Dc(e,t,n){if(e.g)e.g.then(function(){return Dc(e,t,n)}).catch(function(){return Dc(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Le(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=qt(r.keys[0].k),r=qt(r.keys[0].kid)}else i=Q(n),r=null;var o=Mc("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function vu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new K("keystatuseschange"),e.dispatchEvent(t)}function _m(){this.size=0,this.g=void 0}cu.memoizedMediaKeySystemAccessRequests_=fu,it(Tm,-1),We.MediaSource=Sm,Sm.install=Em,it(Em),We.Orientation=Im,Im.install=Mm,Qe(hu,he),hu.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):!!screen.msLockOrientation&&screen.msLockOrientation(i)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},hu.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},it(Mm),We.PatchedMediaKeysApple=vc,vc.uninstall=function(){yc&&(yc=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",wc),HTMLMediaElement.prototype.setMediaKeys=Tc,P.MediaKeys=xc,P.MediaKeySystemAccess=Sc,navigator.requestMediaKeySystemAccess=Ec,wc=Ec=Tc=Sc=xc=null,P.shakaMediaKeysPolyfill=!1)},vc.install=function(e){P.HTMLVideoElement&&P.WebKitMediaKeys&&(void 0!==e&&e&&(yc=!0,wc=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Tc=HTMLMediaElement.prototype.setMediaKeys,xc=P.MediaKeys,Sc=P.MediaKeySystemAccess,Ec=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=DS,P.MediaKeys=mo,P.MediaKeySystemAccess=du,navigator.requestMediaKeySystemAccess=kS,P.shakaMediaKeysPolyfill=!0)},du.prototype.createMediaKeys=function(){var e=new mo(this.keySystem);return Promise.resolve(e)},du.prototype.getConfiguration=function(){return this.g},mo.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Ac(this.h,e)},mo.prototype.setServerCertificate=function(){return Promise.resolve(!1)},mo.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Qe(Ac,he),(d=Ac.prototype).generateRequest=function(e,t){var n=this;this.h=new Se;try{var i=this.l.createSession("video/mp4",Q(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new K("message",r=(new Map).set("messageType",null==n.keyStatuses.Fb()?"license-request":"license-renewal").set("message",Bt(r.message))),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(pu(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,null!=n.h)n.h.reject(r),n.h=null;else if(null!=n.g)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:pu(n,"output-not-allowed");break;default:pu(n,"internal-error")}}),pu(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new Se;try{this.i.update(Q(e))}catch(t){this.g.reject(t)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.vb()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(d=km.prototype).Fb=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,ns.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=ns.value();return!(!this.g||!Pn(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){},We.PatchedMediaKeysNop=Dm,Dm.install=Rm,gu.prototype.createSession=function(){},gu.prototype.setServerCertificate=function(){},gu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Ic.prototype.getConfiguration=function(){},Ic.prototype.createMediaKeys=function(){},it(Rm,-10),We.PatchedMediaKeysWebkit=Nm,Nm.install=Lm,mu.prototype.createMediaKeys=function(){var e=new vo(this.g);return Promise.resolve(e)},mu.prototype.getConfiguration=function(){return this.h},vo.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new kc(t,this.l,e),this.i.push(e),e},vo.prototype.setServerCertificate=function(){return Promise.resolve(!1)},vo.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Qe(kc,he),(d=kc.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?vu(this,"output-restricted"):vu(this,1==t?"expired":"internal-error"))},d.generateRequest=function(e,t){return jm(this,t,null)},d.load=function(e){return"persistent-license"==this.l?jm(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var t=new Se;return Dc(this,t,e),t},d.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Mc("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(d=_m.prototype).Fb=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,ns.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=ns.value();return!(!this.g||!Pn(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Rc="";function Om(){}function Um(){if(P.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=OS,Object.defineProperty(e,"disablePictureInPicture",{get:BS,set:FS,enumerable:!0,configurable:!0}),document.exitPictureInPicture=US,document.addEventListener("webkitpresentationmodechanged",_S,!0))}}function _S(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function OS(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function US(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function BS(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function FS(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Bm(){}function Fm(){P.crypto&&("randomUUID"in P.crypto||(P.crypto.randomUUID=bS))}function bS(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function bm(){}function Vm(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=VS)}function VS(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(n,i){e({usage:n,quota:i})},t)})}function qm(){}function Hm(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:qS})}function qS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Km(){}function Xm(){if(P.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}function Gm(){}function Wm(){if(P.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ta())&&(e.getVideoPlaybackQuality=HS)}}function HS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function zm(){}function Ym(){if(!P.VTTCue&&P.TextTrackCue){var e=null,t=TextTrackCue.length;if(3==t)e=Nc;else if(6==t)e=KS;else{try{var n=!!Nc(1,2,"")}catch{n=!1}n&&(e=Nc)}e&&(P.VTTCue=function(i,r,o){return e(i,r,o)})}}function Nc(e,t,n){return new P.TextTrackCue(e,t,n)}function KS(e,t,n){return new P.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}function mt(){}it(Lm),We.PiPWebkit=Om,Om.install=Um,it(Um),We.RandomUUID=Bm,Bm.install=Fm,it(Fm),We.StorageEstimate=bm,bm.install=Vm,it(Vm),We.Symbol=qm,qm.install=Hm,it(Hm),We.VideoPlayPromise=Km,Km.install=Xm,it(Xm),We.VideoPlaybackQuality=Gm,Gm.install=Wm,it(Wm),We.VTTCue=zm,zm.install=Ym,it(Ym),mt.prototype.parseInit=function(){},mt.prototype.setSequenceMode=function(){},mt.prototype.setManifestType=function(){},mt.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=(e=p(e=Le(e).split(/\r?\n/))).next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=XS.exec(r))){var o=GS.exec(r[1]);r=new Te(o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},U("shaka.text.LrcTextParser",mt),mt.prototype.parseMedia=mt.prototype.parseMedia,mt.prototype.setManifestType=mt.prototype.setManifestType,mt.prototype.setSequenceMode=mt.prototype.setSequenceMode,mt.prototype.parseInit=mt.prototype.parseInit;var XS=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,GS=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ht(){}function $m(e,t,n,i,r,o,s,u,a,l,c){var f=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!c)return null;var h=document.createElement("span");h.textContent=e.textContent}else h=e;for(var g=null,m=p(ZS),w=m.next();!w.done&&!(g=wu(h,"backgroundImage",i,"#",w.value)[0]);w=m.next());if(("p"==e.nodeName||g)&&(c=!0),e=c,m="default"==(h.getAttribute("xml:space")||(u?"default":"preserve")),u=[],!(w=Array.from(h.childNodes).every(function(A){return A.nodeType==Node.TEXT_NODE})))for(var v=p(h.childNodes),T=v.next();!T.done;T=v.next())(T=$m(T.value,t,n,i,r,o,s,m,a,h,c))&&u.push(T);i=null!=l,v=/\S/.test(h.textContent);var x=h.hasAttribute("begin")||h.hasAttribute("end")||h.hasAttribute("dur");if(!(x||v||"br"==h.tagName||0!=u.length||i&&!m))return null;for(v=(T=Zm(h,n)).start,T=T.end;f&&f.nodeType==Node.ELEMENT_NODE&&"tt"!=f.tagName;)v=(T=zS(f,n,v,T)).start,T=T.end,f=f.parentNode;if(null==v&&(v=0),v+=t.periodStart,T=null==T?1/0:T+t.periodStart,v=Math.max(v,t.segmentStart),T=Math.min(T,t.segmentEnd),!x&&0<u.length)for(v=1/0,T=0,n=(t=p(u)).next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),T=Math.max(T,n.endTime);if("br"==h.tagName)return(r=new Te(v,T,"")).lineBreak=!0,r;if(t="",w&&(t=h.textContent,m&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new Te(v,T,t)).nestedCues=u,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=wu(h,"region",o,"")[0],h.hasAttribute("region")&&a&&a.getAttribute("xml:id")){var S=a.getAttribute("xml:id");t.region=s.filter(function(A){return A.id==S})[0]}return s=a,l&&i&&!h.getAttribute("region")&&!h.getAttribute("style")&&(s=wu(l,"region",o,"")[0]),function WS(e,t,n,i,r,o,s){if("rtl"==Je(t,n,r,"direction",o=o||s)&&(e.direction="rtl"),"tb"==(s=Je(t,n,r,"writingMode",o))||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=Er),(s=Je(t,n,r,"textAlign",!0))?(e.positionAlign=QS[s],e.lineAlign=JS[s],e.textAlign=Vu[s.toUpperCase()]):e.textAlign=dn,(s=Je(t,n,r,"displayAlign",!0))&&(e.displayAlign=tf[s.toUpperCase()]),(s=Je(t,n,r,"color",o))&&(e.color=s),(s=Je(t,n,r,"backgroundColor",o))&&(e.backgroundColor=s),(s=Je(t,n,r,"border",o))&&(e.border=s),s=Je(t,n,r,"fontFamily",o))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s}if((s=Je(t,n,r,"fontWeight",o))&&"bold"==s&&(e.fontWeight=700),s=Je(t,n,r,"wrapOption",o),e.wrapLine=!(s&&"noWrap"==s),(s=Je(t,n,r,"lineHeight",o))&&s.match(gr)&&(e.lineHeight=s),(s=Je(t,n,r,"fontSize",o))&&(s.match(gr)||s.match($S))&&(e.fontSize=s),(s=Je(t,n,r,"fontStyle",o))&&(e.fontStyle=sf[s.toUpperCase()]),i){s=i.getAttribute("imageType")||i.getAttribute("imagetype");var u=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==s&&"Base64"==u&&i&&(e.backgroundImage="data:image/png;base64,"+i)}switch((i=Je(t,n,r,"textOutline",o))&&((i=i.split(" "))[0].match(gr)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(gr)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=Je(t,n,r,"letterSpacing",o))&&i.match(gr)&&(e.letterSpacing=i),(i=Je(t,n,r,"linePadding",o))&&i.match(gr)&&(e.linePadding=i),(i=Je(t,n,r,"opacity",o))&&(e.opacity=parseFloat(i)),(i=yu(n,r,"textDecoration"))&&Jm(e,i),(i=Lc(t,r,"textDecoration"))&&Jm(e,i),(i=Je(t,n,r,"textCombine",o))&&(e.textCombineUpright=i),Je(t,n,r,"ruby",o)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}(t,h,s,g,r,e,0==u.length),t}function Jm(e,t){for(var n=(t=p(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&$t(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&$t(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&$t(e.textDecoration,"overline")}}function Je(e,t,n,i,r){return r=void 0===r||r,(e=Lc(e,n,i))?e:r?yu(t,n,i):null}function yu(e,t,n){return e?Sn(e,Tu,n)||Qm(e,t,n):null}function Lc(e,t,n){return Sn(e,Tu,n)||Qm(e,t,n)}function Qm(e,t,n){e=wu(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var o=si(e[r],"urn:ebu:tt:style",n);o||(o=Sn(e[r],Tu,n)),o||(o=Lc(e[r],t,n)),o&&(i=o)}return i}function wu(e,t,n,i,r){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=r?si(s,r,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(r=(t=p(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,s=(e=p(n)).next();!s.done;s=e.next())if(i+(s=s.value).getAttribute("xml:id")==r){o.push(s);break}return o}function zS(e,t,n,i){return e=Zm(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function Zm(e,t){var n=Pc(e.getAttribute("begin"),t),i=Pc(e.getAttribute("end"),t);return e=Pc(e.getAttribute("dur"),t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function Pc(e,t){var n=null;if(ev.test(e)){e=ev.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);n=(r+=(o+=(Number(e[5])||0)/t.h)/t.frameRate)+60*i+3600*n}else if(tv.test(e))n=jc(tv,e);else if(nv.test(e))n=jc(nv,e);else if(iv.test(e))e=iv.exec(e),n=Number(e[1])/t.frameRate;else if(rv.test(e))e=rv.exec(e),n=Number(e[1])/t.g;else if(ov.test(e))n=jc(ov,e);else if(e)throw new E(2,2,2001,"Could not parse cue time range in TTML");return n}function jc(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function YS(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Ge["application/x-subtitle-lrc"]=function(){return new mt},ht.prototype.parseInit=function(){},ht.prototype.setSequenceMode=function(){},ht.prototype.setManifestType=function(){},ht.prototype.parseMedia=function(e,t){var n=Le(e);if(e=[],""==n)return e;var i=qi(n,"tt");if(!i)throw new E(2,2,2005,"Failed to parse TTML.");if(!(n=i.getElementsByTagName("body")[0]))return[];var r=Sn(i,yo,"frameRate"),o=Sn(i,yo,"subFrameRate"),s=Sn(i,yo,"frameRateMultiplier"),u=Sn(i,yo,"tickRate"),a=Sn(i,yo,"cellResolution"),l=i.getAttribute("xml:space")||"default",c=Sn(i,Tu,"extent");if("default"!=l&&"preserve"!=l)throw new E(2,2,2005,"Invalid xml:space value: "+l);l="default"==l,r=new YS(r,o,s,u),a=a&&(a=/^(\d+) (\d+)$/.exec(a))?{Cg:parseInt(a[1],10),rows:parseInt(a[2],10)}:null,o=(o=i.getElementsByTagName("metadata")[0])?function D0(e){return Array.from(e.childNodes).filter(function(t){return t instanceof Element})}(o):[],s=Array.from(i.getElementsByTagName("style")),u=[];for(var f=p(i=Array.from(i.getElementsByTagName("region"))),h=f.next();!h.done;h=f.next()){var g=h.value;h=new Ai;var m=g.getAttribute("xml:id");if(m){h.id=m;var v,T,w=null;c&&(w=_c.exec(c)||Oc.exec(c)),m=w?Number(w[1]):null,w=w?Number(w[2]):null,(v=yu(g,s,"extent"))&&null!=(v=(T=_c.exec(v))||Oc.exec(v))&&(h.width=Number(v[1]),h.height=Number(v[2]),T||(null!=m&&(h.width=100*h.width/m),null!=w&&(h.height=100*h.height/w)),h.widthUnits=T||null!=m?rn:0,h.heightUnits=T||null!=w?rn:0),(g=yu(g,s,"origin"))&&null!=(v=(T=_c.exec(g))||Oc.exec(g))&&(h.viewportAnchorX=Number(v[1]),h.viewportAnchorY=Number(v[2]),T||(null!=w&&(h.viewportAnchorY=100*h.viewportAnchorY/w),null!=m&&(h.viewportAnchorX=100*h.viewportAnchorX/m)),h.viewportAnchorUnits=T||null!=m?rn:0)}else h=null;h&&u.push(h)}if(Me(n,"p").length)throw new E(2,2,2001,"<p> can only be inside <div> in TTML");for(f=(c=p(Me(n,"div"))).next();!f.done;f=c.next())if(Me(f.value,"span").length)throw new E(2,2,2001,"<span> can only be inside <p> in TTML");return(t=$m(n,t,r,o,s,i,u,l,a,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},U("shaka.text.TtmlTextParser",ht),ht.prototype.parseMedia=ht.prototype.parseMedia,ht.prototype.setManifestType=ht.prototype.setManifestType,ht.prototype.setSequenceMode=ht.prototype.setSequenceMode,ht.prototype.parseInit=ht.prototype.parseInit;var _c=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,$S=/^(\d{1,2}(?:\.\d+)?|100)%$/,gr=/^(\d+px|\d+em|\d*\.?\d+c)$/,Oc=/^(\d+)px (\d+)px$/,ev=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,tv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,nv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,iv=/^(\d*(?:\.\d*)?)f$/,rv=/^(\d*(?:\.\d*)?)t$/,ov=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),JS={left:Yn,center:"center",right:"end",start:Yn,end:"end"},QS={left:"line-left",center:"center",right:"line-right"},yo=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Tu=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ZS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function rt(){this.g=new ht}function ot(){this.h=!1,this.g="UNKNOWN"}function sv(e){for(var t=p(Object.entries(nf)),n=t.next();!n.done;n=t.next()){var i=p(n.value);n=i.next().value,i=i.next().value;var r=new Te(0,0,"");r.color=i,e.set("."+n,r)}for(n=(t=p(Object.entries(rf))).next();!n.done;n=t.next())n=(i=p(n.value)).next().value,i=i.next().value,(r=new Te(0,0,"")).backgroundColor=i,e.set("."+n,r)}function uv(e,t,n){0===n.size&&sv(n);e:{for(var i=[],r=-1,o="",s=0;s<e.length;s++)if("/"===e[s]&&0<s&&"<"===e[s-1]){var u=e.indexOf(">",s);if(u<=s)break e;if((u=e.substring(s+1,u))&&"c"===u){var a=i.pop();a?a===u?(o+="/"+u+">",s+=u.length+1):a.startsWith("c.")?(s+=u.length+1,o+="/"+a+">"):o+=e[s]:o+=e[s]}else o+=e[s]}else"<"===e[s]?"c"!=e[r=s+1]&&(r=-1):">"===e[s]&&0<r&&(i.push(e.substr(r,s-r)),r=-1),o+=e[s];e=o}for(i=e,e=[],o=-1,r=0;r<i.length;r++)"<"===i[r]?o=r+1:">"===i[r]&&0<o&&((o=i.substr(o,r-o)).match(cv)&&e.push(o),o=-1);for(r=(e=p(e)).next();!r.done;r=e.next())i=i.replace("<"+(r=r.value)+">",'<div time="'+r+'">'),i+="</div>";e:{for(r=e=i,o=[],s=-1,e="",i=!1,u=0;u<r.length;u++)if("/"===r[u]){if(-1===(a=r.indexOf(">",u))){e=r;break e}if((a=r.substring(u+1,a))&&"v"==a){i=!0;var l=null;if(o.length&&(l=o[o.length-1]),l){if(l===a)e+="/"+a+">";else{if(!l.startsWith("v")){e+=r[u];continue}e+="/"+l+">"}u+=a.length+1}else e+=r[u]}else e+=r[u]}else"<"===r[u]?"v"!=r[s=u+1]&&(s=-1):">"===r[u]&&0<s&&(o.push(r.substr(s,u-s)),s=-1),e+=r[u];for(o=(r=p(o)).next();!o.done;o=r.next())s=(o=o.value).replace(" ",".voice-"),e=(e=e.replace("<"+o+">","<"+s+">")).replace("</"+o+">","</"+s+">"),i||(e+="</"+s+">")}if(i=qi("<span>"+e+"</span>","span")){if(1==(i=i.childNodes).length&&((r=i[0]).nodeType==Node.TEXT_NODE||r.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=Uc(e));for(i=(e=p(i)).next();!i.done;i=e.next())av(i.value,t,n)}else t.payload=Uc(e)}function xu(e,t){return e&&0<e.length?e:t}function av(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var r=p(e.nodeName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();n.has(s='v[voice="'+u+'"]')||(s="v[voice="+u+"]")}switch(n.has(s)&&(s=n.get(s))&&(i.backgroundColor=xu(s.backgroundColor,i.backgroundColor),i.color=xu(s.color,i.color),i.fontFamily=xu(s.fontFamily,i.fontFamily),i.fontSize=xu(s.fontSize,i.fontSize),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.rubyTag=s.rubyTag,i.textCombineUpright=s.textCombineUpright,i.textShadow=s.textShadow,i.wrapLine=s.wrapLine),o){case"br":return i=ef(i.startTime,i.endTime),void t.nestedCues.push(i);case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":(o=e.getAttribute("color"))&&(i.color=o);break;case"div":if(!(o=e.getAttribute("time")))break;(o=Su(new mi(o)))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.childNodes,ga(e)||1==r.length&&ga(r[0]))for(r=!0,n=p(e.textContent.split("\n")),e=n.next();!e.done;e=n.next())e=e.value,r||(r=ef(i.startTime,i.endTime),t.nestedCues.push(r)),0<e.length&&((r=i.clone()).payload=Uc(e),t.nestedCues.push(r)),r=!1;else for(t.nestedCues.push(i),e=(t=p(r)).next();!e.done;e=t.next())av(e.value,i,n)}function lv(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?e.textAlign="middle"==(t=i[1])?dn:Vu[t.toUpperCase()]:(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(e.positionAlign="line-left"==(t=i[2])||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":ko)):(i=/^region:(.*)$/.exec(t))?(t=function e2(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=qu[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Do,e.line=Number(n[1]),n[2]&&(e.lineAlign=qu[n[2].toUpperCase()]))}function Su(e){if(null==(e=Kn(e,cv)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Uc(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"\u200e","&rlm;":"\u200f"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||"'"}):e||""}Ge["application/ttml+xml"]=function(){return new ht},rt.prototype.parseInit=function(e){var t=!1;if((new xe).box("moov",de).box("trak",de).box("mdia",de).box("minf",de).box("stbl",de).O("stsd",Fi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new E(2,2,2007)},rt.prototype.setSequenceMode=function(){},rt.prototype.setManifestType=function(){},rt.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new xe).box("mdat",bi(function(o){i=!0,r=r.concat(n.g.parseMedia(o,t))})).parse(e,!1),!i)throw new E(2,2,2007);return r},U("shaka.text.Mp4TtmlParser",rt),rt.prototype.parseMedia=rt.prototype.parseMedia,rt.prototype.setManifestType=rt.prototype.setManifestType,rt.prototype.setSequenceMode=rt.prototype.setSequenceMode,rt.prototype.parseInit=rt.prototype.parseInit,Ge['application/mp4; codecs="stpp"']=function(){return new rt},Ge['application/mp4; codecs="stpp.ttml"']=function(){return new rt},Ge['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new rt},Ge['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new rt},ot.prototype.parseInit=function(){},ot.prototype.setSequenceMode=function(e){this.h=e},ot.prototype.setManifestType=function(e){this.g=e},ot.prototype.parseMedia=function(e,t){var n=(e=(e=Le(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new E(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.h){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){if(null==(e=Su(new mi(i[1]))))throw new E(2,2,2e3);for(r=Number(r[1]),i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);for(t=[],i=(r=p(n[0].split("\n"))).next();!i.done;i=r.next())if(/^Region:/.test(i=i.value)){i=new mi(i);var o=new Ai;vi(i),cr(i);for(var s=vi(i);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),cr(i),s=vi(i)}t.push(o)}for(sv(r=new Map),i=[],o=(n=p(n.slice(1))).next();!o.done;o=n.next()){if((1!=(o=o.value.split("\n")).length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),-1!=s&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(s=(u=p(u)).next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=r.get(s))||(l=new Te(0,0,""));for(var c=!1,f=0;f<a.length;f++){var h=/^\s*([^:]+):\s*(.*)/.exec(a[f]);if(h){var g=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=g;break;case"color":c=!0,l.color=g;break;case"font-family":c=!0,l.fontFamily=g;break;case"font-size":c=!0,l.fontSize=g;break;case"font-weight":(700<=parseInt(g,10)||"bold"==g)&&(c=!0,l.fontWeight=700);break;case"font-style":switch(g){case"normal":c=!0,l.fontStyle=Hu;break;case"italic":c=!0,l.fontStyle="italic";break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(g);break;case"text-combine-upright":c=!0,l.textCombineUpright=g;break;case"text-shadow":c=!0,l.textShadow=g;break;case"white-space":c=!0,l.wrapLine="noWrap"!=g}}}c&&r.set(s,l)}}if(c=e,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(u=null,o[0].includes("--\x3e")||(u=o[0],o.splice(0,1)),a=Su(s=new mi(o[0])),f=Kn(s,/[ \t]+--\x3e[ \t]+/g),l=Su(s),null==a||null==f||null==l)ce("Failed to parse VTT time code. Cue skipped:",u,o),o=null;else{for(a+=c,l+=c,c=o.slice(1).join("\n").trim(),r.has("global")?((o=r.get("global").clone()).startTime=a,o.endTime=l,o.payload=""):o=new Te(a,l,""),uv(c,o,r),cr(s),a=vi(s);a;)lv(o,a,t),cr(s),a=vi(s);null!=u&&(o.id=u)}o&&i.push(o)}return i},U("shaka.text.VttTextParser",ot),ot.prototype.parseMedia=ot.prototype.parseMedia,ot.prototype.setManifestType=ot.prototype.setManifestType,ot.prototype.setSequenceMode=ot.prototype.setSequenceMode,ot.prototype.parseInit=ot.prototype.parseInit;var cv=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function vt(){this.g=null}function t2(e,t,n){var i,r,o;return(new xe).box("payl",bi(function(s){i=Le(s)})).box("iden",bi(function(s){r=Le(s)})).box("sttg",bi(function(s){o=Le(s)})).parse(e),i?function n2(e,t,n,i,r){if(uv(e,i=new Te(i,r,""),new Map),t&&(i.id=t),n)for(t=vi(e=new mi(n));t;)lv(i,t,[]),cr(e),t=vi(e);return i}(i,r,o,t,n):null}function yt(){}function fv(e){if(null==(e=Kn(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function dt(){this.g=new ot}function hv(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=p((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function wt(){}function i2(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=dv(n))&&(e.color=n),(n=t.BackColour)&&(n=dv(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Sr,e.textAlign="start";break;case 2:e.displayAlign=Sr,e.textAlign=dn;break;case 3:e.displayAlign=Sr,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=dn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=dn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function dv(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function pv(e){return 3600*((e=o2.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Ge["text/vtt"]=function(){return new ot},Ge['text/vtt; codecs="vtt"']=function(){return new ot},Ge['text/vtt; codecs="wvtt"']=function(){return new ot},vt.prototype.parseInit=function(e){var t=this,n=!1;if((new xe).box("moov",de).box("trak",de).box("mdia",de).O("mdhd",function(i){i=is(i.reader,i.version),t.g=i.timescale}).box("minf",de).box("stbl",de).O("stsd",Fi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new E(2,2,2008);if(!n)throw new E(2,2,2008)},vt.prototype.setSequenceMode=function(){},vt.prototype.setManifestType=function(){},vt.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new E(2,2,2008);var r,n=0,i=[],o=[],s=!1,u=!1,a=!1,l=null;if((new xe).box("moof",de).box("traf",de).O("tfdt",function(S){s=!0,n=Ma(S.reader,S.version).baseMediaDecodeTime}).O("tfhd",function(S){l=xh(S.reader,S.flags).Hf}).O("trun",function(S){u=!0,i=Sh(S.reader,S.version,S.flags).$f}).box("mdat",bi(function(S){a=!0,r=S})).parse(e,!1),!a&&!s&&!u)throw new E(2,2,2008);e=n;for(var c=new ve(r,0),f=p(i),h=f.next();!h.done;h=f.next()){var g=(h=h.value).gf||l,m=h.Sd?n+h.Sd:e;e=m+(g||0);var w=0;do{var v=c.L();w+=v;var x=null;"vttc"==Jo(c.L())?8<v&&(x=c.mb(v-8)):c.skip(v-8),g&&x&&(v=t2(x,t.periodStart+m/this.g,t.periodStart+e/this.g),o.push(v))}while(h.sampleSize&&w<h.sampleSize)}return o.filter(On)},U("shaka.text.Mp4VttParser",vt),vt.prototype.parseMedia=vt.prototype.parseMedia,vt.prototype.setManifestType=vt.prototype.setManifestType,vt.prototype.setSequenceMode=vt.prototype.setSequenceMode,vt.prototype.parseInit=vt.prototype.parseInit,Ge['application/mp4; codecs="wvtt"']=function(){return new vt},yt.prototype.parseInit=function(){},yt.prototype.setSequenceMode=function(){},yt.prototype.setManifestType=function(){},yt.prototype.parseMedia=function(e){var t=Le(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=p(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new mi((n=n.value.split("\n"))[0]),r=fv(i),o=Kn(i,/,/g);if(i=fv(i),null==r||null==o||null==i)throw new E(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Te(r,i,n.slice(1).join("\n").trim()))}return e},U("shaka.text.SbvTextParser",yt),yt.prototype.parseMedia=yt.prototype.parseMedia,yt.prototype.setManifestType=yt.prototype.setManifestType,yt.prototype.setSequenceMode=yt.prototype.setSequenceMode,yt.prototype.parseInit=yt.prototype.parseInit,Ge["text/x-subviewer"]=function(){return new yt},dt.prototype.parseInit=function(){},dt.prototype.setSequenceMode=function(){},dt.prototype.setManifestType=function(){},dt.prototype.parseMedia=function(e,t){return e=Q(yn(e=hv(e=Le(e)))),this.g.parseMedia(e,t)},U("shaka.text.SrtTextParser",dt),dt.srt2webvtt=hv,dt.prototype.parseMedia=dt.prototype.parseMedia,dt.prototype.setManifestType=dt.prototype.setManifestType,dt.prototype.setSequenceMode=dt.prototype.setSequenceMode,dt.prototype.parseInit=dt.prototype.parseInit,Ge["text/srt"]=function(){return new dt},wt.prototype.parseInit=function(){},wt.prototype.setSequenceMode=function(){},wt.prototype.setManifestType=function(){},wt.prototype.parseMedia=function(e){for(var t="",n="",i=(e=p(e=Le(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=r2.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null;for(var o=(t=p(t.split(/\r?\n/))).next();!o.done;o=t.next())if(!/^\s*;/.test(r=o.value)&&(o=gv.exec(r)))if(r=o[1].trim(),o=o[2].trim(),"Format"==r)i=o.split(Eu);else if("Style"==r){r=o.split(Eu),o={};for(var s=0;s<i.length&&s<r.length;s++)o[i[s]]=r[s];e.push(o)}for(i=[],t=null,r={},o=(n=p(n.split(/\r?\n/))).next();!o.done;r={be:r.be},o=n.next())if(!/^\s*;/.test(o=o.value)&&(s=gv.exec(o)))if(o=s[1].trim(),s=s[2].trim(),"Format"==o)t=s.split(Eu);else if("Dialogue"==o){s=s.split(Eu),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];s=new Te(u=pv(o.Start),pv(o.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.be=o.Style,(o=e.find(function(l){return function(c){return c.Name==l.be}}(r)))&&i2(s,o),i.push(s)}return i},U("shaka.text.SsaTextParser",wt),wt.prototype.parseMedia=wt.prototype.parseMedia,wt.prototype.setManifestType=wt.prototype.setManifestType,wt.prototype.setSequenceMode=wt.prototype.setSequenceMode,wt.prototype.parseInit=wt.prototype.parseInit;var r2=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,gv=/^\s*([^:]+):\s*(.*)/,Eu=/\s*,\s*/,o2=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function mv(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{Bd:n,P:e}:null}function vv(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(60&e[t+2])>>>2;if(i>n.length-1)return null;var o=(1&e[t+2])<<2;return{sampleRate:n[i],channelCount:o|=(192&e[t+3])>>>6,aa:"mp4a.40."+(1+((192&e[t+2])>>>6))}}function s2(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var i=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(i<=n)&&((t+=i)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function Nt(e){this.i=e,this.h=0,this.g=new Map}function yv(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var i=63&e[t+4],r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;2===o?s+=2:(1&o&&1!==o&&(s+=2),4&o&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(3&u)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,$:e,P:r}}function a2(e,t){if(11===e[t]&&119===e[t+1]){var r,o,n=0,i=5;for(t+=i;0<i;){o=e[t];var s=Math.min(i,8),u=8-s;r=(o&(r=4278190080>>>24+u<<u))>>u,n=n?n<<s|r:r,t+=1,i-=s}if(16>n)return!0}return!1}function Lt(e){this.i=e,this.h=0,this.g=new Map}function wv(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]<<0))return null;var n=new In(e.subarray(t+2));ft(n,2),ft(n,3);var i=Z(n,11)+1<<1,r=Z(n,2);if(3==r){r=[24e3,22060,16e3][r=Z(n,2)];var o=3}else r=[48e3,44100,32e3][r],o=Z(n,2);var s=Z(n,3),u=Z(n,1);return n=Z(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][o])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,$:e,P:i})}function Pt(e){this.i=e,this.h=0,this.g=new Map}function c2(e){for(var t=!1,n=new Uint8Array([]),i=e.find(function(a){return 7==a.type}),r=!1,o=(e=p(e)).next();!o.done;o=e.next()){var s=!1;switch((o=o.value).type){case 1:s=r=!0;var u=o.data;i&&4<u.length&&(2===(u=ry(new In(u)))||4===u||7===u||9===u)&&(t=!0);break;case 5:t=s=r=!0;break;case 6:case 7:case 8:case 12:s=!0;break;case 9:r=s=!0;break;default:s=!1}r&&s&&(s=o.ha.byteLength,(u=new Uint8Array(4))[0]=s>>24&255,u[1]=s>>16&255,u[2]=s>>8&255,u[3]=255&s,n=Ve(n,u,o.ha))}return n.byteLength?{data:n,Sc:t}:null}Ge["text/x-ssa"]=function(){return new wt},(d=Nt.prototype).destroy=function(){this.g.clear()},d.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&qe(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(on(t)||"mp4a.40.2")+'"':t},d.getOrginalMimeType=function(){return this.i},d.transmux=function(e,t,n,i){for(var r=Q(e),o=Br(r),s=o.length;s<r.length&&!s2(r,s);s++);if(e=1e3*n.endTime,(o=ai(o)).length&&n&&(n=o.find(function(l){return"com.apple.streaming.transportStreamTimestamp"===l.description}))&&(e=n.data),!(n=vv(r,s)))return Promise.reject(new E(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,o=[];s<r.length;){var u=mv(r,s);if(!u)return Promise.reject(new E(2,3,3018));var a=u.Bd+u.P;s+a<=r.length&&o.push({data:r.subarray(s+u.Bd,s+a),size:u.P,duration:1024,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),s+=a}return r=n.sampleRate,e=Math.floor(e*r/1e3),e=new hr([i={id:t.id,type:"audio",codecs:n.aa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Ma:[],$:new Uint8Array([]),ia:new Uint8Array([]),data:{ab:this.h,baseMediaDecodeTime:e,Ha:o},stream:t}]),this.g.has(t.id)?i=this.g.get(t.id):(i=dr(e),this.g.set(t.id,i)),t=lo(e),this.h++,t=Ve(i,t),Promise.resolve(t)},U("shaka.transmuxer.AacTransmuxer",Nt),Nt.prototype.transmux=Nt.prototype.transmux,Nt.prototype.getOrginalMimeType=Nt.prototype.getOrginalMimeType,Nt.prototype.convertCodecs=Nt.prototype.convertCodecs,Nt.prototype.isSupported=Nt.prototype.isSupported,Nt.prototype.destroy=Nt.prototype.destroy,pn("audio/aac",function(){return new Nt("audio/aac")},_n),(d=Lt.prototype).destroy=function(){this.g.clear()},d.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&qe(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},d.getOrginalMimeType=function(){return this.i},d.transmux=function(e,t,n,i){for(var r=Br(e=Q(e)),o=r.length;o<e.length&&!a2(e,o);o++);var s=1e3*n.endTime;(r=ai(r)).length&&n&&(n=r.find(function(l){return"com.apple.streaming.transportStreamTimestamp"===l.description}))&&(s=n.data),n=0,r=new Uint8Array([]);for(var u=[];o<e.length;){var a=yv(e,o);if(!a)return Promise.reject(new E(2,3,3018));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount,n=a.sampleRate,r=a.$,u.push({data:e.subarray(o,o+a.P),size:a.P,duration:1536,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=a.P}return e=Math.floor(s*n/1e3),e=new hr([i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Ma:[],$:r,ia:new Uint8Array([]),data:{ab:this.h,baseMediaDecodeTime:e,Ha:u},stream:t}]),this.g.has(t.id)?i=this.g.get(t.id):(i=dr(e),this.g.set(t.id,i)),t=lo(e),this.h++,t=Ve(i,t),Promise.resolve(t)},U("shaka.transmuxer.Ac3Transmuxer",Lt),Lt.prototype.transmux=Lt.prototype.transmux,Lt.prototype.getOrginalMimeType=Lt.prototype.getOrginalMimeType,Lt.prototype.convertCodecs=Lt.prototype.convertCodecs,Lt.prototype.isSupported=Lt.prototype.isSupported,Lt.prototype.destroy=Lt.prototype.destroy,pn("audio/ac3",function(){return new Lt("audio/ac3")},_n),(d=Pt.prototype).destroy=function(){this.g.clear()},d.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&qe(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},d.getOrginalMimeType=function(){return this.i},d.transmux=function(e,t,n,i){for(var r=Br(e=Q(e)),o=r.length;o<e.length&&2935!=(e[o]<<8|e[o+1]<<0);o++);var s=1e3*n.endTime;(r=ai(r)).length&&n&&(n=r.find(function(l){return"com.apple.streaming.transportStreamTimestamp"===l.description}))&&(s=n.data),n=0,r=new Uint8Array([]);for(var u=[];o<e.length;){var a=wv(e,o);if(!a)return Promise.reject(new E(2,3,3018));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount,n=a.sampleRate,r=a.$,u.push({data:e.subarray(o,o+a.P),size:a.P,duration:1536,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=a.P}return e=Math.floor(s*n/1e3),e=new hr([i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Ma:[],$:r,ia:new Uint8Array([]),data:{ab:this.h,baseMediaDecodeTime:e,Ha:u},stream:t}]),this.g.has(t.id)?i=this.g.get(t.id):(i=dr(e),this.g.set(t.id,i)),t=lo(e),this.h++,t=Ve(i,t),Promise.resolve(t)},U("shaka.transmuxer.Ec3Transmuxer",Pt),Pt.prototype.transmux=Pt.prototype.transmux,Pt.prototype.getOrginalMimeType=Pt.prototype.getOrginalMimeType,Pt.prototype.convertCodecs=Pt.prototype.convertCodecs,Pt.prototype.isSupported=Pt.prototype.isSupported,Pt.prototype.destroy=Pt.prototype.destroy,pn("audio/ec3",function(){return new Pt("audio/ec3")},_n);var f2=[100,110,122,244,44,83,86,118,128,138,139,134];function Au(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==o){var s=e[t+3]>>6;r=1e3*v2[14*(3===n?3-i:3===i?3:4)+r-1],o=y2[3*(3===n?0:2===n?1:2)+o],n=w2[n][i];var u=T2[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&2===i&&224e3<=r&&0===s&&(e[t+3]|=128),{sampleRate:o,channelCount:3===s?1:2,P:a,Hh:8*n*u}}return null}function Tv(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}var v2=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],y2=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],w2=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],T2=[0,1,1,4];function jt(e){this.i=e,this.h=0,this.g=new Map}function _t(e){this.h=e,this.g=null}function Tt(e){this.h=e,(this.g=Hl.get("ISOBoxer")())&&function x2(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==S2[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function xv(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}(d=jt.prototype).destroy=function(){this.g.clear()},d.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&qe(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},d.getOrginalMimeType=function(){return this.i},d.transmux=function(e,t,n,i){for(n=Br(e=Q(e)).length;n<e.length;n++){var r=n;if(r+1<e.length&&Tv(e,r)){var o=Au(e,r),s=4;o&&o.P&&(s=o.P),r=(r+=s)===e.length||r+1<e.length&&Tv(e,r)}else r=!1;if(r)break}var u;for(r=[];n<e.length;){if(!(o=Au(e,n)))return Promise.reject(new E(2,3,3018));u||(u=o),n+o.P<=e.length&&r.push({data:e.subarray(n,n+o.P),size:o.P,duration:1152,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),n+=o.P}return u?(e=9e4*u.Hh/u.sampleRate*this.h,u=new hr([i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u.sampleRate,duration:i,Ma:[],$:new Uint8Array([]),ia:new Uint8Array([]),data:{ab:this.h,baseMediaDecodeTime:e,Ha:r},stream:t}]),this.g.has(t.id)?i=this.g.get(t.id):(i=dr(u),this.g.set(t.id,i)),t=lo(u),this.h++,t=Ve(i,t),Promise.resolve(t)):Promise.reject(new E(2,3,3018))},U("shaka.transmuxer.Mp3Transmuxer",jt),jt.prototype.transmux=jt.prototype.transmux,jt.prototype.getOrginalMimeType=jt.prototype.getOrginalMimeType,jt.prototype.convertCodecs=jt.prototype.convertCodecs,jt.prototype.isSupported=jt.prototype.isSupported,jt.prototype.destroy=jt.prototype.destroy,pn("audio/mpeg",function(){return new jt("audio/mpeg")},_n),(d=_t.prototype).destroy=function(){},d.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=on(e).split(","),n=Et("audio",t);return t=Et("video",t),!(!n||t||"mp3"!=bt(n))&&qe(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},d.getOrginalMimeType=function(){return this.h},d.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new we,e=Q(e),"mp3"!=(e=this.g.parse(e)).Kc().audio||"audio"!=r)return Promise.reject(new E(2,3,3018));for(r=new Uint8Array([]),t=(e=p(e.Ab())).next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(i=Au(t,n))?(n+i.P<=t.length&&(r=Ve(r,t.subarray(n,n+i.P))),n+=i.P):n++;return Promise.resolve(r)},U("shaka.transmuxer.MpegTsTransmuxer",_t),_t.prototype.transmux=_t.prototype.transmux,_t.prototype.getOrginalMimeType=_t.prototype.getOrginalMimeType,_t.prototype.convertCodecs=_t.prototype.convertCodecs,_t.prototype.isSupported=_t.prototype.isSupported,_t.prototype.destroy=_t.prototype.destroy,pn("video/mp2t",function(){return new _t("video/mp2t")},Xu),(d=Tt.prototype).destroy=function(){},d.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?qe(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),qe(t)||qe(e)))},d.convertCodecs=function(e,t){return t.replace("mss/","")},d.getOrginalMimeType=function(){return this.h},d.transmux=function(e,t,n){if(!n)return Promise.resolve(Q(e));if(!t.mssPrivateData)return Promise.reject(new E(2,3,3020));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");null===s&&((s=this.g.createFullBox("tfdt",u,o)).version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=r.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var h=r.fetch("saio");if(null===h){(h=this.g.createFullBox("saio",u)).version=0,h.flags=0,h.entry_count=1,h.offset=[0];var g=this.g.createFullBox("saiz",u);if(g.version=0,g.flags=0,g.sample_count=f.sample_count,g.default_sample_info_size=0,g.sample_info_size=[],2&f.flags)for(i=0;i<f.sample_count;i+=1)g.sample_info_size[i]=10+6*f.entry[i].NumberOfEntries;else g.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var m=r.fetch("moof");a.data_offset=m.getLength()+8;var w=r.fetch("saio");null!==w&&(w.offset[0]=xv(m,"traf")+xv(u,"senc")+16);var v=Q(r.write());return Promise.resolve(v)}catch(T){return Promise.reject(T instanceof E?T:new E(2,3,3022))}},U("shaka.transmuxer.MssTransmuxer",Tt),Tt.prototype.transmux=Tt.prototype.transmux,Tt.prototype.getOrginalMimeType=Tt.prototype.getOrginalMimeType,Tt.prototype.convertCodecs=Tt.prototype.convertCodecs,Tt.prototype.isSupported=Tt.prototype.isSupported,Tt.prototype.destroy=Tt.prototype.destroy;var S2=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function Ot(e){this.j=e,this.g=0,this.h=new Map,this.i=null}pn("mss/audio/mp4",function(){return new Tt("mss/audio/mp4")},_n),pn("mss/video/mp4",function(){return new Tt("mss/video/mp4")},_n),(d=Ot.prototype).destroy=function(){this.h.clear()},d.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=on(e).split(","),i=Et("audio",n);return n=Et("video",n),!(i&&(i=bt(i),!E2.includes(i))||n&&(i=bt(n),!A2.includes(i)))&&(t?qe(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),qe(t)||qe(e)))},d.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=on(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},d.getOrginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i,r){this.i?this.i.clearData():this.i=new we,e=Q(e);var o=this.i.parse(e);e=[];var s=o.Kc();try{var u=null;if("video"==r){switch(s.video){case"avc":for(var a=[],l=null,c=[],f=o.bc(),h=0;h<f.length;h++){var g=f[h],m=void 0;h+1<f.length&&(m=f[h+1]);var w=o.ec(g,m);c=c.concat(w);var v=c2(w);v&&(null==l&&(l=g.dts),m=void 0,a.push({data:v.data,size:v.data.byteLength,duration:m=h+1<f.length?(f[h+1].dts||0)-(g.dts||0):1<f.length?(g.dts||0)-(f[h-1].dts||0):9e4*(n.endTime-n.startTime),Oa:Math.round((g.pts||0)-(g.dts||0)),flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:v.Sc?2:1,Qa:v.Sc?0:1}}))}var T=function l2(e){if(!e.length)return null;var t=e.find(function(c){return 7==c.type});if(e=e.find(function(c){return 8==c.type}),!t||!e)return null;var n=new In(t.data),i=ae(n);if(ae(n),ae(n),at(n),f2.includes(i)&&(3===(i=O(n))&&ft(n,1),at(n),at(n),ft(n,1),b(n))){i=3!==i?8:12;for(var r=0;r<i;r++)b(n)&&rs(n,6>r?16:64)}if(at(n),0===(i=O(n)))O(n);else if(1===i)for(ft(n,1),at(n),at(n),i=O(n),r=0;r<i;r++)at(n);at(n),ft(n,1),i=O(n);var o=O(n),s=Z(n,1);0===s&&ft(n,1),ft(n,1);var u=r=0,a=0,l=0;return b(n)&&(r=O(n),u=O(n),a=O(n),l=O(n)),n=(2-s)*(o+1)*16-2*a-2*l,i=16*(i+1)-2*r-2*u,(r=[]).push((t=t.ha).byteLength>>>8&255),r.push(255&t.byteLength),r=r.concat.apply(r,q(t)),(t=[]).push((e=e.ha).byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,q(e)),{height:n,width:i,ia:e=new Uint8Array([1,r[3],r[4],r[5],255,225].concat(r,[1],t))}}(c);if(!T||null==l)throw new E(2,3,3018);t.height=T.height,t.width=T.width,u={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Ma:[],$:new Uint8Array([]),ia:T.ia,data:{ab:this.g,baseMediaDecodeTime:l,Ha:a},stream:t};break;case"hvc":for(f=[],g=null,w=[],a=o.bc(),v=0;v<a.length;v++){T=void 0,v+1<a.length&&(T=a[v+1]),c=o.ec(l=a[v],T),w=w.concat(c),T=!1,h=new Uint8Array([]);for(var x=!1,S=(m=p(c)).next();!S.done;S=m.next()){var A=S.value;switch(A.type){case 1:case 0:var I=x=!0;break;case 19:case 20:case 21:T=I=x=!0;break;case 32:case 33:case 34:case 39:case 40:I=!0;break;case 35:x=I=!0;break;default:I=!1}if(x&&I){var M=A.ha.byteLength,k=new Uint8Array(4);k[0]=M>>24&255,k[1]=M>>16&255,k[2]=M>>8&255,k[3]=255&M,h=Ve(h,k,A.ha)}}var R=h.byteLength?{data:h,Sc:T}:null;R&&(null==g&&null!=l.dts&&(g=l.dts),T=void 0,f.push({data:R.data,size:R.data.byteLength,duration:T=v+1<a.length?(a[v+1].dts||0)-(l.dts||0):1<a.length?(l.dts||0)-(a[v-1].dts||0):9e4*(n.endTime-n.startTime),Oa:Math.round((l.pts||0)-(l.dts||0)),flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:R.Sc?2:1,Qa:R.Sc?0:1}}))}var D=function h2(e){if(!e.length)return null;var t=e.find(function(s){return 32==s.type}),n=e.find(function(s){return 33==s.type}),i=e.find(function(s){return 34==s.type});if(!t||!n||!i)return null;var r=function d2(e){var t=new In(e,!0);return ae(t),ae(t),Z(t,4),Z(t,2),Z(t,6),{Ve:(e=Z(t,3))+1,qf:t=b(t)}}(t.ha);e=function p2(e){ae(e=new In(e,!0)),ae(e);var t=0,n=0,i=0,r=0;Z(e,4);var o=Z(e,3);b(e);for(var s=Z(e,2),u=Z(e,1),a=Z(e,5),l=ae(e),c=ae(e),f=ae(e),h=ae(e),g=ae(e),m=ae(e),w=ae(e),v=ae(e),T=ae(e),x=ae(e),S=ae(e),A=[],I=[],M=0;M<o;M++)A.push(b(e)),I.push(b(e));if(0<o)for(M=o;8>M;M++)Z(e,2);for(M=0;M<o;M++)A[M]&&Z(e,88),I[M]&&ae(e);O(e),3==(A=O(e))&&Z(e,1),I=O(e),M=O(e),b(e)&&(t+=O(e),n+=O(e),i+=O(e),r+=O(e));var k=O(e),R=O(e),D=O(e);if(b(e))for(var L=0;L<=o;L++)O(e),O(e),O(e);else O(e),O(e),O(e);if(O(e),O(e),O(e),O(e),O(e),O(e),b(e)&&b(e))for(L=0;4>L;L++)for(var j=0;j<(3===L?2:6);j++)if(b(e)){var _=Math.min(64,1<<4+(L<<1));1<L&&Ki(e);for(var B=0;B<_;B++)Ki(e)}else O(e);for(b(e),b(e),b(e)&&(ae(e),O(e),O(e),b(e)),L=O(e),_=j=0;_<L;_++)if(B=!1,0!==_&&(B=b(e)),B){_===L&&O(e),b(e),O(e);for(var H=B=0;H<=j;H++){var z=b(e),re=!1;z||(re=b(e)),(z||re)&&B++}j=B}else{for(j=(H=O(e))+(B=O(e)),z=0;z<H;z++)O(e),b(e);for(H=0;H<B;H++)O(e),b(e)}if(b(e))for(L=O(e),j=0;j<L;j++){for(_=0;_<D+4;_++)Z(e,1);Z(e,1)}if(D=0,b(e),b(e),b(e)){if(b(e)&&255===ae(e)&&(Z(e,16),Z(e,16)),b(e)&&b(e),b(e)&&(Z(e,3),b(e),b(e)&&(ae(e),ae(e),ae(e))),b(e)&&(O(e),O(e)),b(e),b(e),b(e),(L=b(e))&&(O(e),O(e),O(e),O(e)),b(e)&&(Z(e,32),Z(e,32),b(e)&&O(e),b(e)))for(_=!1,L=b(e),j=b(e),(L||j)&&((_=b(e))&&(ae(e),Z(e,5),b(e),Z(e,5)),Z(e,4),Z(e,4),_&&Z(e,4),Z(e,5),Z(e,5),Z(e,5)),B=0;B<=o;B++){if(z=!0,H=1,b(e)||(z=b(e)),re=!1,z?O(e):re=b(e),re||(H=O(e)+1),L){for(z=0;z<H;z++)O(e),O(e),_&&(O(e),O(e));b(e)}if(j){for(z=0;z<H;z++)O(e),O(e),_&&(O(e),O(e));b(e)}}b(e)&&(b(e),b(e),b(e),D=O(e),O(e),O(e),O(e),O(e))}return{te:S,ze:s,Ae:u,ye:a,ue:l,ve:c,we:f,xe:h,ne:g,oe:m,pe:w,qe:v,re:T,se:x,Ld:D,je:0,ie:A,he:k,ge:R,width:I-(t+n)*(1===A||2===A?2:1),height:M-(i+r)*(1===A?2:1)}}(n.ha);var o=function g2(e){var t=new In(e,!0);ae(t),ae(t),O(t),O(t),b(t),b(t),Z(t,3),b(t),b(t),O(t),O(t),Ki(t),b(t),b(t),b(t)&&O(t),Ki(t),Ki(t),b(t),b(t),b(t),b(t),e=b(t);var n=1;return(t=b(t))&&e?n=0:t?n=3:e&&(n=2),{$e:n}}(i.ha);return t=function m2(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(3&i.ze)<<6|(i.Ae?1:0)<<5|31&i.ye,r[2]=i.ue,r[3]=i.ve,r[4]=i.we,r[5]=i.xe,r[6]=i.ne,r[7]=i.oe,r[8]=i.pe,r[9]=i.qe,r[10]=i.re,r[11]=i.se,r[12]=i.te,r[13]=240|(3840&i.Ld)>>8,r[14]=255&i.Ld,r[15]=252|3&i.$e,r[16]=252|3&i.ie,r[17]=248|7&i.he,r[18]=248|7&i.ge,r[19]=0,r[20]=0,r[21]=(3&i.je)<<6|(7&i.Ve)<<3|(i.qf?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=(255&e.byteLength)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(65280&t.byteLength)>>8,r[e.byteLength+32]=(255&t.byteLength)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,r[e.byteLength+10+t.byteLength+27]=(255&n.byteLength)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}(t.ha,n.ha,i.ha,{Ve:r.Ve,qf:r.qf,ze:e.ze,Ae:e.Ae,te:e.te,ye:e.ye,ue:e.ue,ve:e.ve,we:e.we,xe:e.xe,ne:e.ne,oe:e.oe,pe:e.pe,qe:e.qe,re:e.re,se:e.se,je:e.je,Ld:e.Ld,ie:e.ie,he:e.he,ge:e.ge,$e:o.$e}),{height:e.height,width:e.width,ia:t}}(w);if(!D||null==g)throw new E(2,3,3018);t.height=D.height,t.width=D.width,u={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Ma:[],$:new Uint8Array([]),ia:D.ia,data:{ab:this.g,baseMediaDecodeTime:g,Ha:f},stream:t}}u&&(e.push(u),u=null)}if("audio"==r){switch(s.audio){case"aac":for(var j,L=[],_=null,B=p(o.Ab()),H=B.next();!H.done;H=B.next()){var z=H.value,re=z.data;if(re){var se=0;if(!(j=vv(re,se)))throw new E(2,3,3018);for(t.audioSamplingRate=j.sampleRate,t.channelsCount=j.channelCount,null==_&&null!==z.pts&&(_=z.pts);se<re.length;){var ye=mv(re,se);if(ye){var je=ye.Bd+ye.P;se+je<=re.length&&L.push({data:re.subarray(se+ye.Bd,se+je),size:ye.P,duration:1024,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),se+=je}else se++}}}if(!j||null==_){if(!o.bc().length)throw new E(2,3,3018);_=9e4*n.startTime;var Ue=Et("audio",t.codecs.split(","));if(!Ue||!t.channelsCount||!t.audioSamplingRate)throw new E(2,3,3018);j={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,aa:Ue};var Ce=function u2(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(Ue,t.channelsCount);if(!Ce)throw new E(2,3,3018);var Ae=_+9e4*(n.endTime-n.startTime);for(o=_;o<Ae;)L.push({data:Ce,size:Ce.byteLength,duration:1024,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=1024/j.sampleRate*9e4}var ge=j.sampleRate;o=_/9e4*ge,u={id:t.id,type:"audio",codecs:j.aa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ge,duration:i,Ma:[],$:new Uint8Array([]),ia:new Uint8Array([]),data:{ab:this.g,baseMediaDecodeTime:o,Ha:L},stream:t};break;case"ac3":j=[],ge=0,L=new Uint8Array([]),_=null;for(var ke=(se=p(o.Ab())).next();!ke.done;ke=se.next()){var xt=ke.value,xo=xt.data;for(null==_&&null!==xt.pts&&(_=xt.pts),o=0;o<xo.length;){var nt=yv(xo,o);nt?(t.audioSamplingRate=nt.sampleRate,t.channelsCount=nt.channelCount,ge=nt.sampleRate,L=nt.$,j.push({data:xo.subarray(o,o+nt.P),size:nt.P,duration:1536,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=nt.P):o++}}if(0==ge||0==L.byteLength||null==_)throw new E(2,3,3018);o=_/9e4*ge,u={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ge,duration:i,Ma:[],$:L,ia:new Uint8Array([]),data:{ab:this.g,baseMediaDecodeTime:o,Ha:j},stream:t};break;case"ec3":j=[],ge=0,_=new Uint8Array([]),L=null;for(var St=p(o.Ab()),Fc=St.next();!Fc.done;Fc=St.next()){var bc=Fc.value,Vc=bc.data;for(null==L&&null!==bc.pts&&(L=bc.pts),o=0;o<Vc.length;){var Gn=wv(Vc,o);Gn?(t.audioSamplingRate=Gn.sampleRate,t.channelsCount=Gn.channelCount,ge=Gn.sampleRate,_=Gn.$,j.push({data:Vc.subarray(o,o+Gn.P),size:Gn.P,duration:1536,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=Gn.P):o++}}if(0==ge||0==_.byteLength||null==L)throw new E(2,3,3018);o=L/9e4*ge,u={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ge,duration:i,Ma:[],$:_,ia:new Uint8Array([]),data:{ab:this.g,baseMediaDecodeTime:o,Ha:j},stream:t};break;case"mp3":var Mu;j=[],ge=null;for(var Pv=p(o.Ab()),qc=Pv.next();!qc.done;qc=Pv.next()){var Hc=qc.value,So=Hc.data;if(So)for(null==ge&&null!==Hc.pts&&(ge=Hc.pts),o=0;o<So.length;){var mr=Au(So,o);mr?(Mu||(Mu=mr),o+mr.P<=So.length&&j.push({data:So.subarray(o,o+mr.P),size:mr.P,duration:1152,Oa:0,flags:{Pa:0,Fa:0,Da:0,Aa:0,Ba:2,Qa:0}}),o+=mr.P):o++}}if(!Mu||null==ge)throw new E(2,3,3018);var jv=Mu.sampleRate;o=ge/9e4*jv,u={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:jv,duration:i,Ma:[],$:new Uint8Array([]),ia:new Uint8Array([]),data:{ab:this.g,baseMediaDecodeTime:o,Ha:j},stream:t}}u&&e.push(u)}}catch(C2){return Promise.reject(C2)}return e.length?(e=new hr(e),this.h.has(t.id)?i=this.h.get(t.id):(i=dr(e),this.h.set(t.id,i)),t=lo(e),this.g++,t=Ve(i,t),Promise.resolve(t)):Promise.reject(new E(2,3,3018))},U("shaka.transmuxer.TsTransmuxer",Ot),Ot.prototype.transmux=Ot.prototype.transmux,Ot.prototype.getOrginalMimeType=Ot.prototype.getOrginalMimeType,Ot.prototype.convertCodecs=Ot.prototype.convertCodecs,Ot.prototype.isSupported=Ot.prototype.isSupported,Ot.prototype.destroy=Ot.prototype.destroy;var wo,To,E2=["aac","ac-3","ec-3","mp3"],A2=["avc","hevc"];function Sv(){}function Ev(){wo?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(wo=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=I2):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function I2(e,t){var i,n=this;return C(function(r){return 1==r.g?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),y(r,wo.call(n,e,t),2)):Nv(i=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=wo,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Av,r.return(Av.call(n,e,t)))})}function Av(e,t){var i,r,o,s,u,a,l,c,f,n=this;return C(function(g){if(1==g.g){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=Rv(e),r=[],o=p(t),s=o.next();!s.done;s=o.next())a=Iv((u=s.value).videoCapabilities,i),l=Iv(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||((c=Object.assign({},u)).videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw(f=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return y(g,wo.call(n,e,r),2)}return g.return(new Iu(g.h,i))})}function Iv(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}function Mv(){}function Cv(){To?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(To=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=M2):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function M2(e){var n,i,r,t=this;return C(function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),y(o,To.call(t,e),2);case 2:if(n=o.h,!e.keySystemConfiguration)return o.return(n);if((i=n.keySystemAccess)&&Nv(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=To,o.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=kv,i){o.B(3);break}return r=n,y(o,Dv(e),4);case 4:return r.keySystemAccess=o.h,o.return(n);case 3:return o.return(kv.call(t,e))}})}function kv(e){var n,i,o,s,u,a,l,t=this;return C(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(o=(i=e.keySystemConfiguration).audio&&i.audio.encryptionScheme,s=i.video&&i.video.encryptionScheme,n=Rv(i.keySystem),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=n||s&&s!=n)?c.return(u):y(c,To.call(t,e),2);case 2:if((a=c.h).keySystemAccess){a.keySystemAccess=new Iu(a.keySystemAccess,n),c.B(3);break}if(!e.keySystemConfiguration){c.B(3);break}return l=a,y(c,Dv(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(a)}})}function Dv(e){return C(function(i){if(1==i.g){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),y(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[r]),2)}return i.return(i.h)})}function Iu(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Rv(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Nv(e){return!(!(e=(e=e.getConfiguration()).videoCapabilities&&e.videoCapabilities[0]||e.audioCapabilities&&e.audioCapabilities[0])||void 0===e.encryptionScheme)}function Bc(){}function Lv(){Ev(),Cv()}pn("video/mp2t",function(){return new Ot("video/mp2t")},Gu),U("EmeEncryptionSchemePolyfill",Sv),Sv.install=Ev,U("McEncryptionSchemePolyfill",Mv),Mv.install=Cv,Iu.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=p(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=p(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Iu.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},U("EncryptionSchemePolyfills",Bc),Bc.install=Lv,typeof ku<"u"&&ku.exports&&(ku.exports=Bc)}.call(vr,Cu,Cu,void 0),typeof exports<"u")for(var Kc in vr.shaka)exports[Kc]=vr.shaka[Kc];else"function"==typeof define&&define.amd?define(function(){return vr.shaka}):Cu.shaka=vr.shaka}();